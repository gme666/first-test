f16807bd6b8cd78139663db75da425b0











'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};



var Animated=require('Animated');
var Easing=require('Easing');
var NativeMethodsMixin=require('NativeMethodsMixin');
var React=require('React');
var PropTypes=require('prop-types');
var TimerMixin=require('react-timer-mixin');
var Touchable=require('Touchable');
var TouchableWithoutFeedback=require('TouchableWithoutFeedback');

var createReactClass=require('create-react-class');
var ensurePositiveDelayProps=require('ensurePositiveDelayProps');
var flattenStyle=require('flattenStyle');



var PRESS_RETENTION_OFFSET={top:20,left:20,right:20,bottom:30};























var TouchableOpacity=createReactClass({
displayName:'TouchableOpacity',
mixins:[TimerMixin,Touchable.Mixin,NativeMethodsMixin],

propTypes:_extends({},
TouchableWithoutFeedback.propTypes,{




activeOpacity:PropTypes.number,



tvParallaxProperties:PropTypes.object}),


getDefaultProps:function getDefaultProps(){
return{
activeOpacity:0.2};

},

getInitialState:function getInitialState(){
return _extends({},
this.touchableGetInitialState(),{
anim:new Animated.Value(this._getChildStyleOpacityWithDefault())});

},

componentDidMount:function componentDidMount(){
ensurePositiveDelayProps(this.props);
},

componentWillReceiveProps:function componentWillReceiveProps(nextProps){
ensurePositiveDelayProps(nextProps);
},




setOpacityTo:function setOpacityTo(value,duration){
Animated.timing(
this.state.anim,
{
toValue:value,
duration:duration,
easing:Easing.inOut(Easing.quad),
useNativeDriver:true}).

start();
},





touchableHandleActivePressIn:function touchableHandleActivePressIn(e){
if(e.dispatchConfig.registrationName==='onResponderGrant'){
this._opacityActive(0);
}else{
this._opacityActive(150);
}
this.props.onPressIn&&this.props.onPressIn(e);
},

touchableHandleActivePressOut:function touchableHandleActivePressOut(e){
this._opacityInactive(250);
this.props.onPressOut&&this.props.onPressOut(e);
},

touchableHandlePress:function touchableHandlePress(e){
this.props.onPress&&this.props.onPress(e);
},

touchableHandleLongPress:function touchableHandleLongPress(e){
this.props.onLongPress&&this.props.onLongPress(e);
},

touchableGetPressRectOffset:function touchableGetPressRectOffset(){
return this.props.pressRetentionOffset||PRESS_RETENTION_OFFSET;
},

touchableGetHitSlop:function touchableGetHitSlop(){
return this.props.hitSlop;
},

touchableGetHighlightDelayMS:function touchableGetHighlightDelayMS(){
return this.props.delayPressIn||0;
},

touchableGetLongPressDelayMS:function touchableGetLongPressDelayMS(){
return this.props.delayLongPress===0?0:
this.props.delayLongPress||500;
},

touchableGetPressOutDelayMS:function touchableGetPressOutDelayMS(){
return this.props.delayPressOut;
},

_opacityActive:function _opacityActive(duration){
this.setOpacityTo(this.props.activeOpacity,duration);
},

_opacityInactive:function _opacityInactive(duration){
this.setOpacityTo(
this._getChildStyleOpacityWithDefault(),
duration);

},

_getChildStyleOpacityWithDefault:function _getChildStyleOpacityWithDefault(){
var childStyle=flattenStyle(this.props.style)||{};
return childStyle.opacity==undefined?1:childStyle.opacity;
},

render:function render(){
return(
React.createElement(Animated.View,{
accessible:this.props.accessible!==false,
accessibilityLabel:this.props.accessibilityLabel,
accessibilityComponentType:this.props.accessibilityComponentType,
accessibilityTraits:this.props.accessibilityTraits,
style:[this.props.style,{opacity:this.state.anim}],
nativeID:this.props.nativeID,
testID:this.props.testID,
onLayout:this.props.onLayout,
isTVSelectable:true,
tvParallaxProperties:this.props.tvParallaxProperties,
hitSlop:this.props.hitSlop,
onStartShouldSetResponder:this.touchableHandleStartShouldSetResponder,
onResponderTerminationRequest:this.touchableHandleResponderTerminationRequest,
onResponderGrant:this.touchableHandleResponderGrant,
onResponderMove:this.touchableHandleResponderMove,
onResponderRelease:this.touchableHandleResponderRelease,
onResponderTerminate:this.touchableHandleResponderTerminate},
this.props.children,
Touchable.renderDebugView({color:'cyan',hitSlop:this.props.hitSlop})));


}});


module.exports=TouchableOpacity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU9wYWNpdHkuanMiXSwibmFtZXMiOlsiQW5pbWF0ZWQiLCJyZXF1aXJlIiwiRWFzaW5nIiwiTmF0aXZlTWV0aG9kc01peGluIiwiUmVhY3QiLCJQcm9wVHlwZXMiLCJUaW1lck1peGluIiwiVG91Y2hhYmxlIiwiVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIiwiY3JlYXRlUmVhY3RDbGFzcyIsImVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyIsImZsYXR0ZW5TdHlsZSIsIlBSRVNTX1JFVEVOVElPTl9PRkZTRVQiLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJUb3VjaGFibGVPcGFjaXR5IiwiZGlzcGxheU5hbWUiLCJtaXhpbnMiLCJNaXhpbiIsInByb3BUeXBlcyIsImFjdGl2ZU9wYWNpdHkiLCJudW1iZXIiLCJ0dlBhcmFsbGF4UHJvcGVydGllcyIsIm9iamVjdCIsImdldERlZmF1bHRQcm9wcyIsImdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsImFuaW0iLCJWYWx1ZSIsIl9nZXRDaGlsZFN0eWxlT3BhY2l0eVdpdGhEZWZhdWx0IiwiY29tcG9uZW50RGlkTW91bnQiLCJwcm9wcyIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJzZXRPcGFjaXR5VG8iLCJ2YWx1ZSIsImR1cmF0aW9uIiwidGltaW5nIiwic3RhdGUiLCJ0b1ZhbHVlIiwiZWFzaW5nIiwiaW5PdXQiLCJxdWFkIiwidXNlTmF0aXZlRHJpdmVyIiwic3RhcnQiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwiZSIsImRpc3BhdGNoQ29uZmlnIiwicmVnaXN0cmF0aW9uTmFtZSIsIl9vcGFjaXR5QWN0aXZlIiwib25QcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJfb3BhY2l0eUluYWN0aXZlIiwib25QcmVzc091dCIsInRvdWNoYWJsZUhhbmRsZVByZXNzIiwib25QcmVzcyIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsIm9uTG9uZ1ByZXNzIiwidG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0IiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJ0b3VjaGFibGVHZXRIaXRTbG9wIiwiaGl0U2xvcCIsInRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMiLCJkZWxheVByZXNzSW4iLCJ0b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TIiwiZGVsYXlMb25nUHJlc3MiLCJ0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMiLCJkZWxheVByZXNzT3V0IiwiY2hpbGRTdHlsZSIsInN0eWxlIiwib3BhY2l0eSIsInVuZGVmaW5lZCIsInJlbmRlciIsImFjY2Vzc2libGUiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZSIsImFjY2Vzc2liaWxpdHlUcmFpdHMiLCJuYXRpdmVJRCIsInRlc3RJRCIsIm9uTGF5b3V0IiwidG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXIiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwiY2hpbGRyZW4iLCJyZW5kZXJEZWJ1Z1ZpZXciLCJjb2xvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBV0EsYTs7OztBQUlBLEdBQUlBLFVBQVdDLFFBQVEsVUFBUixDQUFmO0FBQ0EsR0FBSUMsUUFBU0QsUUFBUSxRQUFSLENBQWI7QUFDQSxHQUFJRSxvQkFBcUJGLFFBQVEsb0JBQVIsQ0FBekI7QUFDQSxHQUFJRyxPQUFRSCxRQUFRLE9BQVIsQ0FBWjtBQUNBLEdBQUlJLFdBQVlKLFFBQVEs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akM7QUFHRSwyQkFBNEIsS0FBSzNDLEtBQUwsQ0FBVzRDLDBCQUh6QztBQUlFLG9CQUFxQixLQUFLNUMsS0FBTCxDQUFXNkMsbUJBSmxDO0FBS0UsTUFBTyxDQUFDLEtBQUs3QyxLQUFMLENBQVdzQyxLQUFaLENBQW1CLENBQUNDLFFBQVMsS0FBS2hDLEtBQUwsQ0FBV1gsSUFBckIsQ0FBbkIsQ0FMVDtBQU1FLFNBQVUsS0FBS0ksS0FBTCxDQUFXOEMsUUFOdkI7QUFPRSxPQUFRLEtBQUs5QyxLQUFMLENBQVcrQyxNQVByQjtBQVFFLFNBQVUsS0FBSy9DLEtBQUwsQ0FBV2dELFFBUnZCO0FBU0UsZUFBZ0IsSUFUbEI7QUFVRSxxQkFBc0IsS0FBS2hELEtBQUwsQ0FBV1Qsb0JBVm5DO0FBV0UsUUFBUyxLQUFLUyxLQUFMLENBQVc4QixPQVh0QjtBQVlFLDBCQUEyQixLQUFLbUIsc0NBWmxDO0FBYUUsOEJBQStCLEtBQUtDLDBDQWJ0QztBQWNFLGlCQUFrQixLQUFLQyw2QkFkekI7QUFlRSxnQkFBaUIsS0FBS0MsNEJBZnhCO0FBZ0JFLG1CQUFvQixLQUFLQywrQkFoQjNCO0FBaUJFLHFCQUFzQixLQUFLQyxpQ0FqQjdCO0FBa0JHLEtBQUt0RCxLQUFMLENBQVd1RCxRQWxCZDtBQW1CR2pGLFVBQVVrRixlQUFWLENBQTBCLENBQUNDLE1BQU8sTUFBUixDQUFnQjNCLFFBQVMsS0FBSzlCLEtBQUwsQ0FBVzhCLE9BQXBDLENBQTFCLENBbkJILENBREY7OztBQXVCRCxDQTVJcUMsQ0FBakIsQ0FBdkI7OztBQStJQTRCLE9BQU9DLE9BQVAsQ0FBaUIzRSxnQkFBakIiLCJmaWxlIjoiVG91Y2hhYmxlT3BhY2l0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgVG91Y2hhYmxlT3BhY2l0eVxuICogQG5vZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIE5vdGUgKGF2aWspOiBhZGQgQGZsb3cgd2hlbiBGbG93IHN1cHBvcnRzIHNwcmVhZCBwcm9wZXJ0aWVzIGluIHByb3BUeXBlc1xuXG52YXIgQW5pbWF0ZWQgPSByZXF1aXJlKCdBbmltYXRlZCcpO1xudmFyIEVhc2luZyA9IHJlcXVpcmUoJ0Vhc2luZycpO1xudmFyIE5hdGl2ZU1ldGhvZHNNaXhpbiA9IHJlcXVpcmUoJ05hdGl2ZU1ldGhvZHNNaXhpbicpO1xudmFyIFJlYWN0ID0gcmVxdWlyZSgnUmVhY3QnKTtcbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgVGltZXJNaXhpbiA9IHJlcXVpcmUoJ3JlYWN0LXRpbWVyLW1peGluJyk7XG52YXIgVG91Y2hhYmxlID0gcmVxdWlyZSgnVG91Y2hhYmxlJyk7XG52YXIgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrID0gcmVxdWlyZSgnVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJyk7XG5cbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzID0gcmVxdWlyZSgnZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzJyk7XG52YXIgZmxhdHRlblN0eWxlID0gcmVxdWlyZSgnZmxhdHRlblN0eWxlJyk7XG5cbnR5cGUgRXZlbnQgPSBPYmplY3Q7XG5cbnZhciBQUkVTU19SRVRFTlRJT05fT0ZGU0VUID0ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzB9O1xuXG4vKipcbiAqIEEgd3JhcHBlciBmb3IgbWFraW5nIHZpZXdzIHJlc3BvbmQgcHJvcGVybHkgdG8gdG91Y2hlcy5cbiAqIE9uIHByZXNzIGRvd24sIHRoZSBvcGFjaXR5IG9mIHRoZSB3cmFwcGVkIHZpZXcgaXMgZGVjcmVhc2VkLCBkaW1taW5nIGl0LlxuICpcbiAqIE9wYWNpdHkgaXMgY29udHJvbGxlZCBieSB3cmFwcGluZyB0aGUgY2hpbGRyZW4gaW4gYW4gQW5pbWF0ZWQuVmlldywgd2hpY2ggaXNcbiAqIGFkZGVkIHRvIHRoZSB2aWV3IGhpZWFyY2h5LiAgQmUgYXdhcmUgdGhhdCB0aGlzIGNhbiBhZmZlY3QgbGF5b3V0LlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiByZW5kZXJCdXR0b246IGZ1bmN0aW9uKCkge1xuICogICByZXR1cm4gKFxuICogICAgIDxUb3VjaGFibGVPcGFjaXR5IG9uUHJlc3M9e3RoaXMuX29uUHJlc3NCdXR0b259PlxuICogICAgICAgPEltYWdlXG4gKiAgICAgICAgIHN0eWxlPXtzdHlsZXMuYnV0dG9ufVxuICogICAgICAgICBzb3VyY2U9e3JlcXVpcmUoJy4vbXlCdXR0b24ucG5nJyl9XG4gKiAgICAgICAvPlxuICogICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cbiAqICAgKTtcbiAqIH0sXG4gKiBgYGBcbiAqL1xudmFyIFRvdWNoYWJsZU9wYWNpdHkgPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdUb3VjaGFibGVPcGFjaXR5JyxcbiAgbWl4aW5zOiBbVGltZXJNaXhpbiwgVG91Y2hhYmxlLk1peGluLCBOYXRpdmVNZXRob2RzTWl4aW5dLFxuXG4gIHByb3BUeXBlczoge1xuICAgIC4uLlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjay5wcm9wVHlwZXMsXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGF0IHRoZSBvcGFjaXR5IG9mIHRoZSB3cmFwcGVkIHZpZXcgc2hvdWxkIGJlIHdoZW4gdG91Y2ggaXNcbiAgICAgKiBhY3RpdmUuIERlZmF1bHRzIHRvIDAuMi5cbiAgICAgKi9cbiAgICBhY3RpdmVPcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIC8qKlxuICAgICAqIEFwcGxlIFRWIHBhcmFsbGF4IGVmZmVjdHNcbiAgICAgKi9cbiAgICB0dlBhcmFsbGF4UHJvcGVydGllczogUHJvcFR5cGVzLm9iamVjdCxcbiAgfSxcblxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3RpdmVPcGFjaXR5OiAwLjIsXG4gICAgfTtcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLFxuICAgICAgYW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSksXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wcykge1xuICAgIGVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyhuZXh0UHJvcHMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB0b3VjaGFibGUgdG8gYSBuZXcgb3BhY2l0eS5cbiAgICovXG4gIHNldE9wYWNpdHlUbzogZnVuY3Rpb24odmFsdWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICAgIEFuaW1hdGVkLnRpbWluZyhcbiAgICAgIHRoaXMuc3RhdGUuYW5pbSxcbiAgICAgIHtcbiAgICAgICAgdG9WYWx1ZTogdmFsdWUsXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiBFYXNpbmcuaW5PdXQoRWFzaW5nLnF1YWQpLFxuICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICB9XG4gICAgKS5zdGFydCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgVG91Y2hhYmxlLk1peGluYCBzZWxmIGNhbGxiYWNrcy4gVGhlIG1peGluIHdpbGwgaW52b2tlIHRoZXNlIGlmIHRoZXkgYXJlXG4gICAqIGRlZmluZWQgb24geW91ciBjb21wb25lbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIGlmIChlLmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUgPT09ICdvblJlc3BvbmRlckdyYW50Jykge1xuICAgICAgdGhpcy5fb3BhY2l0eUFjdGl2ZSgwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb3BhY2l0eUFjdGl2ZSgxNTApO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uUHJlc3NJbiAmJiB0aGlzLnByb3BzLm9uUHJlc3NJbihlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb24oZTogRXZlbnQpIHtcbiAgICB0aGlzLl9vcGFjaXR5SW5hY3RpdmUoMjUwKTtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3NPdXQgJiYgdGhpcy5wcm9wcy5vblByZXNzT3V0KGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25QcmVzcyAmJiB0aGlzLnByb3BzLm9uUHJlc3MoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25Mb25nUHJlc3MgJiYgdGhpcy5wcm9wcy5vbkxvbmdQcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLnByZXNzUmV0ZW50aW9uT2Zmc2V0IHx8IFBSRVNTX1JFVEVOVElPTl9PRkZTRVQ7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGl0U2xvcDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaGl0U2xvcDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzSW4gfHwgMDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheUxvbmdQcmVzcyA9PT0gMCA/IDAgOlxuICAgICAgdGhpcy5wcm9wcy5kZWxheUxvbmdQcmVzcyB8fCA1MDA7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kZWxheVByZXNzT3V0O1xuICB9LFxuXG4gIF9vcGFjaXR5QWN0aXZlOiBmdW5jdGlvbihkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRPcGFjaXR5VG8odGhpcy5wcm9wcy5hY3RpdmVPcGFjaXR5LCBkdXJhdGlvbik7XG4gIH0sXG5cbiAgX29wYWNpdHlJbmFjdGl2ZTogZnVuY3Rpb24oZHVyYXRpb246IG51bWJlcikge1xuICAgIHRoaXMuc2V0T3BhY2l0eVRvKFxuICAgICAgdGhpcy5fZ2V0Q2hpbGRTdHlsZU9wYWNpdHlXaXRoRGVmYXVsdCgpLFxuICAgICAgZHVyYXRpb25cbiAgICApO1xuICB9LFxuXG4gIF9nZXRDaGlsZFN0eWxlT3BhY2l0eVdpdGhEZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgIHZhciBjaGlsZFN0eWxlID0gZmxhdHRlblN0eWxlKHRoaXMucHJvcHMuc3R5bGUpIHx8IHt9O1xuICAgcmV0dXJuIGNoaWxkU3R5bGUub3BhY2l0eSA9PSB1bmRlZmluZWQgPyAxIDogY2hpbGRTdHlsZS5vcGFjaXR5O1xuIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgYWNjZXNzaWJsZT17dGhpcy5wcm9wcy5hY2Nlc3NpYmxlICE9PSBmYWxzZX1cbiAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXt0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlMYWJlbH1cbiAgICAgICAgYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGU9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGV9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlUcmFpdHM9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eVRyYWl0c31cbiAgICAgICAgc3R5bGU9e1t0aGlzLnByb3BzLnN0eWxlLCB7b3BhY2l0eTogdGhpcy5zdGF0ZS5hbmltfV19XG4gICAgICAgIG5hdGl2ZUlEPXt0aGlzLnByb3BzLm5hdGl2ZUlEfVxuICAgICAgICB0ZXN0SUQ9e3RoaXMucHJvcHMudGVzdElEfVxuICAgICAgICBvbkxheW91dD17dGhpcy5wcm9wcy5vbkxheW91dH1cbiAgICAgICAgaXNUVlNlbGVjdGFibGU9e3RydWV9XG4gICAgICAgIHR2UGFyYWxsYXhQcm9wZXJ0aWVzPXt0aGlzLnByb3BzLnR2UGFyYWxsYXhQcm9wZXJ0aWVzfVxuICAgICAgICBoaXRTbG9wPXt0aGlzLnByb3BzLmhpdFNsb3B9XG4gICAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXI9e3RoaXMudG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXJ9XG4gICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0PXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdH1cbiAgICAgICAgb25SZXNwb25kZXJHcmFudD17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudH1cbiAgICAgICAgb25SZXNwb25kZXJNb3ZlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmV9XG4gICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlfVxuICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGV9PlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAge1RvdWNoYWJsZS5yZW5kZXJEZWJ1Z1ZpZXcoe2NvbG9yOiAnY3lhbicsIGhpdFNsb3A6IHRoaXMucHJvcHMuaGl0U2xvcH0pfVxuICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICk7XG4gIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUb3VjaGFibGVPcGFjaXR5O1xuIl19