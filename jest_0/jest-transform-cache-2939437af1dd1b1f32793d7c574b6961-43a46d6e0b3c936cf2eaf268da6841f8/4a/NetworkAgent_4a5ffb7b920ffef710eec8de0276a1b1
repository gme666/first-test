72f0b8a5d3649e1289cc2c7fdc1a979a











'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var InspectorAgent=require('InspectorAgent');
var JSInspector=require('JSInspector');
var Map=require('Map');
var XMLHttpRequest=require('XMLHttpRequest');var






























































































































Interceptor=function(){



function Interceptor(agent){_classCallCheck(this,Interceptor);
this._agent=agent;
this._requests=new Map();
}_createClass(Interceptor,[{key:'getData',value:function getData(

requestId){
return this._requests.get(requestId);
}},{key:'requestSent',value:function requestSent(


id,
url,
method,
headers){
var requestId=String(id);
this._requests.set(requestId,'');

var request={
url:url,
method:method,
headers:headers,
initialPriority:'Medium'};

var event={
requestId:requestId,
documentURL:'',
frameId:'1',
loaderId:'1',
request:request,
timestamp:JSInspector.getTimestamp(),
initiator:{



type:'other'},

type:'Other'};

this._agent.sendEvent('requestWillBeSent',event);
}},{key:'responseReceived',value:function responseReceived(


id,
url,
status,
headers){
var requestId=String(id);
var response={
url:url,
status:status,
statusText:String(status),
headers:headers,

requestHeaders:{},
mimeType:this._getMimeType(headers),
connectionReused:false,
connectionId:-1,
encodedDataLength:0,
securityState:'unknown'};


var event={
requestId:requestId,
frameId:'1',
loaderId:'1',
timestamp:JSInspector.getTimestamp(),
type:'Other',
response:response};

this._agent.sendEvent('responseReceived',event);
}},{key:'dataReceived',value:function dataReceived(


id,
data){
var requestId=String(id);
var existingData=this._requests.get(requestId)||'';
this._requests.set(requestId,existingData.concat(data));
var event={
requestId:requestId,
timestamp:JSInspector.getTimestamp(),
dataLength:data.length,
encodedDataLength:data.length};

this._agent.sendEvent('dataReceived',event);
}},{key:'loadingFinished',value:function loadingFinished(


id,
encodedDataLength){
var event={
requestId:String(id),
timestamp:JSInspector.getTimestamp(),
encodedDataLength:encodedDataLength};

this._agent.sendEvent('loadingFinished',event);
}},{key:'loadingFailed',value:function loadingFailed(


id,
error){
var event={
requestId:String(id),
timestamp:JSInspector.getTimestamp(),
type:'Other',
errorText:error};

this._agent.sendEvent('loadingFailed',event);
}},{key:'_getMimeType',value:function _getMimeType(

headers){
var contentType=headers['Content-Type']||'';
return contentType.split(';')[0];
}}]);return Interceptor;}();var







NetworkAgent=function(_InspectorAgent){_inherits(NetworkAgent,_InspectorAgent);function NetworkAgent(){_classCallCheck(this,NetworkAgent);return _possibleConstructorReturn(this,(NetworkAgent.__proto__||Object.getPrototypeOf(NetworkAgent)).apply(this,arguments));}_createClass(NetworkAgent,[{key:'enable',value:function enable(_ref)





{var maxResourceBufferSize=_ref.maxResourceBufferSize,maxTotalBufferSize=_ref.maxTotalBufferSize;
this._interceptor=new Interceptor(this);
XMLHttpRequest.setInterceptor(this._interceptor);
}},{key:'disable',value:function disable()

{
XMLHttpRequest.setInterceptor(null);
this._interceptor=null;
}},{key:'getResponseBody',value:function getResponseBody(_ref2)


{var requestId=_ref2.requestId;
return{body:this.interceptor().getData(requestId),base64Encoded:false};
}},{key:'interceptor',value:function interceptor()

{
if(this._interceptor){
return this._interceptor;
}else{
throw Error('_interceptor can not be null');
}

}}]);return NetworkAgent;}(InspectorAgent);NetworkAgent.DOMAIN='Network';


module.exports=NetworkAgent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5ldHdvcmtBZ2VudC5qcyJdLCJuYW1lcyI6WyJJbnNwZWN0b3JBZ2VudCIsInJlcXVpcmUiLCJKU0luc3BlY3RvciIsIk1hcCIsIlhNTEh0dHBSZXF1ZXN0IiwiSW50ZXJjZXB0b3IiLCJhZ2VudCIsIl9hZ2VudCIsIl9yZXF1ZXN0cyIsInJlcXVlc3RJZCIsImdldCIsImlkIiwidXJsIiwibWV0aG9kIiwiaGVhZGVycyIsIlN0cmluZyIsInNldCIsInJlcXVlc3QiLCJpbml0aWFsUHJpb3JpdHkiLCJldmVudCIsImRvY3VtZW50VVJMIiwiZnJhbWVJZCIsImxvYWRlcklkIiwidGltZXN0YW1wIiwiZ2V0VGltZXN0YW1wIiwiaW5pdGlhdG9yIiwidHlwZSIsInNlbmRFdmVudCIsInN0YXR1cyIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsInJlcXVlc3RIZWFkZXJzIiwibWltZVR5cGUiLCJfZ2V0TWltZVR5cGUiLCJjb25uZWN0aW9uUmV1c2VkIiwiY29ubmVjdGlvbklkIiwiZW5jb2RlZERhdGFMZW5ndGgiLCJzZWN1cml0eVN0YXRlIiwiZGF0YSIsImV4aXN0aW5nRGF0YSIsImNvbmNhdCIsImRhdGFMZW5ndGgiLCJsZW5ndGgiLCJlcnJvciIsImVycm9yVGV4dCIsImNvbnRlbnRUeXBlIiwic3BsaXQiLCJOZXR3b3JrQWdlbnQiLCJtYXhSZXNvdXJjZUJ1ZmZlclNpemUiLCJtYXhUb3RhbEJ1ZmZlclNpemUiLCJfaW50ZXJjZXB0b3IiLCJzZXRJbnRlcmNlcHRvciIsImJvZHkiLCJpbnRlcmNlcHRvciIsImdldERhdGEiLCJiYXNlNjRFbmNvZGVkIiwiRXJyb3IiLCJET01BSU4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVdBLGE7O0FBRUEsR0FBTUEsZ0JBQWlCQyxRQUFRLGdCQUFSLENBQXZCO0FBQ0EsR0FBTUMsYUFBY0QsUUFBUSxhQUFSLENBQXBCO0FBQ0EsR0FBTUUsS0FBTUYsUUFBUSxLQUFSLENBQVo7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TSw4QkFBTixDQUFOO0FBQ0Q7O0FBRUYsQywwQkE1QndCeEQsYyxFQUFyQitDLFksQ0FDR1UsTSxDQUFTLFM7OztBQThCbEJDLE9BQU9DLE9BQVAsQ0FBaUJaLFlBQWpCIiwiZmlsZSI6Ik5ldHdvcmtBZ2VudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgTmV0d29ya0FnZW50XG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEluc3BlY3RvckFnZW50ID0gcmVxdWlyZSgnSW5zcGVjdG9yQWdlbnQnKTtcbmNvbnN0IEpTSW5zcGVjdG9yID0gcmVxdWlyZSgnSlNJbnNwZWN0b3InKTtcbmNvbnN0IE1hcCA9IHJlcXVpcmUoJ01hcCcpO1xuY29uc3QgWE1MSHR0cFJlcXVlc3QgPSByZXF1aXJlKCdYTUxIdHRwUmVxdWVzdCcpO1xuXG5pbXBvcnQgdHlwZSBFdmVudFNlbmRlciBmcm9tICdJbnNwZWN0b3JBZ2VudCc7XG5cbnR5cGUgUmVxdWVzdElkID0gc3RyaW5nO1xuXG50eXBlIExvYWRlcklkID0gc3RyaW5nO1xudHlwZSBGcmFtZUlkID0gc3RyaW5nO1xudHlwZSBUaW1lc3RhbXAgPSBudW1iZXI7XG5cbnR5cGUgSGVhZGVycyA9IE9iamVjdDtcblxuLy8gV2UgZG9uJ3QgY3VycmVudGx5IGNhcmUgYWJvdXQgdGhpc1xudHlwZSBSZXNvdXJjZVRpbWluZyA9IG51bGw7XG5cbnR5cGUgUmVzb3VyY2VUeXBlID1cbiAgJ0RvY3VtZW50JyB8XG4gICdTdHlsZXNoZWV0JyB8XG4gICdJbWFnZScgfFxuICAnTWVkaWEnIHxcbiAgJ0ZvbnQnIHxcbiAgJ1NjcmlwdCcgfFxuICAnVGV4dFRyYWNrJyB8XG4gICdYSFInIHxcbiAgJ0ZldGNoJyB8XG4gICdFdmVudFNvdXJjZScgfFxuICAnV2ViU29ja2V0JyB8XG4gICdNYW5pZmVzdCcgfFxuICAnT3RoZXInO1xuXG50eXBlIFNlY3VyaXR5U3RhdGUgPVxuICAndW5rbm93bicgfFxuICAnbmV1dHJhbCcgfFxuICAnaW5zZWN1cmUnIHxcbiAgJ3dhcm5pbmcnIHxcbiAgJ3NlY3VyZScgfFxuICAnaW5mbyc7XG50eXBlIEJsb2NrZWRSZWFzb24gPVxuICAnY3NwJyB8XG4gICdtaXhlZC1jb250ZW50JyB8XG4gICdvcmlnaW4nIHxcbiAgJ2luc3BlY3RvcicgfFxuICAnc3VicmVzb3VyY2UtZmlsdGVyJyB8XG4gICdvdGhlcic7XG5cbnR5cGUgU3RhY2tUcmFjZSA9IG51bGw7XG5cbnR5cGUgSW5pdGlhdG9yID0ge1xuICB0eXBlOiAnc2NyaXB0JyB8ICdvdGhlcicsXG4gIHN0YWNrVHJhY2U/OiBTdGFja1RyYWNlLFxuICB1cmw/OiBzdHJpbmcsXG4gIGxpbmVOdW1iZXI/OiBudW1iZXJcbn1cblxudHlwZSBSZXNvdXJjZVByaW9yaXR5ID0gJ1ZlcnlMb3cnIHwgJ0xvdycgfCAnTWVkaXVtJyB8ICdIaWdoJyB8ICdWZXJ5SGlnaCc7XG5cbnR5cGUgUmVxdWVzdCA9IHtcbiAgdXJsOiBzdHJpbmcsXG4gIG1ldGhvZDogc3RyaW5nLFxuICBoZWFkZXJzOiBIZWFkZXJzLFxuICBwb3N0RGF0YT86IHN0cmluZyxcbiAgbWl4ZWRDb250ZW50VHlwZT86ICdibG9ja2FibGUnIHwgJ29wdGlvbmFsbHktYmxvY2thYmxlJyB8ICdub25lJyxcbiAgaW5pdGlhbFByaW9yaXR5OiBSZXNvdXJjZVByaW9yaXR5LFxufTtcblxudHlwZSBSZXNwb25zZSA9IHtcbiAgdXJsOiBzdHJpbmcsXG4gIHN0YXR1czogbnVtYmVyLFxuICBzdGF0dXNUZXh0OiBzdHJpbmcsXG4gIGhlYWRlcnM6IEhlYWRlcnMsXG4gIGhlYWRlcnNUZXh0Pzogc3RyaW5nLFxuICBtaW1lVHlwZTogc3RyaW5nLFxuICByZXF1ZXN0SGVhZGVycz86IEhlYWRlcnMsXG4gIHJlcXVlc3RIZWFkZXJzVGV4dD86IHN0cmluZyxcbiAgY29ubmVjdGlvblJldXNlZDogYm9vbGVhbixcbiAgY29ubmVjdGlvbklkOiBudW1iZXIsXG4gIGZyb21EaXNrQ2FjaGU/OiBib29sZWFuLFxuICBlbmNvZGVkRGF0YUxlbmd0aDogbnVtYmVyLFxuICB0aW1pbmc/OiBSZXNvdXJjZVRpbWluZyxcbiAgc2VjdXJpdHlTdGF0ZTogU2VjdXJpdHlTdGF0ZSxcbn07XG5cbnR5cGUgUmVxdWVzdFdpbGxCZVNlbnRFdmVudCA9IHtcbiAgcmVxdWVzdElkOiBSZXF1ZXN0SWQsXG4gIGZyYW1lSWQ6IEZyYW1lSWQsXG4gIGxvYWRlcklkOiBMb2FkZXJJZCxcbiAgZG9jdW1lbnRVUkw6IHN0cmluZyxcbiAgcmVxdWVzdDogUmVxdWVzdCxcbiAgdGltZXN0YW1wOiBUaW1lc3RhbXAsXG4gIGluaXRpYXRvcjogSW5pdGlhdG9yLFxuICByZWRpcmVjdFJlc3BvbnNlPzogUmVzcG9uc2UsXG4gIC8vIFRoaXMgaXMgc3VwcG9zZWQgdG8gYmUgb3B0aW9uYWwgYnV0IHRoZSBpbnNwZWN0b3IgY3Jhc2hlcyB3aXRob3V0IGl0LFxuICAvLyBzZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NjUzMTM4XG4gIHR5cGU6IFJlc291cmNlVHlwZSxcbn07XG5cbnR5cGUgUmVzcG9uc2VSZWNlaXZlZEV2ZW50ID0ge1xuICByZXF1ZXN0SWQ6IFJlcXVlc3RJZCxcbiAgZnJhbWVJZDogRnJhbWVJZCxcbiAgbG9hZGVySWQ6IExvYWRlcklkLFxuICB0aW1lc3RhbXA6IFRpbWVzdGFtcCxcbiAgdHlwZTogUmVzb3VyY2VUeXBlLFxuICByZXNwb25zZTogUmVzcG9uc2UsXG59O1xuXG50eXBlIERhdGFSZWNlaXZlZCA9IHtcbiAgcmVxdWVzdElkOiBSZXF1ZXN0SWQsXG4gIHRpbWVzdGFtcDogVGltZXN0YW1wLFxuICBkYXRhTGVuZ3RoOiBudW1iZXIsXG4gIGVuY29kZWREYXRhTGVuZ3RoOiBudW1iZXIsXG59O1xuXG50eXBlIExvYWRpbmdGaW5pc2hlZEV2ZW50ID0ge1xuICByZXF1ZXN0SWQ6IFJlcXVlc3RJZCxcbiAgdGltZXN0YW1wOiBUaW1lc3RhbXAsXG4gIGVuY29kZWREYXRhTGVuZ3RoOiBudW1iZXIsXG59O1xuXG50eXBlIExvYWRpbmdGYWlsZWRFdmVudCA9IHtcbiAgcmVxdWVzdElkOiBSZXF1ZXN0SWQsXG4gIHRpbWVzdGFtcDogVGltZXN0YW1wLFxuICB0eXBlOiBSZXNvdXJjZVR5cGUsXG4gIGVycm9yVGV4dDogc3RyaW5nLFxuICBjYW5jZWxlZD86IGJvb2xlYW4sXG4gIGJsb2NrZWRSZWFzb24/OiBCbG9ja2VkUmVhc29uLFxufTtcblxuY2xhc3MgSW50ZXJjZXB0b3Ige1xuICBfYWdlbnQ6IE5ldHdvcmtBZ2VudDtcbiAgX3JlcXVlc3RzOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuXG4gIGNvbnN0cnVjdG9yKGFnZW50OiBOZXR3b3JrQWdlbnQpIHtcbiAgICB0aGlzLl9hZ2VudCA9IGFnZW50O1xuICAgIHRoaXMuX3JlcXVlc3RzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgZ2V0RGF0YShyZXF1ZXN0SWQ6IHN0cmluZyk6ID9zdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0cy5nZXQocmVxdWVzdElkKTtcbiAgfVxuXG4gIHJlcXVlc3RTZW50KFxuICAgIGlkOiBudW1iZXIsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgaGVhZGVyczogT2JqZWN0KSB7XG4gICAgY29uc3QgcmVxdWVzdElkID0gU3RyaW5nKGlkKTtcbiAgICB0aGlzLl9yZXF1ZXN0cy5zZXQocmVxdWVzdElkLCAnJyk7XG5cbiAgICBjb25zdCByZXF1ZXN0OiBSZXF1ZXN0ID0ge1xuICAgICAgdXJsLFxuICAgICAgbWV0aG9kLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGluaXRpYWxQcmlvcml0eTogJ01lZGl1bScsXG4gICAgfTtcbiAgICBjb25zdCBldmVudDogUmVxdWVzdFdpbGxCZVNlbnRFdmVudCA9IHtcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIGRvY3VtZW50VVJMOiAnJyxcbiAgICAgIGZyYW1lSWQ6ICcxJyxcbiAgICAgIGxvYWRlcklkOiAnMScsXG4gICAgICByZXF1ZXN0LFxuICAgICAgdGltZXN0YW1wOiBKU0luc3BlY3Rvci5nZXRUaW1lc3RhbXAoKSxcbiAgICAgIGluaXRpYXRvcjoge1xuICAgICAgICAvLyBUT0RPKGJsb20pOiBHZXQgc3RhY2sgdHJhY2VcbiAgICAgICAgLy8gSWYgdHlwZSBpcyAnc2NyaXB0JyB0aGUgaW5zcGVjdG9yIHdpbGwgdHJ5IHRvIGV4ZWN1dGVcbiAgICAgICAgLy8gYHN0YWNrLmNhbGxGcmFtZXNbMF1gXG4gICAgICAgIHR5cGU6ICdvdGhlcicsXG4gICAgICB9LFxuICAgICAgdHlwZTogJ090aGVyJyxcbiAgICB9O1xuICAgIHRoaXMuX2FnZW50LnNlbmRFdmVudCgncmVxdWVzdFdpbGxCZVNlbnQnLCBldmVudCk7XG4gIH1cblxuICByZXNwb25zZVJlY2VpdmVkKFxuICAgIGlkOiBudW1iZXIsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgc3RhdHVzOiBudW1iZXIsXG4gICAgaGVhZGVyczogT2JqZWN0KSB7XG4gICAgY29uc3QgcmVxdWVzdElkID0gU3RyaW5nKGlkKTtcbiAgICBjb25zdCByZXNwb25zZTogUmVzcG9uc2UgPSB7XG4gICAgICB1cmwsXG4gICAgICBzdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiBTdHJpbmcoc3RhdHVzKSxcbiAgICAgIGhlYWRlcnMsXG4gICAgICAvLyBUT0RPKGJsb20pIHJlZmluZWQgaGVhZGVycywgY2FuIHdlIGdldCB0aGlzP1xuICAgICAgcmVxdWVzdEhlYWRlcnM6IHt9LFxuICAgICAgbWltZVR5cGU6IHRoaXMuX2dldE1pbWVUeXBlKGhlYWRlcnMpLFxuICAgICAgY29ubmVjdGlvblJldXNlZDogZmFsc2UsXG4gICAgICBjb25uZWN0aW9uSWQ6IC0xLFxuICAgICAgZW5jb2RlZERhdGFMZW5ndGg6IDAsXG4gICAgICBzZWN1cml0eVN0YXRlOiAndW5rbm93bicsXG4gICAgfTtcblxuICAgIGNvbnN0IGV2ZW50OiBSZXNwb25zZVJlY2VpdmVkRXZlbnQgPSB7XG4gICAgICByZXF1ZXN0SWQsXG4gICAgICBmcmFtZUlkOiAnMScsXG4gICAgICBsb2FkZXJJZDogJzEnLFxuICAgICAgdGltZXN0YW1wOiBKU0luc3BlY3Rvci5nZXRUaW1lc3RhbXAoKSxcbiAgICAgIHR5cGU6ICdPdGhlcicsXG4gICAgICByZXNwb25zZSxcbiAgICB9O1xuICAgIHRoaXMuX2FnZW50LnNlbmRFdmVudCgncmVzcG9uc2VSZWNlaXZlZCcsIGV2ZW50KTtcbiAgfVxuXG4gIGRhdGFSZWNlaXZlZChcbiAgICBpZDogbnVtYmVyLFxuICAgIGRhdGE6IHN0cmluZykge1xuICAgIGNvbnN0IHJlcXVlc3RJZCA9IFN0cmluZyhpZCk7XG4gICAgY29uc3QgZXhpc3RpbmdEYXRhID0gdGhpcy5fcmVxdWVzdHMuZ2V0KHJlcXVlc3RJZCkgfHwgJyc7XG4gICAgdGhpcy5fcmVxdWVzdHMuc2V0KHJlcXVlc3RJZCwgZXhpc3RpbmdEYXRhLmNvbmNhdChkYXRhKSk7XG4gICAgY29uc3QgZXZlbnQ6IERhdGFSZWNlaXZlZCA9IHtcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHRpbWVzdGFtcDogSlNJbnNwZWN0b3IuZ2V0VGltZXN0YW1wKCksXG4gICAgICBkYXRhTGVuZ3RoOiBkYXRhLmxlbmd0aCxcbiAgICAgIGVuY29kZWREYXRhTGVuZ3RoOiBkYXRhLmxlbmd0aCxcbiAgICB9O1xuICAgIHRoaXMuX2FnZW50LnNlbmRFdmVudCgnZGF0YVJlY2VpdmVkJywgZXZlbnQpO1xuICB9XG5cbiAgbG9hZGluZ0ZpbmlzaGVkKFxuICAgIGlkOiBudW1iZXIsXG4gICAgZW5jb2RlZERhdGFMZW5ndGg6IG51bWJlcikge1xuICAgIGNvbnN0IGV2ZW50OiBMb2FkaW5nRmluaXNoZWRFdmVudCA9IHtcbiAgICAgIHJlcXVlc3RJZDogU3RyaW5nKGlkKSxcbiAgICAgIHRpbWVzdGFtcDogSlNJbnNwZWN0b3IuZ2V0VGltZXN0YW1wKCksXG4gICAgICBlbmNvZGVkRGF0YUxlbmd0aDogZW5jb2RlZERhdGFMZW5ndGgsXG4gICAgfTtcbiAgICB0aGlzLl9hZ2VudC5zZW5kRXZlbnQoJ2xvYWRpbmdGaW5pc2hlZCcsIGV2ZW50KTtcbiAgfVxuXG4gIGxvYWRpbmdGYWlsZWQoXG4gICAgICBpZDogbnVtYmVyLFxuICAgICAgZXJyb3I6IHN0cmluZykge1xuICAgIGNvbnN0IGV2ZW50OiBMb2FkaW5nRmFpbGVkRXZlbnQgPSB7XG4gICAgICByZXF1ZXN0SWQ6IFN0cmluZyhpZCksXG4gICAgICB0aW1lc3RhbXA6IEpTSW5zcGVjdG9yLmdldFRpbWVzdGFtcCgpLFxuICAgICAgdHlwZTogJ090aGVyJyxcbiAgICAgIGVycm9yVGV4dDogZXJyb3IsXG4gICAgfTtcbiAgICB0aGlzLl9hZ2VudC5zZW5kRXZlbnQoJ2xvYWRpbmdGYWlsZWQnLCBldmVudCk7XG4gIH1cblxuICBfZ2V0TWltZVR5cGUoaGVhZGVyczogT2JqZWN0KTogc3RyaW5nIHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddIHx8ICcnO1xuICAgIHJldHVybiBjb250ZW50VHlwZS5zcGxpdCgnOycpWzBdO1xuICB9XG59XG5cbnR5cGUgRW5hYmxlQXJncyA9IHtcbiAgbWF4UmVzb3VyY2VCdWZmZXJTaXplPzogbnVtYmVyLFxuICBtYXhUb3RhbEJ1ZmZlclNpemU/OiBudW1iZXJcbn07XG5cbmNsYXNzIE5ldHdvcmtBZ2VudCBleHRlbmRzIEluc3BlY3RvckFnZW50IHtcbiAgc3RhdGljIERPTUFJTiA9ICdOZXR3b3JrJztcblxuICBfc2VuZEV2ZW50OiBFdmVudFNlbmRlcjtcbiAgX2ludGVyY2VwdG9yOiA/SW50ZXJjZXB0b3I7XG5cbiAgZW5hYmxlKHsgbWF4UmVzb3VyY2VCdWZmZXJTaXplLCBtYXhUb3RhbEJ1ZmZlclNpemUgfTogRW5hYmxlQXJncykge1xuICAgIHRoaXMuX2ludGVyY2VwdG9yID0gbmV3IEludGVyY2VwdG9yKHRoaXMpO1xuICAgIFhNTEh0dHBSZXF1ZXN0LnNldEludGVyY2VwdG9yKHRoaXMuX2ludGVyY2VwdG9yKTtcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgWE1MSHR0cFJlcXVlc3Quc2V0SW50ZXJjZXB0b3IobnVsbCk7XG4gICAgdGhpcy5faW50ZXJjZXB0b3IgPSBudWxsO1xuICB9XG5cbiAgZ2V0UmVzcG9uc2VCb2R5KHtyZXF1ZXN0SWR9OiB7cmVxdWVzdElkOiBSZXF1ZXN0SWR9KVxuICAgICAgOiB7Ym9keTogP3N0cmluZywgYmFzZTY0RW5jb2RlZDogYm9vbGVhbn0ge1xuICAgIHJldHVybiB7Ym9keTogdGhpcy5pbnRlcmNlcHRvcigpLmdldERhdGEocmVxdWVzdElkKSwgYmFzZTY0RW5jb2RlZDogZmFsc2V9O1xuICB9XG5cbiAgaW50ZXJjZXB0b3IoKTogSW50ZXJjZXB0b3Ige1xuICAgIGlmICh0aGlzLl9pbnRlcmNlcHRvcikge1xuICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignX2ludGVyY2VwdG9yIGNhbiBub3QgYmUgbnVsbCcpO1xuICAgIH1cblxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTmV0d29ya0FnZW50O1xuIl19