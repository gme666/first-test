1bcb05dc254cde972f407b929a05bf17
Object.defineProperty(exports,"__esModule",{value:true});exports.employeesFetch=exports.employeeCreate=exports.employeeUpdate=undefined;var _firebase=require('firebase');var _firebase2=_interopRequireDefault(_firebase);
var _reactNativeRouterFlux=require('react-native-router-flux');
var _types=require('./types');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}





var employeeUpdate=exports.employeeUpdate=function employeeUpdate(_ref){var prop=_ref.prop,value=_ref.value;
return{
type:_types.EMPLOYEE_UPDATE,
payload:{prop:prop,value:value}};

};

var employeeCreate=exports.employeeCreate=function employeeCreate(_ref2){var name=_ref2.name,phone=_ref2.phone,shift=_ref2.shift;var _firebase$auth=
_firebase2.default.auth(),currentUser=_firebase$auth.currentUser;

return function(dispatch){
_firebase2.default.database().ref('/users/'+currentUser.uid+'/employees').
push({name:name,phone:phone,shift:shift}).
then(function(){
dispatch({type:_types.EMPLOYEE_CREATE});
_reactNativeRouterFlux.Actions.employeeList({type:'reset'});
});
};
};

var employeesFetch=exports.employeesFetch=function employeesFetch(){var _firebase$auth2=
_firebase2.default.auth(),currentUser=_firebase$auth2.currentUser;

return function(dispatch){
_firebase2.default.database().ref('/users/'+currentUser.uid+'/employees').
on('value',function(snapshot){
dispatch({type:_types.EMPLOYEES_FETCH_SUCCESS,payload:snapshot.val()});
});
};
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVtcGxveWVlQWN0aW9ucy5qcyJdLCJuYW1lcyI6WyJlbXBsb3llZVVwZGF0ZSIsInByb3AiLCJ2YWx1ZSIsInR5cGUiLCJwYXlsb2FkIiwiZW1wbG95ZWVDcmVhdGUiLCJuYW1lIiwicGhvbmUiLCJzaGlmdCIsImF1dGgiLCJjdXJyZW50VXNlciIsImRpc3BhdGNoIiwiZGF0YWJhc2UiLCJyZWYiLCJ1aWQiLCJwdXNoIiwidGhlbiIsImVtcGxveWVlTGlzdCIsImVtcGxveWVlc0ZldGNoIiwib24iLCJzbmFwc2hvdCIsInZhbCJdLCJtYXBwaW5ncyI6IndJQUFBLGtDO0FBQ0E7QUFDQSw4Qjs7Ozs7O0FBTU8sR0FBTUEsdUNBQWlCLFFBQWpCQSxlQUFpQixNQUFxQixJQUFsQkMsS0FBa0IsTUFBbEJBLElBQWtCLENBQVpDLEtBQVksTUFBWkEsS0FBWTtBQUNqRCxNQUFPO0FBQ0xDLDJCQURLO0FBRUxDLFFBQVMsQ0FBRUgsU0FBRixDQUFRQyxXQUFSLENBRkosQ0FBUDs7QUFJRCxDQUxNOztBQU9BLEdBQU1HLHVDQUFpQixRQUFqQkEsZUFBaUIsT0FBNEIsSUFBekJDLEtBQXlCLE9BQXpCQSxJQUF5QixDQUFuQkMsS0FBbUIsT0FBbkJBLEtBQW1CLENBQVpDLEtBQVksT0FBWkEsS0FBWTtBQUNoQyxtQkFBU0MsSUFBVCxFQURnQyxDQUNoREMsV0FEZ0QsZ0JBQ2hEQSxXQURnRDs7QUFHeEQsTUFBTyxVQUFDQyxRQUFELENBQWM7QUFDbkIsbUJBQVNDLFFBQVQsR0FBb0JDLEdBQXBCLFdBQWtDSCxZQUFZSSxHQUE5QztBQUNHQyxJQURILENBQ1EsQ0FBRVQsU0FBRixDQUFRQyxXQUFSLENBQWVDLFdBQWYsQ0FEUjtBQUVHUSxJQUZILENBRVEsVUFBTTtBQUNWTCxTQUFTLENBQUVSLDJCQUFGLENBQVQ7QUFDQSwrQkFBUWMsWUFBUixDQUFxQixDQUFFZCxLQUFNLE9BQVIsQ0FBckI7QUFDRCxDQUxIO0FBTUQsQ0FQRDtBQVFELENBWE07O0FBYUEsR0FBTWUsdUNBQWlCLFFBQWpCQSxlQUFpQixFQUFNO0FBQ1YsbUJBQVNULElBQVQsRUFEVSxDQUMxQkMsV0FEMEIsaUJBQzFCQSxXQUQwQjs7QUFHbEMsTUFBTyxVQUFDQyxRQUFELENBQWM7QUFDbkIsbUJBQVNDLFFBQVQsR0FBb0JDLEdBQXBCLFdBQWtDSCxZQUFZSSxHQUE5QztBQUNHSyxFQURILENBQ00sT0FETixDQUNlLGtCQUFZO0FBQ3ZCUixTQUFTLENBQUVSLG1DQUFGLENBQWlDQyxRQUFTZ0IsU0FBU0MsR0FBVCxFQUExQyxDQUFUO0FBQ0QsQ0FISDtBQUlELENBTEQ7QUFNRCxDQVRNIiwiZmlsZSI6IkVtcGxveWVlQWN0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XG5pbXBvcnQgeyBBY3Rpb25zIH0gZnJvbSAncmVhY3QtbmF0aXZlLXJvdXRlci1mbHV4JztcbmltcG9ydCB7XG4gIEVNUExPWUVFX1VQREFURSxcbiAgRU1QTE9ZRUVfQ1JFQVRFLFxuICBFTVBMT1lFRVNfRkVUQ0hfU1VDQ0VTU1xufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGVtcGxveWVlVXBkYXRlID0gKHsgcHJvcCwgdmFsdWUgfSkgPT4ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IEVNUExPWUVFX1VQREFURSxcbiAgICBwYXlsb2FkOiB7IHByb3AsIHZhbHVlIH1cbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbXBsb3llZUNyZWF0ZSA9ICh7IG5hbWUsIHBob25lLCBzaGlmdCB9KSA9PiB7XG4gIGNvbnN0IHsgY3VycmVudFVzZXIgfSA9IGZpcmViYXNlLmF1dGgoKTtcblxuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoYC91c2Vycy8ke2N1cnJlbnRVc2VyLnVpZH0vZW1wbG95ZWVzYClcbiAgICAgIC5wdXNoKHsgbmFtZSwgcGhvbmUsIHNoaWZ0IH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogRU1QTE9ZRUVfQ1JFQVRFIH0pO1xuICAgICAgICBBY3Rpb25zLmVtcGxveWVlTGlzdCh7IHR5cGU6ICdyZXNldCcgfSk7XG4gICAgICB9KTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbXBsb3llZXNGZXRjaCA9ICgpID0+IHtcbiAgY29uc3QgeyBjdXJyZW50VXNlciB9ID0gZmlyZWJhc2UuYXV0aCgpO1xuXG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihgL3VzZXJzLyR7Y3VycmVudFVzZXIudWlkfS9lbXBsb3llZXNgKVxuICAgICAgLm9uKCd2YWx1ZScsIHNuYXBzaG90ID0+IHtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBFTVBMT1lFRVNfRkVUQ0hfU1VDQ0VTUywgcGF5bG9hZDogc25hcHNob3QudmFsKCkgfSk7XG4gICAgICB9KTtcbiAgfTtcbn07XG4iXX0=