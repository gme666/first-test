a309a98fa230c8ef2cde7eef0f6f2b67











'use strict';

var NativeAnimatedModule=require('NativeModules').NativeAnimatedModule;
var NativeEventEmitter=require('NativeEventEmitter');

var invariant=require('fbjs/lib/invariant');

var __nativeAnimatedNodeTagCount=1;
var __nativeAnimationIdCount=1;








var nativeEventEmitter=void 0;





var API={
createAnimatedNode:function createAnimatedNode(tag,config){
assertNativeAnimatedModule();
NativeAnimatedModule.createAnimatedNode(tag,config);
},
startListeningToAnimatedNodeValue:function startListeningToAnimatedNodeValue(tag){
assertNativeAnimatedModule();
NativeAnimatedModule.startListeningToAnimatedNodeValue(tag);
},
stopListeningToAnimatedNodeValue:function stopListeningToAnimatedNodeValue(tag){
assertNativeAnimatedModule();
NativeAnimatedModule.stopListeningToAnimatedNodeValue(tag);
},
connectAnimatedNodes:function connectAnimatedNodes(parentTag,childTag){
assertNativeAnimatedModule();
NativeAnimatedModule.connectAnimatedNodes(parentTag,childTag);
},
disconnectAnimatedNodes:function disconnectAnimatedNodes(parentTag,childTag){
assertNativeAnimatedModule();
NativeAnimatedModule.disconnectAnimatedNodes(parentTag,childTag);
},
startAnimatingNode:function startAnimatingNode(animationId,nodeTag,config,endCallback){
assertNativeAnimatedModule();
NativeAnimatedModule.startAnimatingNode(animationId,nodeTag,config,endCallback);
},
stopAnimation:function stopAnimation(animationId){
assertNativeAnimatedModule();
NativeAnimatedModule.stopAnimation(animationId);
},
setAnimatedNodeValue:function setAnimatedNodeValue(nodeTag,value){
assertNativeAnimatedModule();
NativeAnimatedModule.setAnimatedNodeValue(nodeTag,value);
},
setAnimatedNodeOffset:function setAnimatedNodeOffset(nodeTag,offset){
assertNativeAnimatedModule();
NativeAnimatedModule.setAnimatedNodeOffset(nodeTag,offset);
},
flattenAnimatedNodeOffset:function flattenAnimatedNodeOffset(nodeTag){
assertNativeAnimatedModule();
NativeAnimatedModule.flattenAnimatedNodeOffset(nodeTag);
},
extractAnimatedNodeOffset:function extractAnimatedNodeOffset(nodeTag){
assertNativeAnimatedModule();
NativeAnimatedModule.extractAnimatedNodeOffset(nodeTag);
},
connectAnimatedNodeToView:function connectAnimatedNodeToView(nodeTag,viewTag){
assertNativeAnimatedModule();
NativeAnimatedModule.connectAnimatedNodeToView(nodeTag,viewTag);
},
disconnectAnimatedNodeFromView:function disconnectAnimatedNodeFromView(nodeTag,viewTag){
assertNativeAnimatedModule();
NativeAnimatedModule.disconnectAnimatedNodeFromView(nodeTag,viewTag);
},
dropAnimatedNode:function dropAnimatedNode(tag){
assertNativeAnimatedModule();
NativeAnimatedModule.dropAnimatedNode(tag);
},
addAnimatedEventToView:function addAnimatedEventToView(viewTag,eventName,eventMapping){
assertNativeAnimatedModule();
NativeAnimatedModule.addAnimatedEventToView(viewTag,eventName,eventMapping);
},
removeAnimatedEventFromView:function removeAnimatedEventFromView(viewTag,eventName,animatedNodeTag){
assertNativeAnimatedModule();
NativeAnimatedModule.removeAnimatedEventFromView(viewTag,eventName,animatedNodeTag);
}};








var STYLES_WHITELIST={
opacity:true,
transform:true,

scaleX:true,
scaleY:true,
translateX:true,
translateY:true};


var TRANSFORM_WHITELIST={
translateX:true,
translateY:true,
scale:true,
scaleX:true,
scaleY:true,
rotate:true,
rotateX:true,
rotateY:true,
perspective:true};


function validateTransform(configs){
configs.forEach(function(config){
if(!TRANSFORM_WHITELIST.hasOwnProperty(config.property)){
throw new Error('Property \''+config.property+'\' is not supported by native animated module');
}
});
}

function validateStyles(styles){
for(var key in styles){
if(!STYLES_WHITELIST.hasOwnProperty(key)){
throw new Error('Style property \''+key+'\' is not supported by native animated module');
}
}
}

function validateInterpolation(config){
var SUPPORTED_INTERPOLATION_PARAMS={
inputRange:true,
outputRange:true,
extrapolate:true,
extrapolateRight:true,
extrapolateLeft:true};

for(var key in config){
if(!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(key)){
throw new Error('Interpolation property \''+key+'\' is not supported by native animated module');
}
}
}

function generateNewNodeTag(){
return __nativeAnimatedNodeTagCount++;
}

function generateNewAnimationId(){
return __nativeAnimationIdCount++;
}

function assertNativeAnimatedModule(){
invariant(NativeAnimatedModule,'Native animated module is not available');
}

function isNativeAnimatedAvailable(){
return!!NativeAnimatedModule;
}

module.exports={
API:API,
validateStyles:validateStyles,
validateTransform:validateTransform,
validateInterpolation:validateInterpolation,
generateNewNodeTag:generateNewNodeTag,
generateNewAnimationId:generateNewAnimationId,
assertNativeAnimatedModule:assertNativeAnimatedModule,
isNativeAnimatedAvailable:isNativeAnimatedAvailable,
get nativeEventEmitter(){
if(!nativeEventEmitter){
nativeEventEmitter=new NativeEventEmitter(NativeAnimatedModule);
}
return nativeEventEmitter;
}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdGl2ZUFuaW1hdGVkSGVscGVyLmpzIl0sIm5hbWVzIjpbIk5hdGl2ZUFuaW1hdGVkTW9kdWxlIiwicmVxdWlyZSIsIk5hdGl2ZUV2ZW50RW1pdHRlciIsImludmFyaWFudCIsIl9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQiLCJfX25hdGl2ZUFuaW1hdGlvbklkQ291bnQiLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJBUEkiLCJjcmVhdGVBbmltYXRlZE5vZGUiLCJ0YWciLCJjb25maWciLCJhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSIsInN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSIsInN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlIiwiY29ubmVjdEFuaW1hdGVkTm9kZXMiLCJwYXJlbnRUYWciLCJjaGlsZFRhZyIsImRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzIiwic3RhcnRBbmltYXRpbmdOb2RlIiwiYW5pbWF0aW9uSWQiLCJub2RlVGFnIiwiZW5kQ2FsbGJhY2siLCJzdG9wQW5pbWF0aW9uIiwic2V0QW5pbWF0ZWROb2RlVmFsdWUiLCJ2YWx1ZSIsInNldEFuaW1hdGVkTm9kZU9mZnNldCIsIm9mZnNldCIsImZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQiLCJleHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0IiwiY29ubmVjdEFuaW1hdGVkTm9kZVRvVmlldyIsInZpZXdUYWciLCJkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXciLCJkcm9wQW5pbWF0ZWROb2RlIiwiYWRkQW5pbWF0ZWRFdmVudFRvVmlldyIsImV2ZW50TmFtZSIsImV2ZW50TWFwcGluZyIsInJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyIsImFuaW1hdGVkTm9kZVRhZyIsIlNUWUxFU19XSElURUxJU1QiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwic2NhbGVYIiwic2NhbGVZIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJUUkFOU0ZPUk1fV0hJVEVMSVNUIiwic2NhbGUiLCJyb3RhdGUiLCJyb3RhdGVYIiwicm90YXRlWSIsInBlcnNwZWN0aXZlIiwidmFsaWRhdGVUcmFuc2Zvcm0iLCJjb25maWdzIiwiZm9yRWFjaCIsImhhc093blByb3BlcnR5IiwicHJvcGVydHkiLCJFcnJvciIsInZhbGlkYXRlU3R5bGVzIiwic3R5bGVzIiwia2V5IiwidmFsaWRhdGVJbnRlcnBvbGF0aW9uIiwiU1VQUE9SVEVEX0lOVEVSUE9MQVRJT05fUEFSQU1TIiwiaW5wdXRSYW5nZSIsIm91dHB1dFJhbmdlIiwiZXh0cmFwb2xhdGUiLCJleHRyYXBvbGF0ZVJpZ2h0IiwiZXh0cmFwb2xhdGVMZWZ0IiwiZ2VuZXJhdGVOZXdOb2RlVGFnIiwiZ2VuZXJhdGVOZXdBbmltYXRpb25JZCIsImlzTmF0aXZlQW5pbWF0ZWRBdmFpbGFibGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVdBOztBQUVBLEdBQU1BLHNCQUF1QkMsUUFBUSxlQUFSLEVBQXlCRCxvQkFBdEQ7QUFDQSxHQUFNRSxvQkFBcUJELFFBQVEsb0JBQVIsQ0FBM0I7O0FBRUEsR0FBTUUsV0FBWUYsUUFBUSxvQkFBUixDQUFsQjs7QUFFQSxHQUFJRyw4QkFBK0IsQ0FBbkM7QUFDQSxHQUFJQywwQkFBMkIsQ0FBL0I7Ozs7Ozs7OztBQVNBLEdBQUlDLDBCQUFKOzs7Ozs7QUFNQSxHQUFNQyxLQUFNO0FBQ1ZDLG1CQUFvQiw0QkFBU0MsR0FBVCxDQUF1QkMsTUFBdkIsQ0FBNkM7QUFDL0RDO0FBQ0FYLHFCQUFxQlEsa0JBQXJCLENBQXdDQyxHQUF4QyxDQUE2Q0MsTUFBN0M7QUFDRCxDQUpTO0FBS1ZFLGtDQUFtQywyQ0FBU0gsR0FBVCxDQUF1QjtBQUN4REU7QUFDQVgscUJBQXFCWSxpQ0FBckIsQ0FBdURILEdBQXZEO0FBQ0QsQ0FSUztBQVNWSSxpQ0FBa0MsMENBQVNKLEdBQVQsQ0FBdUI7QUFDdkRFO0FBQ0FYLHFCQUFxQmEsZ0NBQXJCLENBQXNESixHQUF0RDtB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QUFDLENBQUNyRSxvQkFBVDtBQUNEOztBQUVEc0UsT0FBT0MsT0FBUCxDQUFpQjtBQUNmaEUsT0FEZTtBQUVma0QsNkJBRmU7QUFHZk4sbUNBSGU7QUFJZlMsMkNBSmU7QUFLZk8scUNBTGU7QUFNZkMsNkNBTmU7QUFPZnpELHFEQVBlO0FBUWYwRCxtREFSZTtBQVNmLEdBQUkvRCxtQkFBSixFQUF5QjtBQUN2QixHQUFJLENBQUNBLGtCQUFMLENBQXlCO0FBQ3ZCQSxtQkFBcUIsR0FBSUosbUJBQUosQ0FBdUJGLG9CQUF2QixDQUFyQjtBQUNEO0FBQ0QsTUFBT00sbUJBQVA7QUFDRCxDQWRjLENBQWpCIiwiZmlsZSI6Ik5hdGl2ZUFuaW1hdGVkSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBOYXRpdmVBbmltYXRlZEhlbHBlclxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBOYXRpdmVBbmltYXRlZE1vZHVsZSA9IHJlcXVpcmUoJ05hdGl2ZU1vZHVsZXMnKS5OYXRpdmVBbmltYXRlZE1vZHVsZTtcbmNvbnN0IE5hdGl2ZUV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ05hdGl2ZUV2ZW50RW1pdHRlcicpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxubGV0IF9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQgPSAxOyAvKiB1c2VkIGZvciBhbmltYXRlZCBub2RlcyAqL1xubGV0IF9fbmF0aXZlQW5pbWF0aW9uSWRDb3VudCA9IDE7IC8qIHVzZWQgZm9yIHN0YXJ0ZWQgYW5pbWF0aW9ucyAqL1xuXG50eXBlIEVuZFJlc3VsdCA9IHtmaW5pc2hlZDogYm9vbGVhbn07XG50eXBlIEVuZENhbGxiYWNrID0gKHJlc3VsdDogRW5kUmVzdWx0KSA9PiB2b2lkO1xudHlwZSBFdmVudE1hcHBpbmcgPSB7XG4gIG5hdGl2ZUV2ZW50UGF0aDogQXJyYXk8c3RyaW5nPixcbiAgYW5pbWF0ZWRWYWx1ZVRhZzogP251bWJlcixcbn07XG5cbmxldCBuYXRpdmVFdmVudEVtaXR0ZXI7XG5cbi8qKlxuICogU2ltcGxlIHdyYXBwZXJzIGFyb3VuZCBOYXRpdmVBbmltYXRlZE1vZHVsZSB0byBwcm92aWRlIGZsb3cgYW5kIGF1dG9jbXBsZXRlIHN1cHBvcnQgZm9yXG4gKiB0aGUgbmF0aXZlIG1vZHVsZSBtZXRob2RzXG4gKi9cbmNvbnN0IEFQSSA9IHtcbiAgY3JlYXRlQW5pbWF0ZWROb2RlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIsIGNvbmZpZzogT2JqZWN0KTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jcmVhdGVBbmltYXRlZE5vZGUodGFnLCBjb25maWcpO1xuICB9LFxuICBzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWU6IGZ1bmN0aW9uKHRhZzogP251bWJlcikge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gIH0sXG4gIHN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIpIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVzOiBmdW5jdGlvbihwYXJlbnRUYWc6ID9udW1iZXIsIGNoaWxkVGFnOiA/bnVtYmVyKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWcsIGNoaWxkVGFnKTtcbiAgfSxcbiAgZGlzY29ubmVjdEFuaW1hdGVkTm9kZXM6IGZ1bmN0aW9uKHBhcmVudFRhZzogP251bWJlciwgY2hpbGRUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzKHBhcmVudFRhZywgY2hpbGRUYWcpO1xuICB9LFxuICBzdGFydEFuaW1hdGluZ05vZGU6IGZ1bmN0aW9uKGFuaW1hdGlvbklkOiA/bnVtYmVyLCBub2RlVGFnOiA/bnVtYmVyLCBjb25maWc6IE9iamVjdCwgZW5kQ2FsbGJhY2s6IEVuZENhbGxiYWNrKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5zdGFydEFuaW1hdGluZ05vZGUoYW5pbWF0aW9uSWQsIG5vZGVUYWcsIGNvbmZpZywgZW5kQ2FsbGJhY2spO1xuICB9LFxuICBzdG9wQW5pbWF0aW9uOiBmdW5jdGlvbihhbmltYXRpb25JZDogP251bWJlcikge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RvcEFuaW1hdGlvbihhbmltYXRpb25JZCk7XG4gIH0sXG4gIHNldEFuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbihub2RlVGFnOiA/bnVtYmVyLCB2YWx1ZTogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc2V0QW5pbWF0ZWROb2RlVmFsdWUobm9kZVRhZywgdmFsdWUpO1xuICB9LFxuICBzZXRBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIsIG9mZnNldDogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcsIG9mZnNldCk7XG4gIH0sXG4gIGZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gIH0sXG4gIGV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXc6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIsIHZpZXdUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXcobm9kZVRhZywgdmlld1RhZyk7XG4gIH0sXG4gIGRpc2Nvbm5lY3RBbmltYXRlZE5vZGVGcm9tVmlldzogZnVuY3Rpb24obm9kZVRhZzogP251bWJlciwgdmlld1RhZzogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZGlzY29ubmVjdEFuaW1hdGVkTm9kZUZyb21WaWV3KG5vZGVUYWcsIHZpZXdUYWcpO1xuICB9LFxuICBkcm9wQW5pbWF0ZWROb2RlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmRyb3BBbmltYXRlZE5vZGUodGFnKTtcbiAgfSxcbiAgYWRkQW5pbWF0ZWRFdmVudFRvVmlldzogZnVuY3Rpb24odmlld1RhZzogP251bWJlciwgZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50TWFwcGluZzogRXZlbnRNYXBwaW5nKSB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5hZGRBbmltYXRlZEV2ZW50VG9WaWV3KHZpZXdUYWcsIGV2ZW50TmFtZSwgZXZlbnRNYXBwaW5nKTtcbiAgfSxcbiAgcmVtb3ZlQW5pbWF0ZWRFdmVudEZyb21WaWV3KHZpZXdUYWc6ID9udW1iZXIsIGV2ZW50TmFtZTogc3RyaW5nLCBhbmltYXRlZE5vZGVUYWc6ID9udW1iZXIpIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyh2aWV3VGFnLCBldmVudE5hbWUsIGFuaW1hdGVkTm9kZVRhZyk7XG4gIH1cbn07XG5cbi8qKlxuICogU3R5bGVzIGFsbG93ZWQgYnkgdGhlIG5hdGl2ZSBhbmltYXRlZCBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBJbiBnZW5lcmFsIG5hdGl2ZSBhbmltYXRlZCBpbXBsZW1lbnRhdGlvbiBzaG91bGQgc3VwcG9ydCBhbnkgbnVtZXJpYyBwcm9wZXJ0eSB0aGF0IGRvZXNuJ3QgbmVlZFxuICogdG8gYmUgdXBkYXRlZCB0aHJvdWdoIHRoZSBzaGFkb3cgdmlldyBoaWVyYXJjaHkgKGFsbCBub24tbGF5b3V0IHByb3BlcnRpZXMpLlxuICovXG5jb25zdCBTVFlMRVNfV0hJVEVMSVNUID0ge1xuICBvcGFjaXR5OiB0cnVlLFxuICB0cmFuc2Zvcm06IHRydWUsXG4gIC8qIGxlZ2FjeSBhbmRyb2lkIHRyYW5zZm9ybSBwcm9wZXJ0aWVzICovXG4gIHNjYWxlWDogdHJ1ZSxcbiAgc2NhbGVZOiB0cnVlLFxuICB0cmFuc2xhdGVYOiB0cnVlLFxuICB0cmFuc2xhdGVZOiB0cnVlLFxufTtcblxuY29uc3QgVFJBTlNGT1JNX1dISVRFTElTVCA9IHtcbiAgdHJhbnNsYXRlWDogdHJ1ZSxcbiAgdHJhbnNsYXRlWTogdHJ1ZSxcbiAgc2NhbGU6IHRydWUsXG4gIHNjYWxlWDogdHJ1ZSxcbiAgc2NhbGVZOiB0cnVlLFxuICByb3RhdGU6IHRydWUsXG4gIHJvdGF0ZVg6IHRydWUsXG4gIHJvdGF0ZVk6IHRydWUsXG4gIHBlcnNwZWN0aXZlOiB0cnVlLFxufTtcblxuZnVuY3Rpb24gdmFsaWRhdGVUcmFuc2Zvcm0oY29uZmlnczogQXJyYXk8T2JqZWN0Pik6IHZvaWQge1xuICBjb25maWdzLmZvckVhY2goKGNvbmZpZykgPT4ge1xuICAgIGlmICghVFJBTlNGT1JNX1dISVRFTElTVC5oYXNPd25Qcm9wZXJ0eShjb25maWcucHJvcGVydHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb3BlcnR5ICcke2NvbmZpZy5wcm9wZXJ0eX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWApO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3R5bGVzKHN0eWxlczogT2JqZWN0KTogdm9pZCB7XG4gIGZvciAodmFyIGtleSBpbiBzdHlsZXMpIHtcbiAgICBpZiAoIVNUWUxFU19XSElURUxJU1QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdHlsZSBwcm9wZXJ0eSAnJHtrZXl9JyBpcyBub3Qgc3VwcG9ydGVkIGJ5IG5hdGl2ZSBhbmltYXRlZCBtb2R1bGVgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVJbnRlcnBvbGF0aW9uKGNvbmZpZzogT2JqZWN0KTogdm9pZCB7XG4gIHZhciBTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMgPSB7XG4gICAgaW5wdXRSYW5nZTogdHJ1ZSxcbiAgICBvdXRwdXRSYW5nZTogdHJ1ZSxcbiAgICBleHRyYXBvbGF0ZTogdHJ1ZSxcbiAgICBleHRyYXBvbGF0ZVJpZ2h0OiB0cnVlLFxuICAgIGV4dHJhcG9sYXRlTGVmdDogdHJ1ZSxcbiAgfTtcbiAgZm9yICh2YXIga2V5IGluIGNvbmZpZykge1xuICAgIGlmICghU1VQUE9SVEVEX0lOVEVSUE9MQVRJT05fUEFSQU1TLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJwb2xhdGlvbiBwcm9wZXJ0eSAnJHtrZXl9JyBpcyBub3Qgc3VwcG9ydGVkIGJ5IG5hdGl2ZSBhbmltYXRlZCBtb2R1bGVgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVOZXdOb2RlVGFnKCk6IG51bWJlciB7XG4gIHJldHVybiBfX25hdGl2ZUFuaW1hdGVkTm9kZVRhZ0NvdW50Kys7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTmV3QW5pbWF0aW9uSWQoKTogbnVtYmVyIHtcbiAgcmV0dXJuIF9fbmF0aXZlQW5pbWF0aW9uSWRDb3VudCsrO1xufVxuXG5mdW5jdGlvbiBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpOiB2b2lkIHtcbiAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG59XG5cbmZ1bmN0aW9uIGlzTmF0aXZlQW5pbWF0ZWRBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIU5hdGl2ZUFuaW1hdGVkTW9kdWxlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQVBJLFxuICB2YWxpZGF0ZVN0eWxlcyxcbiAgdmFsaWRhdGVUcmFuc2Zvcm0sXG4gIHZhbGlkYXRlSW50ZXJwb2xhdGlvbixcbiAgZ2VuZXJhdGVOZXdOb2RlVGFnLFxuICBnZW5lcmF0ZU5ld0FuaW1hdGlvbklkLFxuICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSxcbiAgaXNOYXRpdmVBbmltYXRlZEF2YWlsYWJsZSxcbiAgZ2V0IG5hdGl2ZUV2ZW50RW1pdHRlcigpIHtcbiAgICBpZiAoIW5hdGl2ZUV2ZW50RW1pdHRlcikge1xuICAgICAgbmF0aXZlRXZlbnRFbWl0dGVyID0gbmV3IE5hdGl2ZUV2ZW50RW1pdHRlcihOYXRpdmVBbmltYXRlZE1vZHVsZSk7XG4gICAgfVxuICAgIHJldHVybiBuYXRpdmVFdmVudEVtaXR0ZXI7XG4gIH0sXG59O1xuIl19