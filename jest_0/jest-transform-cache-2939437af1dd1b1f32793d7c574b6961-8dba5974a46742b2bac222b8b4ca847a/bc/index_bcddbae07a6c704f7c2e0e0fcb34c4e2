19d7532c987f246655e7b6c8060797ca
Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);
var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);

var _reactNative=require('react-native');





var _style=require('../../../style');var defaultStyle=_interopRequireWildcard(_style);
var _style2=require('./style');var _style3=_interopRequireDefault(_style2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var

Day=function(_Component){_inherits(Day,_Component);














function Day(props){_classCallCheck(this,Day);var _this=_possibleConstructorReturn(this,(Day.__proto__||Object.getPrototypeOf(Day)).call(this,
props));
_this.theme=_extends({},defaultStyle,props.theme||{});
_this.style=(0,_style3.default)(props.theme);
_this.markingStyle=_this.getDrawingStyle(props.marked);
_this.onDayPress=_this.onDayPress.bind(_this);return _this;
}_createClass(Day,[{key:'onDayPress',value:function onDayPress()

{
this.props.onPress(this.props.day);
}},{key:'shouldComponentUpdate',value:function shouldComponentUpdate(

nextProps){var _this2=this;
var newMarkingStyle=this.getDrawingStyle(nextProps.marked);

if(JSON.stringify(this.markingStyle)!==JSON.stringify(newMarkingStyle)){
this.markingStyle=newMarkingStyle;
return true;
}

return['state','children'].reduce(function(prev,next){
if(prev||nextProps[next]!==_this2.props[next]){
return true;
}
return prev;
},false);
}},{key:'getDrawingStyle',value:function getDrawingStyle(

marking){var _this3=this;
if(!marking){
return{};
}
return marking.reduce(function(prev,next){
prev.textStyle={};
if(next.quickAction){
if(next.first||next.last){
prev.containerStyle=_this3.style.firstQuickAction;
prev.textStyle=_this3.style.firstQuickActionText;
if(next.endSelected&&next.first&&!next.last){
prev.rightFillerStyle='#c1e4fe';
}else if(next.endSelected&&next.last&&!next.first){
prev.leftFillerStyle='#c1e4fe';
}
}else if(!next.endSelected){
prev.containerStyle=_this3.style.quickAction;
prev.textStyle=_this3.style.quickActionText;
}else if(next.endSelected){
prev.leftFillerStyle='#c1e4fe';
prev.rightFillerStyle='#c1e4fe';
}
return prev;
}

var color=next.color;
if(next.status==='NotAvailable'){
prev.textStyle=_this3.style.naText;
}
if(next.startingDay){
prev.startingDay={
color:color};

}
if(next.endingDay){
prev.endingDay={
color:color};

}
if(!next.startingDay&&!next.endingDay){
prev.day={
color:color};

}
if(next.textColor){
prev.textStyle.color=next.textColor;
}
return prev;
},{});
}},{key:'render',value:function render()

{
var containerStyle=[this.style.base];
var textStyle=[this.style.text];
var leftFillerStyle={};
var rightFillerStyle={};
var fillerStyle={};
var fillers=void 0;

if(this.props.state==='disabled'){
textStyle.push(this.style.disabledText);
}else if(this.props.state==='today'){
textStyle.push(this.style.todayText);
}

if(this.props.marked){
containerStyle.push({
borderRadius:17});


var flags=this.markingStyle;
if(flags.textStyle){
textStyle.push(flags.textStyle);
}
if(flags.containerStyle){
containerStyle.push(flags.containerStyle);
}
if(flags.leftFillerStyle){
leftFillerStyle.backgroundColor=flags.leftFillerStyle;
}
if(flags.rightFillerStyle){
rightFillerStyle.backgroundColor=flags.rightFillerStyle;
}

if(flags.startingDay&&!flags.endingDay){
leftFillerStyle={
backgroundColor:this.theme.calendarBackground};

rightFillerStyle={
backgroundColor:flags.startingDay.color};

containerStyle.push({
backgroundColor:flags.startingDay.color});

}else if(flags.endingDay&&!flags.startingDay){
rightFillerStyle={
backgroundColor:this.theme.calendarBackground};

leftFillerStyle={
backgroundColor:flags.endingDay.color};

containerStyle.push({
backgroundColor:flags.endingDay.color});

}else if(flags.day){
leftFillerStyle={backgroundColor:flags.day.color};
rightFillerStyle={backgroundColor:flags.day.color};

fillerStyle={backgroundColor:flags.day.color};
}else if(flags.endingDay&&flags.startingDay){
rightFillerStyle={
backgroundColor:this.theme.calendarBackground};

leftFillerStyle={
backgroundColor:this.theme.calendarBackground};

containerStyle.push({
backgroundColor:flags.endingDay.color});

}

fillers=
_react2.default.createElement(_reactNative.View,{style:[this.style.fillers,fillerStyle]},
_react2.default.createElement(_reactNative.View,{style:[this.style.leftFiller,leftFillerStyle]}),
_react2.default.createElement(_reactNative.View,{style:[this.style.rightFiller,rightFillerStyle]}));


}

return(
_react2.default.createElement(_reactNative.TouchableWithoutFeedback,{onPress:this.onDayPress},
_react2.default.createElement(_reactNative.View,{style:this.style.wrapper},
fillers,
_react2.default.createElement(_reactNative.View,{style:containerStyle},
_react2.default.createElement(_reactNative.Text,{style:textStyle},String(this.props.children))))));




}}]);return Day;}(_react.Component);Day.propTypes={state:_propTypes2.default.oneOf(['selected','disabled','today','']),theme:_propTypes2.default.object,marked:_propTypes2.default.any,onPress:_propTypes2.default.func,day:_propTypes2.default.object,markingExists:_propTypes2.default.bool};exports.default=


Day;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRlZmF1bHRTdHlsZSIsIkRheSIsInByb3BzIiwidGhlbWUiLCJzdHlsZSIsIm1hcmtpbmdTdHlsZSIsImdldERyYXdpbmdTdHlsZSIsIm1hcmtlZCIsIm9uRGF5UHJlc3MiLCJiaW5kIiwib25QcmVzcyIsImRheSIsIm5leHRQcm9wcyIsIm5ld01hcmtpbmdTdHlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWR1Y2UiLCJwcmV2IiwibmV4dCIsIm1hcmtpbmciLCJ0ZXh0U3R5bGUiLCJxdWlja0FjdGlvbiIsImZpcnN0IiwibGFzdCIsImNvbnRhaW5lclN0eWxlIiwiZmlyc3RRdWlja0FjdGlvbiIsImZpcnN0UXVpY2tBY3Rpb25UZXh0IiwiZW5kU2VsZWN0ZWQiLCJyaWdodEZpbGxlclN0eWxlIiwibGVmdEZpbGxlclN0eWxlIiwicXVpY2tBY3Rpb25UZXh0IiwiY29sb3IiLCJzdGF0dXMiLCJuYVRleHQiLCJzdGFydGluZ0RheSIsImVuZGluZ0RheSIsInRleHRDb2xvciIsImJhc2UiLCJ0ZXh0IiwiZmlsbGVyU3R5bGUiLCJmaWxsZXJzIiwic3RhdGUiLCJwdXNoIiwiZGlzYWJsZWRUZXh0IiwidG9kYXlUZXh0IiwiYm9yZGVyUmFkaXVzIiwiZmxhZ3MiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjYWxlbmRhckJhY2tncm91bmQiLCJsZWZ0RmlsbGVyIiwicmlnaHRGaWxsZXIiLCJ3cmFwcGVyIiwiU3RyaW5nIiwiY2hpbGRyZW4iLCJwcm9wVHlwZXMiLCJvbmVPZiIsIm9iamVjdCIsImFueSIsImZ1bmMiLCJtYXJraW5nRXhpc3RzIiwiYm9vbCJdLCJtYXBwaW5ncyI6InV4QkFBQSw0QjtBQUNBLHFDOztBQUVBOzs7Ozs7QUFNQSxxQyxHQUFZQSxhO0FBQ1osK0I7O0FBRU1DLEc7Ozs7Ozs7Ozs7Ozs7OztBQWVKLGFBQVlDLEtBQVosQ0FBbUI7QUFDWEEsS0FEVztBQUVqQixNQUFLQyxLQUFMLGFBQWlCSCxZQUFqQixD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IiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuLy9pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtcbiAgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrLFxuICBUZXh0LFxuICBWaWV3XG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCAqIGFzIGRlZmF1bHRTdHlsZSBmcm9tICcuLi8uLi8uLi9zdHlsZSc7XG5pbXBvcnQgc3R5bGVDb25zdHJ1Y3RvciBmcm9tICcuL3N0eWxlJztcblxuY2xhc3MgRGF5IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvLyBUT0RPOiBzZWxlY3RlZCArIGRpc2FibGVkIHByb3BzIHNob3VsZCBiZSByZW1vdmVkXG4gICAgc3RhdGU6IFByb3BUeXBlcy5vbmVPZihbJ3NlbGVjdGVkJywgJ2Rpc2FibGVkJywgJ3RvZGF5JywgJyddKSxcblxuICAgIC8vIFNwZWNpZnkgdGhlbWUgcHJvcGVydGllcyB0byBvdmVycmlkZSBzcGVjaWZpYyBzdHlsZXMgZm9yIGNhbGVuZGFyIHBhcnRzLiBEZWZhdWx0ID0ge31cbiAgICB0aGVtZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBtYXJrZWQ6IFByb3BUeXBlcy5hbnksXG5cbiAgICBvblByZXNzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBkYXk6IFByb3BUeXBlcy5vYmplY3QsXG5cbiAgICBtYXJraW5nRXhpc3RzOiBQcm9wVHlwZXMuYm9vbCxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnRoZW1lID0gey4uLmRlZmF1bHRTdHlsZSwgLi4uKHByb3BzLnRoZW1lIHx8IHt9KX07XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlQ29uc3RydWN0b3IocHJvcHMudGhlbWUpO1xuICAgIHRoaXMubWFya2luZ1N0eWxlID0gdGhpcy5nZXREcmF3aW5nU3R5bGUocHJvcHMubWFya2VkKTtcbiAgICB0aGlzLm9uRGF5UHJlc3MgPSB0aGlzLm9uRGF5UHJlc3MuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9uRGF5UHJlc3MoKSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzKHRoaXMucHJvcHMuZGF5KTtcbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcbiAgICBjb25zdCBuZXdNYXJraW5nU3R5bGUgPSB0aGlzLmdldERyYXdpbmdTdHlsZShuZXh0UHJvcHMubWFya2VkKTtcblxuICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLm1hcmtpbmdTdHlsZSkgIT09IEpTT04uc3RyaW5naWZ5KG5ld01hcmtpbmdTdHlsZSkpIHtcbiAgICAgIHRoaXMubWFya2luZ1N0eWxlID0gbmV3TWFya2luZ1N0eWxlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIFsnc3RhdGUnLCAnY2hpbGRyZW4nXS5yZWR1Y2UoKHByZXYsIG5leHQpID0+IHtcbiAgICAgIGlmIChwcmV2IHx8IG5leHRQcm9wc1tuZXh0XSAhPT0gdGhpcy5wcm9wc1tuZXh0XSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmV2O1xuICAgIH0sIGZhbHNlKTtcbiAgfVxuXG4gIGdldERyYXdpbmdTdHlsZShtYXJraW5nKSB7XG4gICAgaWYgKCFtYXJraW5nKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBtYXJraW5nLnJlZHVjZSgocHJldiwgbmV4dCkgPT4ge1xuICAgICAgcHJldi50ZXh0U3R5bGUgPSB7fTtcbiAgICAgIGlmIChuZXh0LnF1aWNrQWN0aW9uKSB7XG4gICAgICAgIGlmIChuZXh0LmZpcnN0IHx8IG5leHQubGFzdCkge1xuICAgICAgICAgIHByZXYuY29udGFpbmVyU3R5bGUgPSB0aGlzLnN0eWxlLmZpcnN0UXVpY2tBY3Rpb247XG4gICAgICAgICAgcHJldi50ZXh0U3R5bGUgPSB0aGlzLnN0eWxlLmZpcnN0UXVpY2tBY3Rpb25UZXh0O1xuICAgICAgICAgIGlmIChuZXh0LmVuZFNlbGVjdGVkICYmIG5leHQuZmlyc3QgJiYgIW5leHQubGFzdCkge1xuICAgICAgICAgICAgcHJldi5yaWdodEZpbGxlclN0eWxlID0gJyNjMWU0ZmUnO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV4dC5lbmRTZWxlY3RlZCAmJiBuZXh0Lmxhc3QgJiYgIW5leHQuZmlyc3QpIHtcbiAgICAgICAgICAgIHByZXYubGVmdEZpbGxlclN0eWxlID0gJyNjMWU0ZmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghbmV4dC5lbmRTZWxlY3RlZCkge1xuICAgICAgICAgIHByZXYuY29udGFpbmVyU3R5bGUgPSB0aGlzLnN0eWxlLnF1aWNrQWN0aW9uO1xuICAgICAgICAgIHByZXYudGV4dFN0eWxlID0gdGhpcy5zdHlsZS5xdWlja0FjdGlvblRleHQ7XG4gICAgICAgIH0gZWxzZSBpZiAobmV4dC5lbmRTZWxlY3RlZCkge1xuICAgICAgICAgIHByZXYubGVmdEZpbGxlclN0eWxlID0gJyNjMWU0ZmUnO1xuICAgICAgICAgIHByZXYucmlnaHRGaWxsZXJTdHlsZSA9ICcjYzFlNGZlJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29sb3IgPSBuZXh0LmNvbG9yO1xuICAgICAgaWYgKG5leHQuc3RhdHVzID09PSAnTm90QXZhaWxhYmxlJykge1xuICAgICAgICBwcmV2LnRleHRTdHlsZSA9IHRoaXMuc3R5bGUubmFUZXh0O1xuICAgICAgfVxuICAgICAgaWYgKG5leHQuc3RhcnRpbmdEYXkpIHtcbiAgICAgICAgcHJldi5zdGFydGluZ0RheSA9IHtcbiAgICAgICAgICBjb2xvclxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKG5leHQuZW5kaW5nRGF5KSB7XG4gICAgICAgIHByZXYuZW5kaW5nRGF5ID0ge1xuICAgICAgICAgIGNvbG9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoIW5leHQuc3RhcnRpbmdEYXkgJiYgIW5leHQuZW5kaW5nRGF5KSB7XG4gICAgICAgIHByZXYuZGF5ID0ge1xuICAgICAgICAgIGNvbG9yXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAobmV4dC50ZXh0Q29sb3IpIHtcbiAgICAgICAgcHJldi50ZXh0U3R5bGUuY29sb3IgPSBuZXh0LnRleHRDb2xvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmV2O1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBjb250YWluZXJTdHlsZSA9IFt0aGlzLnN0eWxlLmJhc2VdO1xuICAgIGNvbnN0IHRleHRTdHlsZSA9IFt0aGlzLnN0eWxlLnRleHRdO1xuICAgIGxldCBsZWZ0RmlsbGVyU3R5bGUgPSB7fTtcbiAgICBsZXQgcmlnaHRGaWxsZXJTdHlsZSA9IHt9O1xuICAgIGxldCBmaWxsZXJTdHlsZSA9IHt9O1xuICAgIGxldCBmaWxsZXJzO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuc3RhdGUgPT09ICdkaXNhYmxlZCcpIHtcbiAgICAgIHRleHRTdHlsZS5wdXNoKHRoaXMuc3R5bGUuZGlzYWJsZWRUZXh0KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc3RhdGUgPT09ICd0b2RheScpIHtcbiAgICAgIHRleHRTdHlsZS5wdXNoKHRoaXMuc3R5bGUudG9kYXlUZXh0KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tYXJrZWQpIHtcbiAgICAgIGNvbnRhaW5lclN0eWxlLnB1c2goe1xuICAgICAgICBib3JkZXJSYWRpdXM6IDE3XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLm1hcmtpbmdTdHlsZTtcbiAgICAgIGlmIChmbGFncy50ZXh0U3R5bGUpIHtcbiAgICAgICAgdGV4dFN0eWxlLnB1c2goZmxhZ3MudGV4dFN0eWxlKTtcbiAgICAgIH1cbiAgICAgIGlmIChmbGFncy5jb250YWluZXJTdHlsZSkge1xuICAgICAgICBjb250YWluZXJTdHlsZS5wdXNoKGZsYWdzLmNvbnRhaW5lclN0eWxlKTtcbiAgICAgIH1cbiAgICAgIGlmIChmbGFncy5sZWZ0RmlsbGVyU3R5bGUpIHtcbiAgICAgICAgbGVmdEZpbGxlclN0eWxlLmJhY2tncm91bmRDb2xvciA9IGZsYWdzLmxlZnRGaWxsZXJTdHlsZTtcbiAgICAgIH1cbiAgICAgIGlmIChmbGFncy5yaWdodEZpbGxlclN0eWxlKSB7XG4gICAgICAgIHJpZ2h0RmlsbGVyU3R5bGUuYmFja2dyb3VuZENvbG9yID0gZmxhZ3MucmlnaHRGaWxsZXJTdHlsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZsYWdzLnN0YXJ0aW5nRGF5ICYmICFmbGFncy5lbmRpbmdEYXkpIHtcbiAgICAgICAgbGVmdEZpbGxlclN0eWxlID0ge1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy50aGVtZS5jYWxlbmRhckJhY2tncm91bmRcbiAgICAgICAgfTtcbiAgICAgICAgcmlnaHRGaWxsZXJTdHlsZSA9IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGZsYWdzLnN0YXJ0aW5nRGF5LmNvbG9yXG4gICAgICAgIH07XG4gICAgICAgIGNvbnRhaW5lclN0eWxlLnB1c2goe1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZmxhZ3Muc3RhcnRpbmdEYXkuY29sb3JcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGZsYWdzLmVuZGluZ0RheSAmJiAhZmxhZ3Muc3RhcnRpbmdEYXkpIHtcbiAgICAgICAgcmlnaHRGaWxsZXJTdHlsZSA9IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMudGhlbWUuY2FsZW5kYXJCYWNrZ3JvdW5kXG4gICAgICAgIH07XG4gICAgICAgIGxlZnRGaWxsZXJTdHlsZSA9IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGZsYWdzLmVuZGluZ0RheS5jb2xvclxuICAgICAgICB9O1xuICAgICAgICBjb250YWluZXJTdHlsZS5wdXNoKHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGZsYWdzLmVuZGluZ0RheS5jb2xvclxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZmxhZ3MuZGF5KSB7XG4gICAgICAgIGxlZnRGaWxsZXJTdHlsZSA9IHtiYWNrZ3JvdW5kQ29sb3I6IGZsYWdzLmRheS5jb2xvcn07XG4gICAgICAgIHJpZ2h0RmlsbGVyU3R5bGUgPSB7YmFja2dyb3VuZENvbG9yOiBmbGFncy5kYXkuY29sb3J9O1xuICAgICAgICAvLyAjMTc3IGJ1Z1xuICAgICAgICBmaWxsZXJTdHlsZSA9IHtiYWNrZ3JvdW5kQ29sb3I6IGZsYWdzLmRheS5jb2xvcn07XG4gICAgICB9IGVsc2UgaWYgKGZsYWdzLmVuZGluZ0RheSAmJiBmbGFncy5zdGFydGluZ0RheSkge1xuICAgICAgICByaWdodEZpbGxlclN0eWxlID0ge1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy50aGVtZS5jYWxlbmRhckJhY2tncm91bmRcbiAgICAgICAgfTtcbiAgICAgICAgbGVmdEZpbGxlclN0eWxlID0ge1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy50aGVtZS5jYWxlbmRhckJhY2tncm91bmRcbiAgICAgICAgfTtcbiAgICAgICAgY29udGFpbmVyU3R5bGUucHVzaCh7XG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBmbGFncy5lbmRpbmdEYXkuY29sb3JcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZpbGxlcnMgPSAoXG4gICAgICAgIDxWaWV3IHN0eWxlPXtbdGhpcy5zdHlsZS5maWxsZXJzLCBmaWxsZXJTdHlsZV19PlxuICAgICAgICAgIDxWaWV3IHN0eWxlPXtbdGhpcy5zdHlsZS5sZWZ0RmlsbGVyLCBsZWZ0RmlsbGVyU3R5bGVdfS8+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e1t0aGlzLnN0eWxlLnJpZ2h0RmlsbGVyLCByaWdodEZpbGxlclN0eWxlXX0vPlxuICAgICAgICA8L1ZpZXc+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8VG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIG9uUHJlc3M9e3RoaXMub25EYXlQcmVzc30+XG4gICAgICAgIDxWaWV3IHN0eWxlPXt0aGlzLnN0eWxlLndyYXBwZXJ9PlxuICAgICAgICAgIHtmaWxsZXJzfVxuICAgICAgICAgIDxWaWV3IHN0eWxlPXtjb250YWluZXJTdHlsZX0+XG4gICAgICAgICAgICA8VGV4dCBzdHlsZT17dGV4dFN0eWxlfT57U3RyaW5nKHRoaXMucHJvcHMuY2hpbGRyZW4pfTwvVGV4dD5cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvVmlldz5cbiAgICAgIDwvVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrPlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF5O1xuIl19