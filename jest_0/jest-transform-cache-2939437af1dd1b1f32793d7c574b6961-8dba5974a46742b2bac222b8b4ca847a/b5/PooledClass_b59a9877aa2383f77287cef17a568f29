67f233ccb5150ac9fc346d03b766555d












'use strict';

var invariant=require('fbjs/lib/invariant');








var oneArgumentPooler=function oneArgumentPooler(copyFieldsFrom){
var Klass=this;
if(Klass.instancePool.length){
var instance=Klass.instancePool.pop();
Klass.call(instance,copyFieldsFrom);
return instance;
}else{
return new Klass(copyFieldsFrom);
}
};

var twoArgumentPooler=function twoArgumentPooler(a1,a2){
var Klass=this;
if(Klass.instancePool.length){
var instance=Klass.instancePool.pop();
Klass.call(instance,a1,a2);
return instance;
}else{
return new Klass(a1,a2);
}
};

var threeArgumentPooler=function threeArgumentPooler(a1,a2,a3){
var Klass=this;
if(Klass.instancePool.length){
var instance=Klass.instancePool.pop();
Klass.call(instance,a1,a2,a3);
return instance;
}else{
return new Klass(a1,a2,a3);
}
};

var fourArgumentPooler=function fourArgumentPooler(a1,a2,a3,a4){
var Klass=this;
if(Klass.instancePool.length){
var instance=Klass.instancePool.pop();
Klass.call(instance,a1,a2,a3,a4);
return instance;
}else{
return new Klass(a1,a2,a3,a4);
}
};

var standardReleaser=function standardReleaser(instance){
var Klass=this;
invariant(
instance instanceof Klass,
'Trying to release an instance into a pool of a different type.');

instance.destructor();
if(Klass.instancePool.length<Klass.poolSize){
Klass.instancePool.push(instance);
}
};

var DEFAULT_POOL_SIZE=10;
var DEFAULT_POOLER=oneArgumentPooler;












var addPoolingTo=function addPoolingTo(
CopyConstructor,
pooler)





{


var NewKlass=CopyConstructor;
NewKlass.instancePool=[];
NewKlass.getPooled=pooler||DEFAULT_POOLER;
if(!NewKlass.poolSize){
NewKlass.poolSize=DEFAULT_POOL_SIZE;
}
NewKlass.release=standardReleaser;
return NewKlass;
};

var PooledClass={
addPoolingTo:addPoolingTo,
oneArgumentPooler:oneArgumentPooler,
twoArgumentPooler:twoArgumentPooler,
threeArgumentPooler:threeArgumentPooler,
fourArgumentPooler:fourArgumentPooler};


module.exports=PooledClass;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvb2xlZENsYXNzLmpzIl0sIm5hbWVzIjpbImludmFyaWFudCIsInJlcXVpcmUiLCJvbmVBcmd1bWVudFBvb2xlciIsImNvcHlGaWVsZHNGcm9tIiwiS2xhc3MiLCJpbnN0YW5jZVBvb2wiLCJsZW5ndGgiLCJpbnN0YW5jZSIsInBvcCIsImNhbGwiLCJ0d29Bcmd1bWVudFBvb2xlciIsImExIiwiYTIiLCJ0aHJlZUFyZ3VtZW50UG9vbGVyIiwiYTMiLCJmb3VyQXJndW1lbnRQb29sZXIiLCJhNCIsInN0YW5kYXJkUmVsZWFzZXIiLCJkZXN0cnVjdG9yIiwicG9vbFNpemUiLCJwdXNoIiwiREVGQVVMVF9QT09MX1NJWkUiLCJERUZBVUxUX1BPT0xFUiIsImFkZFBvb2xpbmdUbyIsIkNvcHlDb25zdHJ1Y3RvciIsInBvb2xlciIsIk5ld0tsYXNzIiwiZ2V0UG9vbGVkIiwicmVsZWFzZSIsIlBvb2xlZENsYXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBWUE7O0FBRUEsR0FBSUEsV0FBWUMsUUFBUSxvQkFBUixDQUFoQjs7Ozs7Ozs7O0FBU0EsR0FBSUMsbUJBQW9CLFFBQXBCQSxrQkFBb0IsQ0FBU0MsY0FBVCxDQUF5QjtBQUMvQyxHQUFJQyxPQUFRLElBQVo7QUFDQSxHQUFJQSxNQUFNQyxZQUFOLENBQW1CQyxNQUF2QixDQUErQjtBQUM3QixHQUFJQyxVQUFXSCxNQUFNQyxZQUFOLENBQW1CRyxHQUFuQixFQUFmO0FBQ0FKLE1BQU1LLElBQU4sQ0FBV0YsUUFBWCxDQUFxQkosY0FBckI7QUFDQSxNQUFPSSxTQUFQO0FBQ0QsQ0FKRCxJQUlPO0FBQ0wsTUFBTyxJQUFJSCxNQUFKLENBQVVELGNBQVYsQ0FBUDtBQUNEO0FBQ0YsQ0FURDs7QUFXQSxHQUFJTyxtQkFBb0IsUUFBcEJBLGtCQUFvQixDQUFTQyxFQUFULENBQWFDLEVBQWIsQ0FBaUI7QUFDdkMsR0FBSVIsT0FBUSxJQUFaO0FBQ0EsR0FBSUEsTUFBTUMsWUFBTixDQUFtQkMsTUFBdkIsQ0FBK0I7QUFDN0IsR0FBSUMsVUFBV0gsTUFBTUMsWUFBTixDQUFtQkcsR0FBbkIsRUFBZjtBQUNBSixNQUFNSyxJQUFOLENBQVdGLFFBQVgsQ0FBcUJJLEVBQXJCLENBQXlCQyxFQUF6QjtBQUNBLE1BQU9MLFNBQVA7QUFDRCxDQUpELElBSU87QUFDTCxNQUFPLElBQUlILE1BQUosQ0FBVU8sRUFBVixDQUFjQyxFQUFkLENBQVA7QUFDRDtBQUNGLENBVEQ7O0FBV0EsR0FBSUMscUJBQXNCLFFBQXRCQSxvQkFBc0IsQ0FBU0YsRUFBVCxDQUFhQyxFQUFiLENBQWlCRSxFQUFqQixDQUFxQjtBQUM3QyxHQUFJVixPQUFRLElBQVo7QUFDQSxHQUFJQSxNQUFNQyxZQUFOLENBQW1CQyxNQUF2QixDQUErQjtBQUM3QixHQUFJQyxVQUFXSCxNQUFNQyxZQUFOLENBQW1CRyxHQUFuQixFQUFmO0FBQ0FKLE1BQU1LLElBQU4sQ0FBV0YsUUFBWCxDQUFxQkksRUFBckIsQ0FBeUJDLEVBQXpCLENBQTZCRSxFQUE3QjtBQUNBLE1BQU9QLFNBQVA7QUFDRCxDQUpELElBSU87QUFDTCxNQUFPLElBQUlILE1BQUosQ0FBVU8sRUFBVixDQUFjQyxFQUFkLENBQWtCRSxFQUFsQixDQUFQO0FBQ0Q7QUFDRixDQVREOztBQVdBLEdBQUlDLG9CQUFxQixRQUFyQkEsbUJBQXFCLENBQVNKLEVBQVQsQ0FBYUMsRUFBYixDQUFpQkUsRUFBakIsQ0FBcUJFLEVBQXJCLENBQXlCO0FBQ2hELEdBQUlaLE9BQVEsSUFBWjtBQUNBLEdBQUlBLE1BQU1DLFlBQU4sQ0FBbUJDLE1BQXZCLENBQStCO0FBQzdCLEdBQUlDLFVBQVdILE1BQU1DLFlBQU4sQ0FBbUJHLEdBQW5CLEVBQWY7QUFDQUosTUFBTUssSUFBTixDQUFXRixRQUFYLENBQXFCSSxFQUFyQixDQUF5QkMsRUFBekIsQ0FBNkJFLEVBQTdCLENBQWlDRSxFQUFqQztBQUNBLE1BQU9ULFNBQVA7QUFDRCxDQUpELElBSU87QUFDTCxNQUFPLElBQUlILE1BQUosQ0FBVU8sRUFBVixDQUFjQyxFQUFkLENBQWtCRSxFQUFsQixDQUFzQkUsRUFBdEIsQ0FBUDtBQUNEO0FBQ0YsQ0FURDs7QUFXQSxHQUFJQyxrQkFBbUIsUUFBbkJBLGlCQUFtQixDQUFTVixRQUFULENBQW1CO0FBQ3hDLEdBQUlILE9BQVEsSUFBWjtBQUNBSjtBQUNFTyxtQkFBb0JILE1BRHRCO0FBRUUsZ0VBRkY7O0FBSUFHLFNBQVNXLFVBQVQ7QUFDQSxHQUFJZCxNQUFNQyxZQUFOLENBQW1CQyxNQUFuQixDQUE0QkYsTUFBTWUsUUFBdEMsQ0FBZ0Q7QUFDOUNmLE1BQU1DLFlBQU4sQ0FBbUJlLElBQW5CLENBQXdCYixRQUF4QjtBQUNEO0FBQ0YsQ0FWRDs7QUFZQSxHQUFJYyxtQkFBb0IsRUFBeEI7QUFDQSxHQUFJQyxnQkFBaUJwQixpQkFBckI7Ozs7Ozs7Ozs7Ozs7QUFhQSxHQUFJcUIsY0FBZSxRQUFmQSxhQUFlO0FBQ2pCQyxlQURpQjtBQUVqQkMsTUFGaUI7Ozs7OztBQVFqQjs7O0FBR0EsR0FBSUMsVUFBWUYsZUFBaEI7QUFDQUUsU0FBU3JCLFlBQVQsQ0FBd0IsRUFBeEI7QUFDQXFCLFNBQVNDLFNBQVQsQ0FBcUJGLFFBQVVILGNBQS9CO0FBQ0EsR0FBSSxDQUFDSSxTQUFTUCxRQUFkLENBQXdCO0FBQ3RCTyxTQUFTUCxRQUFULENBQW9CRSxpQkFBcEI7QUFDRDtBQUNESyxTQUFTRSxPQUFULENBQW1CWCxnQkFBbkI7QUFDQSxNQUFPUyxTQUFQO0FBQ0QsQ0FuQkQ7O0FBcUJBLEdBQUlHLGFBQWM7QUFDaEJOLGFBQWNBLFlBREU7QUFFaEJyQixrQkFBb0JBLGlCQUZKO0FBR2hCUSxrQkFBb0JBLGlCQUhKO0FBSWhCRyxvQkFBc0JBLG1CQUpOO0FBS2hCRSxtQkFBcUJBLGtCQUxMLENBQWxCOzs7QUFRQWUsT0FBT0MsT0FBUCxDQUFpQkYsV0FBakIiLCJmaWxlIjoiUG9vbGVkQ2xhc3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUG9vbGVkQ2xhc3NcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogU3RhdGljIHBvb2xlcnMuIFNldmVyYWwgY3VzdG9tIHZlcnNpb25zIGZvciBlYWNoIHBvdGVudGlhbCBudW1iZXIgb2ZcbiAqIGFyZ3VtZW50cy4gQSBjb21wbGV0ZWx5IGdlbmVyaWMgcG9vbGVyIGlzIGVhc3kgdG8gaW1wbGVtZW50LCBidXQgd291bGRcbiAqIHJlcXVpcmUgYWNjZXNzaW5nIHRoZSBgYXJndW1lbnRzYCBvYmplY3QuIEluIGVhY2ggb2YgdGhlc2UsIGB0aGlzYCByZWZlcnMgdG9cbiAqIHRoZSBDbGFzcyBpdHNlbGYsIG5vdCBhbiBpbnN0YW5jZS4gSWYgYW55IG90aGVycyBhcmUgbmVlZGVkLCBzaW1wbHkgYWRkIHRoZW1cbiAqIGhlcmUsIG9yIGluIHRoZWlyIG93biBmaWxlcy5cbiAqL1xudmFyIG9uZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24oY29weUZpZWxkc0Zyb20pIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24oYTEsIGEyKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMik7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyKTtcbiAgfVxufTtcblxudmFyIHRocmVlQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbihhMSwgYTIsIGEzKSB7XG4gIHZhciBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgdmFyIGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMpO1xuICB9XG59O1xuXG52YXIgZm91ckFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24oYTEsIGEyLCBhMywgYTQpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxudmFyIHN0YW5kYXJkUmVsZWFzZXIgPSBmdW5jdGlvbihpbnN0YW5jZSkge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICBpbnZhcmlhbnQoXG4gICAgaW5zdGFuY2UgaW5zdGFuY2VvZiBLbGFzcyxcbiAgICAnVHJ5aW5nIHRvIHJlbGVhc2UgYW4gaW5zdGFuY2UgaW50byBhIHBvb2wgb2YgYSBkaWZmZXJlbnQgdHlwZS4nLFxuICApO1xuICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoIDwgS2xhc3MucG9vbFNpemUpIHtcbiAgICBLbGFzcy5pbnN0YW5jZVBvb2wucHVzaChpbnN0YW5jZSk7XG4gIH1cbn07XG5cbnZhciBERUZBVUxUX1BPT0xfU0laRSA9IDEwO1xudmFyIERFRkFVTFRfUE9PTEVSID0gb25lQXJndW1lbnRQb29sZXI7XG5cbnR5cGUgUG9vbGVyID0gYW55O1xuXG4vKipcbiAqIEF1Z21lbnRzIGBDb3B5Q29uc3RydWN0b3JgIHRvIGJlIGEgcG9vbGFibGUgY2xhc3MsIGF1Z21lbnRpbmcgb25seSB0aGUgY2xhc3NcbiAqIGl0c2VsZiAoc3RhdGljYWxseSkgbm90IGFkZGluZyBhbnkgcHJvdG90eXBpY2FsIGZpZWxkcy4gQW55IENvcHlDb25zdHJ1Y3RvclxuICogeW91IGdpdmUgdGhpcyBtYXkgaGF2ZSBhIGBwb29sU2l6ZWAgcHJvcGVydHksIGFuZCB3aWxsIGxvb2sgZm9yIGFcbiAqIHByb3RvdHlwaWNhbCBgZGVzdHJ1Y3RvcmAgb24gaW5zdGFuY2VzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IENvcHlDb25zdHJ1Y3RvciBDb25zdHJ1Y3RvciB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlc2V0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcG9vbGVyIEN1c3RvbWl6YWJsZSBwb29sZXIuXG4gKi9cbnZhciBhZGRQb29saW5nVG8gPSBmdW5jdGlvbjxUPihcbiAgQ29weUNvbnN0cnVjdG9yOiBDbGFzczxUPixcbiAgcG9vbGVyOiBQb29sZXIsXG4pOiBDbGFzczxUPiAmIHtcbiAgZ2V0UG9vbGVkKFxuICAgIC4uLmFyZ3M6ICRSZWFkT25seUFycmF5PG1peGVkPlxuICApOiAvKiBhcmd1bWVudHMgb2YgdGhlIGNvbnN0cnVjdG9yICovIFQsXG4gIHJlbGVhc2UoaW5zdGFuY2U6IG1peGVkKTogdm9pZCxcbn0ge1xuICAvLyBDYXN0aW5nIGFzIGFueSBzbyB0aGF0IGZsb3cgaWdub3JlcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uIGFuZCB0cnVzdHNcbiAgLy8gaXQgdG8gbWF0Y2ggdGhlIHR5cGUgd2UgZGVjbGFyZWRcbiAgdmFyIE5ld0tsYXNzID0gKENvcHlDb25zdHJ1Y3RvcjogYW55KTtcbiAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG4gIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cbiAgTmV3S2xhc3MucmVsZWFzZSA9IHN0YW5kYXJkUmVsZWFzZXI7XG4gIHJldHVybiBOZXdLbGFzcztcbn07XG5cbnZhciBQb29sZWRDbGFzcyA9IHtcbiAgYWRkUG9vbGluZ1RvOiBhZGRQb29saW5nVG8sXG4gIG9uZUFyZ3VtZW50UG9vbGVyOiAob25lQXJndW1lbnRQb29sZXI6IFBvb2xlciksXG4gIHR3b0FyZ3VtZW50UG9vbGVyOiAodHdvQXJndW1lbnRQb29sZXI6IFBvb2xlciksXG4gIHRocmVlQXJndW1lbnRQb29sZXI6ICh0aHJlZUFyZ3VtZW50UG9vbGVyOiBQb29sZXIpLFxuICBmb3VyQXJndW1lbnRQb29sZXI6IChmb3VyQXJndW1lbnRQb29sZXI6IFBvb2xlciksXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvb2xlZENsYXNzO1xuIl19