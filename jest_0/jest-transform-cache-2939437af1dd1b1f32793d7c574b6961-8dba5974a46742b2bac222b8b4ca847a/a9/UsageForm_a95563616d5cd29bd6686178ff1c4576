b8dbe8c45e526d88f30171854f6133c8
Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);
var _reactRedux=require('react-redux');
var _firebase=require('firebase');var _firebase2=_interopRequireDefault(_firebase);
var _actions=require('../actions');
var _common=require('./common');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var

UsageForm=function(_Component){_inherits(UsageForm,_Component);
function UsageForm(props){_classCallCheck(this,UsageForm);var _this=_possibleConstructorReturn(this,(UsageForm.__proto__||Object.getPrototypeOf(UsageForm)).call(this,
props));

_this.state={usage:''};return _this;
}_createClass(UsageForm,[{key:'componentWillMount',value:function componentWillMount()

{var _this2=this;var _props=
this.props,year=_props.year,month=_props.month,dateString=_props.dateString;var _firebase$auth=
_firebase2.default.auth(),currentUser=_firebase$auth.currentUser;

_firebase2.default.database().ref('/users/'+currentUser.uid+'/usage/'+year+'/'+month+'/'+dateString).
on('value',function(snapshot){
if(snapshot.val()){
_this2.setState({usage:snapshot.val().usage});
}
});
}},{key:'onButtonPress',value:function onButtonPress()

{var _props2=
this.props,year=_props2.year,month=_props2.month,dateString=_props2.dateString;var
usage=this.state.usage;

this.props.usageUpdate({year:year,month:month,dateString:dateString,usage:usage});
}},{key:'render',value:function render()

{var _this3=this;
return(
_react2.default.createElement(_common.Card,null,
_react2.default.createElement(_common.CardSection,null,
_react2.default.createElement(_common.Input,{
label:'Electricity usage on '+this.props.dateString,
placeholder:'kWh',
keyboardType:'numeric',
value:this.state.usage,
onChangeText:function onChangeText(usage){return _this3.setState({usage:usage});}})),


_react2.default.createElement(_common.CardSection,null,
_react2.default.createElement(_common.Button,{
onPress:this.onButtonPress.bind(this)},'Save'))));






}}]);return UsageForm;}(_react.Component);


var mapStateToProps=function mapStateToProps(state){var _state$calendar=
state.calendar,year=_state$calendar.year,month=_state$calendar.month,dateString=_state$calendar.dateString;

return{year:year,month:month,dateString:dateString};
};exports.default=

(0,_reactRedux.connect)(mapStateToProps,{
usageUpdate:_actions.usageUpdate})(
UsageForm);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzYWdlRm9ybS5qcyJdLCJuYW1lcyI6WyJVc2FnZUZvcm0iLCJwcm9wcyIsInN0YXRlIiwidXNhZ2UiLCJ5ZWFyIiwibW9udGgiLCJkYXRlU3RyaW5nIiwiYXV0aCIsImN1cnJlbnRVc2VyIiwiZGF0YWJhc2UiLCJyZWYiLCJ1aWQiLCJvbiIsInNuYXBzaG90IiwidmFsIiwic2V0U3RhdGUiLCJ1c2FnZVVwZGF0ZSIsIm9uQnV0dG9uUHJlc3MiLCJiaW5kIiwibWFwU3RhdGVUb1Byb3BzIiwiY2FsZW5kYXIiXSwibWFwcGluZ3MiOiJ1akJBQUEsNEI7QUFDQTtBQUNBLGtDO0FBQ0E7QUFDQSxnQzs7QUFFTUEsUztBQUNKLG1CQUFZQyxLQUFaLENBQW1CO0FBQ1hBLEtBRFc7O0FBR2pCLE1BQUtDLEtBQUwsQ0FBYSxDQUFFQyxNQUFPLEVBQVQsQ0FBYixDQUhpQjtBQUlsQixDOztBQUVvQjtBQUNpQixLQUFLRixLQUR0QixDQUNYRyxJQURXLFFBQ1hBLElBRFcsQ0FDTEMsS0FESyxRQUNMQSxLQURLLENBQ0VDLFVBREYsUUFDRUEsVUFERjtBQUVLLG1CQUFTQyxJQUFULEVBRkwsQ0FFWEMsV0FGVyxnQkFFWEEsV0FGVzs7QUFJbkIsbUJBQVNDLFFBQVQsR0FBb0JDLEdBQXBCLFdBQWtDRixZQUFZRyxHQUE5QyxXQUEyRFAsSUFBM0QsS0FBbUVDLEtBQW5FLEtBQTRFQyxVQUE1RTtBQUNHTSxFQURILENBQ00sT0FETixDQUNlLGtCQUFZO0FBQ3ZCLEdBQUlDLFNBQVNDLEdBQVQsRUFBSixDQUFvQjtBQUNsQixPQUFLQyxRQUFMLENBQWMsQ0FBRVosTUFBT1UsU0FBU0MsR0FBVCxHQUFlWCxLQUF4QixDQUFkO0FBQ0Q7QUFDRixDQUxIO0FBTUQsQzs7QUFFZTtBQUNzQixLQUFLRixLQUQzQixDQUNORyxJQURNLFNBQ05BLElBRE0sQ0FDQUMsS0FEQSxTQUNBQSxLQURBLENBQ09DLFVBRFAsU0FDT0EsVUFEUDtBQUVOSCxLQUZNLENBRUksS0FBS0QsS0FGVCxDQUVOQyxLQUZNOztBQUlkLEtBQUtGLEtBQUwsQ0FBV2UsV0FBWCxDQUF1QixDQUFFWixTQUFGLENBQVFDLFdBQVIsQ0FBZUMscUJBQWYsQ0FBMkJILFdBQTNCLENBQXZCO0FBQ0QsQzs7QUFFUTtBQUNQO0FBQ0U7QUFDRTtBQUNFO0FBQ0UsOEJBQStCLEtBQUtGLEtBQUwsQ0FBV0ssVUFENUM7QUFFRSxZQUFZLEtBRmQ7QUFHRSxhQUFhLFNBSGY7QUFJRSxNQUFPLEtBQUtKLEtBQUwsQ0FBV0MsS0FKcEI7QUFLRSxhQUFjLG1DQUFTLFFBQUtZLFFBQUwsQ0FBYyxDQUFFWixXQUFGLENBQWQsQ0FBVCxFQUxoQixFQURGLENBREY7OztBQVVFO0FBQ0U7QUFDRSxRQUFTLEtBQUtjLGFBQUwsQ0FBbUJDLElBQW5CLENBQXdCLElBQXhCLENBRFgsU0FERixDQVZGLENBREY7Ozs7Ozs7QUFvQkQsQzs7O0FBR0gsR0FBTUMsaUJBQWtCLFFBQWxCQSxnQkFBa0IsQ0FBQ2pCLEtBQUQsQ0FBVztBQUNHQSxNQUFNa0IsUUFEVCxDQUN6QmhCLElBRHlCLGlCQUN6QkEsSUFEeUIsQ0FDbkJDLEtBRG1CLGlCQUNuQkEsS0FEbUIsQ0FDWkMsVUFEWSxpQkFDWkEsVUFEWTs7QUFHakMsTUFBTyxDQUFFRixTQUFGLENBQVFDLFdBQVIsQ0FBZUMscUJBQWYsQ0FBUDtBQUNELENBSkQsQzs7QUFNZSx3QkFBUWEsZUFBUixDQUF5QjtBQUN0Q0gsZ0NBRHNDLENBQXpCO0FBRVpoQixTQUZZLEMiLCJmaWxlIjoiVXNhZ2VGb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnO1xuaW1wb3J0IHsgdXNhZ2VVcGRhdGUgfSBmcm9tICcuLi9hY3Rpb25zJztcbmltcG9ydCB7IENhcmQsIENhcmRTZWN0aW9uLCBJbnB1dCwgQnV0dG9uIH0gZnJvbSAnLi9jb21tb24nO1xuXG5jbGFzcyBVc2FnZUZvcm0gZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7IHVzYWdlOiAnJyB9O1xuICB9XG5cbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRhdGVTdHJpbmcgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBjdXJyZW50VXNlciB9ID0gZmlyZWJhc2UuYXV0aCgpO1xuXG4gICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoYC91c2Vycy8ke2N1cnJlbnRVc2VyLnVpZH0vdXNhZ2UvJHt5ZWFyfS8ke21vbnRofS8ke2RhdGVTdHJpbmd9YClcbiAgICAgIC5vbigndmFsdWUnLCBzbmFwc2hvdCA9PiB7XG4gICAgICAgIGlmIChzbmFwc2hvdC52YWwoKSkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB1c2FnZTogc25hcHNob3QudmFsKCkudXNhZ2UgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgb25CdXR0b25QcmVzcygpIHtcbiAgICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXRlU3RyaW5nIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgdXNhZ2UgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICB0aGlzLnByb3BzLnVzYWdlVXBkYXRlKHsgeWVhciwgbW9udGgsIGRhdGVTdHJpbmcsIHVzYWdlIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZD5cbiAgICAgICAgPENhcmRTZWN0aW9uPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgbGFiZWw9e2BFbGVjdHJpY2l0eSB1c2FnZSBvbiAke3RoaXMucHJvcHMuZGF0ZVN0cmluZ31gfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJrV2hcIlxuICAgICAgICAgICAga2V5Ym9hcmRUeXBlPVwibnVtZXJpY1wiXG4gICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2FnZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlVGV4dD17dXNhZ2UgPT4gdGhpcy5zZXRTdGF0ZSh7IHVzYWdlIH0pfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvQ2FyZFNlY3Rpb24+XG4gICAgICAgIDxDYXJkU2VjdGlvbj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBvblByZXNzPXt0aGlzLm9uQnV0dG9uUHJlc3MuYmluZCh0aGlzKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBTYXZlXG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvQ2FyZFNlY3Rpb24+XG4gICAgICA8L0NhcmQ+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUpID0+IHtcbiAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF0ZVN0cmluZyB9ID0gc3RhdGUuY2FsZW5kYXI7XG5cbiAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRhdGVTdHJpbmcgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCB7XG4gIHVzYWdlVXBkYXRlXG59KShVc2FnZUZvcm0pO1xuIl19