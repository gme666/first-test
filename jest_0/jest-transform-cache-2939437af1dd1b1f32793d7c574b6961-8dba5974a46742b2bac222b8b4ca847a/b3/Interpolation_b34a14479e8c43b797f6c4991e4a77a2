40ffb88470d95a2d84f558037036cfa9












'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var invariant=require('fbjs/lib/invariant');
var normalizeColor=require('normalizeColor');
















var linear=function linear(t){return t;};var





Interpolation=function(){function Interpolation(){_classCallCheck(this,Interpolation);}_createClass(Interpolation,null,[{key:'create',value:function create(
config){

if(config.outputRange&&typeof config.outputRange[0]==='string'){
return createInterpolationFromStringOutputRange(config);
}

var outputRange=config.outputRange;
checkInfiniteRange('outputRange',outputRange);

var inputRange=config.inputRange;
checkInfiniteRange('inputRange',inputRange);
checkValidInputRange(inputRange);

invariant(
inputRange.length===outputRange.length,
'inputRange ('+inputRange.length+') and outputRange ('+
outputRange.length+') must have the same length');


var easing=config.easing||linear;

var extrapolateLeft='extend';
if(config.extrapolateLeft!==undefined){
extrapolateLeft=config.extrapolateLeft;
}else if(config.extrapolate!==undefined){
extrapolateLeft=config.extrapolate;
}

var extrapolateRight='extend';
if(config.extrapolateRight!==undefined){
extrapolateRight=config.extrapolateRight;
}else if(config.extrapolate!==undefined){
extrapolateRight=config.extrapolate;
}

return function(input){
invariant(
typeof input==='number',
'Cannot interpolation an input which is not a number');


var range=findRange(input,inputRange);
return interpolate(
input,
inputRange[range],
inputRange[range+1],
outputRange[range],
outputRange[range+1],
easing,
extrapolateLeft,
extrapolateRight);

};
}}]);return Interpolation;}();


function interpolate(
input,
inputMin,
inputMax,
outputMin,
outputMax,
easing,
extrapolateLeft,
extrapolateRight)
{
var result=input;


if(result<inputMin){
if(extrapolateLeft==='identity'){
return result;
}else if(extrapolateLeft==='clamp'){
result=inputMin;
}else if(extrapolateLeft==='extend'){

}
}

if(result>inputMax){
if(extrapolateRight==='identity'){
return result;
}else if(extrapolateRight==='clamp'){
result=inputMax;
}else if(extrapolateRight==='extend'){

}
}

if(outputMin===outputMax){
return outputMin;
}

if(inputMin===inputMax){
if(input<=inputMin){
return outputMin;
}
return outputMax;
}


if(inputMin===-Infinity){
result=-result;
}else if(inputMax===Infinity){
result=result-inputMin;
}else{
result=(result-inputMin)/(inputMax-inputMin);
}


result=easing(result);


if(outputMin===-Infinity){
result=-result;
}else if(outputMax===Infinity){
result=result+outputMin;
}else{
result=result*(outputMax-outputMin)+outputMin;
}

return result;
}

function colorToRgba(input){
var int32Color=normalizeColor(input);
if(int32Color===null){
return input;
}

int32Color=int32Color||0;

var r=(int32Color&0xff000000)>>>24;
var g=(int32Color&0x00ff0000)>>>16;
var b=(int32Color&0x0000ff00)>>>8;
var a=(int32Color&0x000000ff)/255;

return'rgba('+r+', '+g+', '+b+', '+a+')';
}

var stringShapeRegex=/[0-9\.-]+/g;









function createInterpolationFromStringOutputRange(
config)
{
var outputRange=config.outputRange;
invariant(outputRange.length>=2,'Bad output range');
outputRange=outputRange.map(colorToRgba);
checkPattern(outputRange);












var outputRanges=outputRange[0].match(stringShapeRegex).map(function(){return[];});
outputRange.forEach(function(value){



value.match(stringShapeRegex).forEach(function(number,i){
outputRanges[i].push(+number);
});
});




var interpolations=outputRange[0].match(stringShapeRegex).map(function(value,i){
return Interpolation.create(_extends({},
config,{
outputRange:outputRanges[i]}));

});



var shouldRound=isRgbOrRgba(outputRange[0]);

return function(input){
var i=0;



return outputRange[0].replace(stringShapeRegex,function(){
var val=+interpolations[i++](input);
var rounded=shouldRound&&i<4?Math.round(val):Math.round(val*1000)/1000;
return String(rounded);
});
};
}

function isRgbOrRgba(range){
return typeof range==='string'&&range.startsWith('rgb');
}

function checkPattern(arr){
var pattern=arr[0].replace(stringShapeRegex,'');
for(var i=1;i<arr.length;++i){
invariant(
pattern===arr[i].replace(stringShapeRegex,''),
'invalid pattern '+arr[0]+' and '+arr[i]);

}
}

function findRange(input,inputRange){
for(var i=1;i<inputRange.length-1;++i){
if(inputRange[i]>=input){
break;
}
}
return i-1;
}

function checkValidInputRange(arr){
invariant(arr.length>=2,'inputRange must have at least 2 elements');
for(var i=1;i<arr.length;++i){
invariant(
arr[i]>=arr[i-1],






'inputRange must be monotonically increasing '+arr);

}
}

function checkInfiniteRange(name,arr){
invariant(arr.length>=2,name+' must have at least 2 elements');
invariant(
arr.length!==2||arr[0]!==-Infinity||arr[1]!==Infinity,






name+'cannot be ]-infinity;+infinity[ '+arr);

}

module.exports=Interpolation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkludGVycG9sYXRpb24uanMiXSwibmFtZXMiOlsiaW52YXJpYW50IiwicmVxdWlyZSIsIm5vcm1hbGl6ZUNvbG9yIiwibGluZWFyIiwidCIsIkludGVycG9sYXRpb24iLCJjb25maWciLCJvdXRwdXRSYW5nZSIsImNyZWF0ZUludGVycG9sYXRpb25Gcm9tU3RyaW5nT3V0cHV0UmFuZ2UiLCJjaGVja0luZmluaXRlUmFuZ2UiLCJpbnB1dFJhbmdlIiwiY2hlY2tWYWxpZElucHV0UmFuZ2UiLCJsZW5ndGgiLCJlYXNpbmciLCJleHRyYXBvbGF0ZUxlZnQiLCJ1bmRlZmluZWQiLCJleHRyYXBvbGF0ZSIsImV4dHJhcG9sYXRlUmlnaHQiLCJpbnB1dCIsInJhbmdlIiwiZmluZFJhbmdlIiwiaW50ZXJwb2xhdGUiLCJpbnB1dE1pbiIsImlucHV0TWF4Iiwib3V0cHV0TWluIiwib3V0cHV0TWF4IiwicmVzdWx0IiwiSW5maW5pdHkiLCJjb2xvclRvUmdiYSIsImludDMyQ29sb3IiLCJyIiwiZyIsImIiLCJhIiwic3RyaW5nU2hhcGVSZWdleCIsIm1hcCIsImNoZWNrUGF0dGVybiIsIm91dHB1dFJhbmdlcyIsIm1hdGNoIiwiZm9yRWFjaCIsInZhbHVlIiwibnVtYmVyIiwiaSIsInB1c2giLCJpbnRlcnBvbGF0aW9ucyIsImNyZWF0ZSIsInNob3VsZFJvdW5kIiwiaXNSZ2JPclJnYmEiLCJyZXBsYWNlIiwidmFsIiwicm91bmRlZCIsIk1hdGgiLCJyb3VuZCIsIlN0cmluZyIsInN0YXJ0c1dpdGgiLCJhcnIiLCJwYXR0ZXJuIiwibmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVlBLGE7O0FBRUEsR0FBSUEsV0FBWUMsUUFBUSxvQkFBUixDQUFoQjtBQUNBLEdBQUlDLGdCQUFpQkQsUUFBUSxnQkFBUixDQUFyQjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsR0FBSUUsUUFBUyxRQUFUQSxPQUFTLENBQUNDLENBQUQsUUFBT0Es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Q0FBbEMsQ0FBcUM7QUFDbkMxQztBQUNFdUQsSUFBSWIsQ0FBSixHQUFVYSxJQUFJYixFQUFJLENBQVIsQ0FEWjs7Ozs7OztBQVFFLCtDQUFpRGEsR0FSbkQ7O0FBVUQ7QUFDRjs7QUFFRCxRQUFTOUMsbUJBQVQsQ0FBNEJnRCxJQUE1QixDQUEwQ0YsR0FBMUMsQ0FBOEQ7QUFDNUR2RCxVQUFVdUQsSUFBSTNDLE1BQUosRUFBYyxDQUF4QixDQUEyQjZDLEtBQU8sZ0NBQWxDO0FBQ0F6RDtBQUNFdUQsSUFBSTNDLE1BQUosR0FBZSxDQUFmLEVBQW9CMkMsSUFBSSxDQUFKLElBQVcsQ0FBQzVCLFFBQWhDLEVBQTRDNEIsSUFBSSxDQUFKLElBQVc1QixRQUR6RDs7Ozs7OztBQVFFOEIsS0FBTyxrQ0FBUCxDQUE0Q0YsR0FSOUM7O0FBVUQ7O0FBRURHLE9BQU9DLE9BQVAsQ0FBaUJ0RCxhQUFqQiIsImZpbGUiOiJJbnRlcnBvbGF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBJbnRlcnBvbGF0aW9uXG4gKiBAZmxvd1xuICovXG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgbm9ybWFsaXplQ29sb3IgPSByZXF1aXJlKCdub3JtYWxpemVDb2xvcicpO1xuXG50eXBlIEV4dHJhcG9sYXRlVHlwZSA9ICdleHRlbmQnIHwgJ2lkZW50aXR5JyB8ICdjbGFtcCc7XG5cbmV4cG9ydCB0eXBlIEludGVycG9sYXRpb25Db25maWdUeXBlID0ge1xuICBpbnB1dFJhbmdlOiBBcnJheTxudW1iZXI+LFxuICAvKiAkRmxvd0ZpeE1lKD49MC4zOC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiLHJlYWN0X25hdGl2ZV9vc3MpIC0gRmxvdyBlcnJvclxuICAgKiBkZXRlY3RlZCBkdXJpbmcgdGhlIGRlcGxveW1lbnQgb2YgdjAuMzguMC4gVG8gc2VlIHRoZSBlcnJvciwgcmVtb3ZlIHRoaXNcbiAgICogY29tbWVudCBhbmQgcnVuIGZsb3dcbiAgICovXG4gIG91dHB1dFJhbmdlOiAoQXJyYXk8bnVtYmVyPiB8IEFycmF5PHN0cmluZz4pLFxuICBlYXNpbmc/OiAoKGlucHV0OiBudW1iZXIpID0+IG51bWJlciksXG4gIGV4dHJhcG9sYXRlPzogRXh0cmFwb2xhdGVUeXBlLFxuICBleHRyYXBvbGF0ZUxlZnQ/OiBFeHRyYXBvbGF0ZVR5cGUsXG4gIGV4dHJhcG9sYXRlUmlnaHQ/OiBFeHRyYXBvbGF0ZVR5cGUsXG59O1xuXG52YXIgbGluZWFyID0gKHQpID0+IHQ7XG5cbi8qKlxuICogVmVyeSBoYW5keSBoZWxwZXIgdG8gbWFwIGlucHV0IHJhbmdlcyB0byBvdXRwdXQgcmFuZ2VzIHdpdGggYW4gZWFzaW5nXG4gKiBmdW5jdGlvbiBhbmQgY3VzdG9tIGJlaGF2aW9yIG91dHNpZGUgb2YgdGhlIHJhbmdlcy5cbiAqL1xuY2xhc3MgSW50ZXJwb2xhdGlvbiB7XG4gIHN0YXRpYyBjcmVhdGUoY29uZmlnOiBJbnRlcnBvbGF0aW9uQ29uZmlnVHlwZSk6IChpbnB1dDogbnVtYmVyKSA9PiBudW1iZXIgfCBzdHJpbmcge1xuXG4gICAgaWYgKGNvbmZpZy5vdXRwdXRSYW5nZSAmJiB0eXBlb2YgY29uZmlnLm91dHB1dFJhbmdlWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIGNyZWF0ZUludGVycG9sYXRpb25Gcm9tU3RyaW5nT3V0cHV0UmFuZ2UoY29uZmlnKTtcbiAgICB9XG5cbiAgICB2YXIgb3V0cHV0UmFuZ2U6IEFycmF5PG51bWJlcj4gPSAoY29uZmlnLm91dHB1dFJhbmdlOiBhbnkpO1xuICAgIGNoZWNrSW5maW5pdGVSYW5nZSgnb3V0cHV0UmFuZ2UnLCBvdXRwdXRSYW5nZSk7XG5cbiAgICB2YXIgaW5wdXRSYW5nZSA9IGNvbmZpZy5pbnB1dFJhbmdlO1xuICAgIGNoZWNrSW5maW5pdGVSYW5nZSgnaW5wdXRSYW5nZScsIGlucHV0UmFuZ2UpO1xuICAgIGNoZWNrVmFsaWRJbnB1dFJhbmdlKGlucHV0UmFuZ2UpO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgaW5wdXRSYW5nZS5sZW5ndGggPT09IG91dHB1dFJhbmdlLmxlbmd0aCxcbiAgICAgICdpbnB1dFJhbmdlICgnICsgaW5wdXRSYW5nZS5sZW5ndGggKyAnKSBhbmQgb3V0cHV0UmFuZ2UgKCcgK1xuICAgICAgb3V0cHV0UmFuZ2UubGVuZ3RoICsgJykgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCdcbiAgICApO1xuXG4gICAgdmFyIGVhc2luZyA9IGNvbmZpZy5lYXNpbmcgfHwgbGluZWFyO1xuXG4gICAgdmFyIGV4dHJhcG9sYXRlTGVmdDogRXh0cmFwb2xhdGVUeXBlID0gJ2V4dGVuZCc7XG4gICAgaWYgKGNvbmZpZy5leHRyYXBvbGF0ZUxlZnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZXh0cmFwb2xhdGVMZWZ0ID0gY29uZmlnLmV4dHJhcG9sYXRlTGVmdDtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5leHRyYXBvbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBleHRyYXBvbGF0ZUxlZnQgPSBjb25maWcuZXh0cmFwb2xhdGU7XG4gICAgfVxuXG4gICAgdmFyIGV4dHJhcG9sYXRlUmlnaHQ6IEV4dHJhcG9sYXRlVHlwZSA9ICdleHRlbmQnO1xuICAgIGlmIChjb25maWcuZXh0cmFwb2xhdGVSaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBleHRyYXBvbGF0ZVJpZ2h0ID0gY29uZmlnLmV4dHJhcG9sYXRlUmlnaHQ7XG4gICAgfSBlbHNlIGlmIChjb25maWcuZXh0cmFwb2xhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZXh0cmFwb2xhdGVSaWdodCA9IGNvbmZpZy5leHRyYXBvbGF0ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGlucHV0KSA9PiB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicsXG4gICAgICAgICdDYW5ub3QgaW50ZXJwb2xhdGlvbiBhbiBpbnB1dCB3aGljaCBpcyBub3QgYSBudW1iZXInXG4gICAgICApO1xuXG4gICAgICB2YXIgcmFuZ2UgPSBmaW5kUmFuZ2UoaW5wdXQsIGlucHV0UmFuZ2UpO1xuICAgICAgcmV0dXJuIGludGVycG9sYXRlKFxuICAgICAgICBpbnB1dCxcbiAgICAgICAgaW5wdXRSYW5nZVtyYW5nZV0sXG4gICAgICAgIGlucHV0UmFuZ2VbcmFuZ2UgKyAxXSxcbiAgICAgICAgb3V0cHV0UmFuZ2VbcmFuZ2VdLFxuICAgICAgICBvdXRwdXRSYW5nZVtyYW5nZSArIDFdLFxuICAgICAgICBlYXNpbmcsXG4gICAgICAgIGV4dHJhcG9sYXRlTGVmdCxcbiAgICAgICAgZXh0cmFwb2xhdGVSaWdodCxcbiAgICAgICk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZShcbiAgaW5wdXQ6IG51bWJlcixcbiAgaW5wdXRNaW46IG51bWJlcixcbiAgaW5wdXRNYXg6IG51bWJlcixcbiAgb3V0cHV0TWluOiBudW1iZXIsXG4gIG91dHB1dE1heDogbnVtYmVyLFxuICBlYXNpbmc6ICgoaW5wdXQ6IG51bWJlcikgPT4gbnVtYmVyKSxcbiAgZXh0cmFwb2xhdGVMZWZ0OiBFeHRyYXBvbGF0ZVR5cGUsXG4gIGV4dHJhcG9sYXRlUmlnaHQ6IEV4dHJhcG9sYXRlVHlwZSxcbikge1xuICB2YXIgcmVzdWx0ID0gaW5wdXQ7XG5cbiAgLy8gRXh0cmFwb2xhdGVcbiAgaWYgKHJlc3VsdCA8IGlucHV0TWluKSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlTGVmdCA9PT0gJ2lkZW50aXR5Jykge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2UgaWYgKGV4dHJhcG9sYXRlTGVmdCA9PT0gJ2NsYW1wJykge1xuICAgICAgcmVzdWx0ID0gaW5wdXRNaW47XG4gICAgfSBlbHNlIGlmIChleHRyYXBvbGF0ZUxlZnQgPT09ICdleHRlbmQnKSB7XG4gICAgICAvLyBub29wXG4gICAgfVxuICB9XG5cbiAgaWYgKHJlc3VsdCA+IGlucHV0TWF4KSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlUmlnaHQgPT09ICdpZGVudGl0eScpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIGlmIChleHRyYXBvbGF0ZVJpZ2h0ID09PSAnY2xhbXAnKSB7XG4gICAgICByZXN1bHQgPSBpbnB1dE1heDtcbiAgICB9IGVsc2UgaWYgKGV4dHJhcG9sYXRlUmlnaHQgPT09ICdleHRlbmQnKSB7XG4gICAgICAvLyBub29wXG4gICAgfVxuICB9XG5cbiAgaWYgKG91dHB1dE1pbiA9PT0gb3V0cHV0TWF4KSB7XG4gICAgcmV0dXJuIG91dHB1dE1pbjtcbiAgfVxuXG4gIGlmIChpbnB1dE1pbiA9PT0gaW5wdXRNYXgpIHtcbiAgICBpZiAoaW5wdXQgPD0gaW5wdXRNaW4pIHtcbiAgICAgIHJldHVybiBvdXRwdXRNaW47XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRNYXg7XG4gIH1cblxuICAvLyBJbnB1dCBSYW5nZVxuICBpZiAoaW5wdXRNaW4gPT09IC1JbmZpbml0eSkge1xuICAgIHJlc3VsdCA9IC1yZXN1bHQ7XG4gIH0gZWxzZSBpZiAoaW5wdXRNYXggPT09IEluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0IC0gaW5wdXRNaW47XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHJlc3VsdCAtIGlucHV0TWluKSAvIChpbnB1dE1heCAtIGlucHV0TWluKTtcbiAgfVxuXG4gIC8vIEVhc2luZ1xuICByZXN1bHQgPSBlYXNpbmcocmVzdWx0KTtcblxuICAvLyBPdXRwdXQgUmFuZ2VcbiAgaWYgKG91dHB1dE1pbiA9PT0gLUluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gLXJlc3VsdDtcbiAgfSBlbHNlIGlmIChvdXRwdXRNYXggPT09IEluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICsgb3V0cHV0TWluO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9IHJlc3VsdCAqIChvdXRwdXRNYXggLSBvdXRwdXRNaW4pICsgb3V0cHV0TWluO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gY29sb3JUb1JnYmEoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHZhciBpbnQzMkNvbG9yID0gbm9ybWFsaXplQ29sb3IoaW5wdXQpO1xuICBpZiAoaW50MzJDb2xvciA9PT0gbnVsbCkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIGludDMyQ29sb3IgPSBpbnQzMkNvbG9yIHx8IDA7XG5cbiAgdmFyIHIgPSAoaW50MzJDb2xvciAmIDB4ZmYwMDAwMDApID4+PiAyNDtcbiAgdmFyIGcgPSAoaW50MzJDb2xvciAmIDB4MDBmZjAwMDApID4+PiAxNjtcbiAgdmFyIGIgPSAoaW50MzJDb2xvciAmIDB4MDAwMGZmMDApID4+PiA4O1xuICB2YXIgYSA9IChpbnQzMkNvbG9yICYgMHgwMDAwMDBmZikgLyAyNTU7XG5cbiAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YX0pYDtcbn1cblxudmFyIHN0cmluZ1NoYXBlUmVnZXggPSAvWzAtOVxcLi1dKy9nO1xuXG4vKipcbiAqIFN1cHBvcnRzIHN0cmluZyBzaGFwZXMgYnkgZXh0cmFjdGluZyBudW1iZXJzIHNvIG5ldyB2YWx1ZXMgY2FuIGJlIGNvbXB1dGVkLFxuICogYW5kIHJlY29tYmluZXMgdGhvc2UgdmFsdWVzIGludG8gbmV3IHN0cmluZ3Mgb2YgdGhlIHNhbWUgc2hhcGUuICBTdXBwb3J0c1xuICogdGhpbmdzIGxpa2U6XG4gKlxuICogICByZ2JhKDEyMywgNDIsIDk5LCAwLjM2KSAvLyBjb2xvcnNcbiAqICAgLTQ1ZGVnICAgICAgICAgICAgICAgICAgLy8gdmFsdWVzIHdpdGggdW5pdHNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW50ZXJwb2xhdGlvbkZyb21TdHJpbmdPdXRwdXRSYW5nZShcbiAgY29uZmlnOiBJbnRlcnBvbGF0aW9uQ29uZmlnVHlwZSxcbik6IChpbnB1dDogbnVtYmVyKSA9PiBzdHJpbmcge1xuICB2YXIgb3V0cHV0UmFuZ2U6IEFycmF5PHN0cmluZz4gPSAoY29uZmlnLm91dHB1dFJhbmdlOiBhbnkpO1xuICBpbnZhcmlhbnQob3V0cHV0UmFuZ2UubGVuZ3RoID49IDIsICdCYWQgb3V0cHV0IHJhbmdlJyk7XG4gIG91dHB1dFJhbmdlID0gb3V0cHV0UmFuZ2UubWFwKGNvbG9yVG9SZ2JhKTtcbiAgY2hlY2tQYXR0ZXJuKG91dHB1dFJhbmdlKTtcblxuICAvLyBbJ3JnYmEoMCwgMTAwLCAyMDAsIDApJywgJ3JnYmEoNTAsIDE1MCwgMjUwLCAwLjUpJ11cbiAgLy8gLT5cbiAgLy8gW1xuICAvLyAgIFswLCA1MF0sXG4gIC8vICAgWzEwMCwgMTUwXSxcbiAgLy8gICBbMjAwLCAyNTBdLFxuICAvLyAgIFswLCAwLjVdLFxuICAvLyBdXG4gIC8qICRGbG93Rml4TWUoPj0wLjE4LjApOiBgb3V0cHV0UmFuZ2VbMF0ubWF0Y2goKWAgY2FuIHJldHVybiBgbnVsbGAuIE5lZWQgdG9cbiAgICogZ3VhcmQgYWdhaW5zdCB0aGlzIHBvc3NpYmlsaXR5LlxuICAgKi9cbiAgdmFyIG91dHB1dFJhbmdlcyA9IG91dHB1dFJhbmdlWzBdLm1hdGNoKHN0cmluZ1NoYXBlUmVnZXgpLm1hcCgoKSA9PiBbXSk7XG4gIG91dHB1dFJhbmdlLmZvckVhY2godmFsdWUgPT4ge1xuICAgIC8qICRGbG93Rml4TWUoPj0wLjE4LjApOiBgdmFsdWUubWF0Y2goKWAgY2FuIHJldHVybiBgbnVsbGAuIE5lZWQgdG8gZ3VhcmRcbiAgICAgKiBhZ2FpbnN0IHRoaXMgcG9zc2liaWxpdHkuXG4gICAgICovXG4gICAgdmFsdWUubWF0Y2goc3RyaW5nU2hhcGVSZWdleCkuZm9yRWFjaCgobnVtYmVyLCBpKSA9PiB7XG4gICAgICBvdXRwdXRSYW5nZXNbaV0ucHVzaCgrbnVtYmVyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyogJEZsb3dGaXhNZSg+PTAuMTguMCk6IGBvdXRwdXRSYW5nZVswXS5tYXRjaCgpYCBjYW4gcmV0dXJuIGBudWxsYC4gTmVlZCB0b1xuICAgKiBndWFyZCBhZ2FpbnN0IHRoaXMgcG9zc2liaWxpdHkuXG4gICAqL1xuICB2YXIgaW50ZXJwb2xhdGlvbnMgPSBvdXRwdXRSYW5nZVswXS5tYXRjaChzdHJpbmdTaGFwZVJlZ2V4KS5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgcmV0dXJuIEludGVycG9sYXRpb24uY3JlYXRlKHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIG91dHB1dFJhbmdlOiBvdXRwdXRSYW5nZXNbaV0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHJnYmEgcmVxdWlyZXMgdGhhdCB0aGUgcixnLGIgYXJlIGludGVnZXJzLi4uLiBzbyB3ZSB3YW50IHRvIHJvdW5kIHRoZW0sIGJ1dCB3ZSAqZG9udCogd2FudCB0b1xuICAvLyByb3VuZCB0aGUgb3BhY2l0eSAoNHRoIGNvbHVtbikuXG4gIGNvbnN0IHNob3VsZFJvdW5kID0gaXNSZ2JPclJnYmEob3V0cHV0UmFuZ2VbMF0pO1xuXG4gIHJldHVybiAoaW5wdXQpID0+IHtcbiAgICB2YXIgaSA9IDA7XG4gICAgLy8gJ3JnYmEoMCwgMTAwLCAyMDAsIDApJ1xuICAgIC8vIC0+XG4gICAgLy8gJ3JnYmEoJHtpbnRlcnBvbGF0aW9uc1swXShpbnB1dCl9LCAke2ludGVycG9sYXRpb25zWzFdKGlucHV0KX0sIC4uLidcbiAgICByZXR1cm4gb3V0cHV0UmFuZ2VbMF0ucmVwbGFjZShzdHJpbmdTaGFwZVJlZ2V4LCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWwgPSAraW50ZXJwb2xhdGlvbnNbaSsrXShpbnB1dCk7XG4gICAgICBjb25zdCByb3VuZGVkID0gc2hvdWxkUm91bmQgJiYgaSA8IDQgPyBNYXRoLnJvdW5kKHZhbCkgOiBNYXRoLnJvdW5kKHZhbCAqIDEwMDApIC8gMTAwMDtcbiAgICAgIHJldHVybiBTdHJpbmcocm91bmRlZCk7XG4gICAgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzUmdiT3JSZ2JhKHJhbmdlKSB7XG4gIHJldHVybiB0eXBlb2YgcmFuZ2UgPT09ICdzdHJpbmcnICYmIHJhbmdlLnN0YXJ0c1dpdGgoJ3JnYicpO1xufVxuXG5mdW5jdGlvbiBjaGVja1BhdHRlcm4oYXJyOiBBcnJheTxzdHJpbmc+KSB7XG4gIHZhciBwYXR0ZXJuID0gYXJyWzBdLnJlcGxhY2Uoc3RyaW5nU2hhcGVSZWdleCwgJycpO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIGludmFyaWFudChcbiAgICAgIHBhdHRlcm4gPT09IGFycltpXS5yZXBsYWNlKHN0cmluZ1NoYXBlUmVnZXgsICcnKSxcbiAgICAgICdpbnZhbGlkIHBhdHRlcm4gJyArIGFyclswXSArICcgYW5kICcgKyBhcnJbaV0sXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kUmFuZ2UoaW5wdXQ6IG51bWJlciwgaW5wdXRSYW5nZTogQXJyYXk8bnVtYmVyPikge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGlucHV0UmFuZ2UubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgaWYgKGlucHV0UmFuZ2VbaV0gPj0gaW5wdXQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaSAtIDE7XG59XG5cbmZ1bmN0aW9uIGNoZWNrVmFsaWRJbnB1dFJhbmdlKGFycjogQXJyYXk8bnVtYmVyPikge1xuICBpbnZhcmlhbnQoYXJyLmxlbmd0aCA+PSAyLCAnaW5wdXRSYW5nZSBtdXN0IGhhdmUgYXQgbGVhc3QgMiBlbGVtZW50cycpO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIGludmFyaWFudChcbiAgICAgIGFycltpXSA+PSBhcnJbaSAtIDFdLFxuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuMTMuMCkgLSBJbiB0aGUgYWRkaXRpb24gZXhwcmVzc2lvbiBiZWxvdyB0aGlzIGNvbW1lbnQsXG4gICAgICAgKiBvbmUgb3IgYm90aCBvZiB0aGUgb3BlcmFuZHMgbWF5IGJlIHNvbWV0aGluZyB0aGF0IGRvZXNuJ3QgY2xlYW5seVxuICAgICAgICogY29udmVydCB0byBhIHN0cmluZywgbGlrZSB1bmRlZmluZWQsIG51bGwsIGFuZCBvYmplY3QsIGV0Yy4gSWYgeW91IHJlYWxseVxuICAgICAgICogbWVhbiB0aGlzIGltcGxpY2l0IHN0cmluZyBjb252ZXJzaW9uLCB5b3UgY2FuIGRvIHNvbWV0aGluZyBsaWtlXG4gICAgICAgKiBTdHJpbmcobXlUaGluZylcbiAgICAgICAqL1xuICAgICAgJ2lucHV0UmFuZ2UgbXVzdCBiZSBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgJyArIGFyclxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tJbmZpbml0ZVJhbmdlKG5hbWU6IHN0cmluZywgYXJyOiBBcnJheTxudW1iZXI+KSB7XG4gIGludmFyaWFudChhcnIubGVuZ3RoID49IDIsIG5hbWUgKyAnIG11c3QgaGF2ZSBhdCBsZWFzdCAyIGVsZW1lbnRzJyk7XG4gIGludmFyaWFudChcbiAgICBhcnIubGVuZ3RoICE9PSAyIHx8IGFyclswXSAhPT0gLUluZmluaXR5IHx8IGFyclsxXSAhPT0gSW5maW5pdHksXG4gICAgLyogJEZsb3dGaXhNZSg+PTAuMTMuMCkgLSBJbiB0aGUgYWRkaXRpb24gZXhwcmVzc2lvbiBiZWxvdyB0aGlzIGNvbW1lbnQsXG4gICAgICogb25lIG9yIGJvdGggb2YgdGhlIG9wZXJhbmRzIG1heSBiZSBzb21ldGhpbmcgdGhhdCBkb2Vzbid0IGNsZWFubHkgY29udmVydFxuICAgICAqIHRvIGEgc3RyaW5nLCBsaWtlIHVuZGVmaW5lZCwgbnVsbCwgYW5kIG9iamVjdCwgZXRjLiBJZiB5b3UgcmVhbGx5IG1lYW5cbiAgICAgKiB0aGlzIGltcGxpY2l0IHN0cmluZyBjb252ZXJzaW9uLCB5b3UgY2FuIGRvIHNvbWV0aGluZyBsaWtlXG4gICAgICogU3RyaW5nKG15VGhpbmcpXG4gICAgICovXG4gICAgbmFtZSArICdjYW5ub3QgYmUgXS1pbmZpbml0eTsraW5maW5pdHlbICcgKyBhcnJcbiAgKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcnBvbGF0aW9uO1xuIl19