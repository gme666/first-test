1decdb9fa25eaf7ec5adbd0ed3d1cfce
Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};
























var _react=require('react');var _react2=_interopRequireDefault(_react);


var _reactNative=require('react-native');








var _Actions=require('./Actions');var _Actions2=_interopRequireDefault(_Actions);
var _menu_burger=require('./menu_burger.png');var _menu_burger2=_interopRequireDefault(_menu_burger);
var _back_chevron=require('./back_chevron.png');var _back_chevron2=_interopRequireDefault(_back_chevron);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var styles=_reactNative.StyleSheet.create({
title:{
textAlign:'center',
color:'#0A0A0A',
fontSize:18,
width:180,
alignSelf:'center'},

titleWrapper:_extends({
marginTop:10,
position:'absolute'},
_reactNative.Platform.select({
ios:{
top:20},

android:{
top:5}}),{


left:0,
right:0}),

header:_extends({
backgroundColor:'#EFEFF2',
paddingTop:0,
top:0},
_reactNative.Platform.select({
ios:{
height:64},

android:{
height:54}}),{


right:0,
left:0,
borderBottomWidth:0.5,
borderBottomColor:'#828287',
position:'absolute'}),

backButton:_extends({
height:37,
position:'absolute'},
_reactNative.Platform.select({
ios:{
top:22},

android:{
top:10}}),{


left:2,
padding:8,
flexDirection:'row'}),

rightButton:_extends({
height:37,
position:'absolute'},
_reactNative.Platform.select({
ios:{
top:22},

android:{
top:10}}),{


right:2,
padding:8}),

leftButton:_extends({
height:37,
position:'absolute'},
_reactNative.Platform.select({
ios:{
top:20},

android:{
top:8}}),{


left:2,
padding:8}),

barRightButtonText:{
color:'rgb(0, 122, 255)',
textAlign:'right',
fontSize:17},

barBackButtonText:{
color:'rgb(0, 122, 255)',
textAlign:'left',
fontSize:17,
paddingLeft:6},

barLeftButtonText:{
color:'rgb(0, 122, 255)',
textAlign:'left',
fontSize:17},

backButtonImage:{
width:13,
height:21},

defaultImageStyle:{
height:24,
resizeMode:'contain'}});



var propTypes={
navigationState:_react.PropTypes.object,
backButtonImage:_reactNative.Image.propTypes.source,
wrapBy:_react.PropTypes.any,
component:_react.PropTypes.any,
backButtonTextStyle:_reactNative.Text.propTypes.style,
leftButtonStyle:_reactNative.View.propTypes.style,
leftButtonIconStyle:_reactNative.Image.propTypes.style,
getTitle:_react.PropTypes.func,
titleWrapperStyle:_reactNative.Text.propTypes.style,
titleStyle:_reactNative.Text.propTypes.style,
titleOpacity:_react.PropTypes.number,
titleProps:_react.PropTypes.any,
position:_react.PropTypes.object,
navigationBarStyle:_reactNative.View.propTypes.style,
navigationBarBackgroundImage:_reactNative.Image.propTypes.source,
renderTitle:_react.PropTypes.any};


var contextTypes={
drawer:_react.PropTypes.object};


var defaultProps={
drawerImage:_menu_burger2.default,
backButtonImage:_back_chevron2.default,
titleOpacity:1};var


NavBar=function(_React$Component){_inherits(NavBar,_React$Component);

function NavBar(props){_classCallCheck(this,NavBar);var _this=_possibleConstructorReturn(this,(NavBar.__proto__||Object.getPrototypeOf(NavBar)).call(this,
props));

_this.renderRightButton=_this.renderRightButton.bind(_this);
_this.renderBackButton=_this.renderBackButton.bind(_this);
_this.renderLeftButton=_this.renderLeftButton.bind(_this);
_this.renderTitle=_this.renderTitle.bind(_this);return _this;
}_createClass(NavBar,[{key:'renderBackButton',value:function renderBackButton()

{
var state=this.props.navigationState;
var childState=state.children[state.index];
var BackButton=childState.component&&childState.component.backButton||state.backButton||
childState.backButton;
var textButtonStyle=[
styles.barBackButtonText,
this.props.backButtonTextStyle,
state.backButtonTextStyle,
childState.backButtonTextStyle];

var style=[
styles.backButton,
this.props.leftButtonStyle,
state.leftButtonStyle,
childState.leftButtonStyle];


if(state.index===0&&(!state.parentIndex||state.parentIndex===0)){
return null;
}

if(BackButton){
return(
_react2.default.createElement(BackButton,_extends({
testID:'backNavButton',
textButtonStyle:textButtonStyle},
childState,{
style:style})));


}
var buttonImage=childState.backButtonImage||
state.backButtonImage||this.props.backButtonImage;
var onPress=childState.onBack||childState.component.onBack;
if(onPress){
onPress=onPress.bind(null,state);
}else{
onPress=_Actions2.default.pop;
}

var text=childState.backTitle?
_react2.default.createElement(_reactNative.Text,{style:textButtonStyle},
childState.backTitle):

null;

return(
_react2.default.createElement(_reactNative.TouchableOpacity,{
testID:'backNavButton',
style:style,
onPress:onPress},

buttonImage&&!childState.hideBackImage&&
_react2.default.createElement(_reactNative.Image,{
source:buttonImage,
style:[
styles.backButtonImage,
this.props.leftButtonIconStyle,
state.barButtonIconStyle,
state.leftButtonIconStyle,
childState.leftButtonIconStyle]}),



text));


}},{key:'renderRightButton',value:function renderRightButton(

navProps){
var self=this;
function tryRender(state,wrapBy){
if(!state){
return null;
}
var rightTitle=state.getRightTitle?state.getRightTitle(navProps):state.rightTitle;

var textStyle=[styles.barRightButtonText,self.props.rightButtonTextStyle,
state.rightButtonTextStyle];
var style=[styles.rightButton,self.props.rightButtonStyle,state.rightButtonStyle];
if(state.rightButton){
var Button=state.rightButton;
if(wrapBy){
Button=wrapBy(Button);
}
return(
_react2.default.createElement(Button,_extends({},
self.props,
state,{
key:'rightNavBarBtn',
testID:'rightNavButton',
style:style,
textButtonStyle:textStyle})));


}
if(state.onRight&&(rightTitle||state.rightButtonImage)){
var onPress=state.onRight.bind(null,state);
return(
_react2.default.createElement(_reactNative.TouchableOpacity,{
key:'rightNavBarBtn',
testID:'rightNavButton',
style:style,
onPress:onPress},

rightTitle&&
_react2.default.createElement(_reactNative.Text,{style:textStyle},
rightTitle),


state.rightButtonImage&&
_react2.default.createElement(_reactNative.View,{style:{flex:1,justifyContent:'center',alignItems:'flex-end'}},
_react2.default.createElement(_reactNative.Image,{
source:state.rightButtonImage,
style:state.rightButtonIconStyle}))));





}
if(!!state.onRight^!!(typeof rightTitle!=='undefined'||
typeof state.rightButtonImage!=='undefined')){
console.warn('Both onRight and rightTitle/rightButtonImage\n            must be specified for the scene: '+

state.name);

}
return null;
}
return tryRender(this.props.component,this.props.wrapBy)||tryRender(this.props);
}},{key:'renderLeftButton',value:function renderLeftButton(

navProps){
var self=this;
var drawer=this.context.drawer;
function tryRender(state,wrapBy){
var onPress=state.onLeft;
var buttonImage=state.leftButtonImage;
var menuIcon=state.drawerIcon;
var style=[styles.leftButton,self.props.leftButtonStyle,state.leftButtonStyle];
var textStyle=[styles.barLeftButtonText,self.props.leftButtonTextStyle,
state.leftButtonTextStyle];
var leftButtonStyle=[styles.defaultImageStyle,state.leftButtonIconStyle];
var leftTitle=state.getLeftTitle?state.getLeftTitle(navProps):state.leftTitle;

if(state.leftButton){
var Button=state.leftButton;
if(wrapBy){
Button=wrapBy(Button);
}
return(
_react2.default.createElement(Button,_extends({},
self.props,
state,{
key:'leftNavBarBtn',
testID:'leftNavButton',
style:style,
textStyle:textStyle})));


}

if(!onPress&&!!drawer&&typeof drawer.toggle==='function'){
buttonImage=state.drawerImage;
if(buttonImage||menuIcon){
onPress=drawer.toggle;
}
if(!menuIcon){
menuIcon=
_react2.default.createElement(_reactNative.Image,{
source:buttonImage,
style:leftButtonStyle});


}
}

if(onPress&&(leftTitle||buttonImage)){
onPress=onPress.bind(null,state);
return(
_react2.default.createElement(_reactNative.TouchableOpacity,{
key:'leftNavBarBtn',
testID:'leftNavButton',
style:style,
onPress:onPress},

leftTitle&&
_react2.default.createElement(_reactNative.Text,{style:textStyle},
leftTitle),


buttonImage&&
_react2.default.createElement(_reactNative.View,{style:{flex:1,justifyContent:'center',alignItems:'flex-start'}},
menuIcon||_react2.default.createElement(_reactNative.Image,{
source:buttonImage,
style:state.leftButtonIconStyle||styles.defaultImageStyle}))));






}
if(!!state.onLeft^!!(leftTitle||buttonImage)){
console.warn('Both onLeft and leftTitle/leftButtonImage\n            must be specified for the scene: '+

state.name);

}
return null;
}
return tryRender(this.props.component,this.props.wrapBy)||tryRender(this.props);
}},{key:'renderTitle',value:function renderTitle(

childState,index){
var title=this.props.getTitle?this.props.getTitle(childState):childState.title;
if(title===undefined&&childState.component&&childState.component.title){
title=childState.component.title;
}
if(typeof title==='function'){
title=title(childState);
}
return(
_react2.default.createElement(_reactNative.Animated.View,{
key:childState.key,
style:[
styles.titleWrapper,
this.props.titleWrapperStyle]},


_react2.default.createElement(_reactNative.Animated.Text,_extends({
lineBreakMode:'tail',
numberOfLines:1},
this.props.titleProps,{
style:[
styles.title,
this.props.titleStyle,
this.props.navigationState.titleStyle,
childState.titleStyle,
{
opacity:this.props.position.interpolate({
inputRange:[index-1,index,index+1],
outputRange:[0,this.props.titleOpacity,0]}),

left:this.props.position.interpolate({
inputRange:[index-1,index+1],
outputRange:[200,-200]}),

right:this.props.position.interpolate({
inputRange:[index-1,index+1],
outputRange:[-200,200]})}]}),




title)));



}},{key:'render',value:function render()

{
var state=this.props.navigationState;
var selected=state.children[state.index];
while({}.hasOwnProperty.call(selected,'children')){
state=selected;
selected=selected.children[selected.index];
}
var navProps=_extends({},this.props,selected);

var wrapByStyle=function wrapByStyle(component,wrapStyle){
if(!component){return null;}
return function(props){return _react2.default.createElement(_reactNative.View,{style:wrapStyle},component(props));};
};

var leftButtonStyle=[styles.leftButton,{alignItems:'flex-start'}];
var rightButtonStyle=[styles.rightButton,{alignItems:'flex-end'}];

var renderLeftButton=wrapByStyle(selected.renderLeftButton,leftButtonStyle)||
wrapByStyle(selected.component.renderLeftButton,leftButtonStyle)||
this.renderLeftButton;
var renderRightButton=wrapByStyle(selected.renderRightButton,rightButtonStyle)||
wrapByStyle(selected.component.renderRightButton,rightButtonStyle)||
this.renderRightButton;
var renderBackButton=wrapByStyle(selected.renderBackButton,leftButtonStyle)||
wrapByStyle(selected.component.renderBackButton,leftButtonStyle)||
this.renderBackButton;
var renderTitle=selected.renderTitle||
selected.component.renderTitle||
this.props.renderTitle;
var navigationBarBackgroundImage=this.props.navigationBarBackgroundImage||
state.navigationBarBackgroundImage;
var contents=
_react2.default.createElement(_reactNative.View,null,
renderTitle?renderTitle(navProps):state.children.map(this.renderTitle,this),
renderBackButton(navProps)||renderLeftButton(navProps),
renderRightButton(navProps));


return(
_react2.default.createElement(_reactNative.Animated.View,{
style:[
styles.header,
this.props.navigationBarStyle,
state.navigationBarStyle,
selected.navigationBarStyle]},


navigationBarBackgroundImage?
_react2.default.createElement(_reactNative.Image,{source:navigationBarBackgroundImage},
contents):

contents));


}}]);return NavBar;}(_react2.default.Component);


NavBar.propTypes=propTypes;
NavBar.contextTypes=contextTypes;
NavBar.defaultProps=defaultProps;exports.default=

NavBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdkJhci5qcyJdLCJuYW1lcyI6WyJzdHlsZXMiLCJjcmVhdGUiLCJ0aXRsZSIsInRleHRBbGlnbiIsImNvbG9yIiwiZm9udFNpemUiLCJ3aWR0aCIsImFsaWduU2VsZiIsInRpdGxlV3JhcHBlciIsIm1hcmdpblRvcCIsInBvc2l0aW9uIiwic2VsZWN0IiwiaW9zIiwidG9wIiwiYW5kcm9pZCIsImxlZnQiLCJyaWdodCIsImhlYWRlciIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmdUb3AiLCJoZWlnaHQiLCJib3JkZXJCb3R0b21XaWR0aCIsImJvcmRlckJvdHRvbUNvbG9yIiwiYmFja0J1dHRvbiIsInBhZGRpbmciLCJmbGV4RGlyZWN0aW9uIiwicmlnaHRCdXR0b24iLCJsZWZ0QnV0dG9uIiwiYmFyUmlnaHRCdXR0b25UZXh0IiwiYmFyQmFja0J1dHRvblRleHQiLCJwYWRkaW5nTGVmdCIsImJhckxlZnRCdXR0b25UZXh0IiwiYmFja0J1dHRvbkltYWdlIiwiZGVmYXVsdEltYWdlU3R5bGUiLCJyZXNpemVNb2RlIiwicHJvcFR5cGVzIiwibmF2aWdhdGlvblN0YXRlIiwib2JqZWN0Iiwic291cmNlIiwid3JhcEJ5IiwiYW55IiwiY29tcG9uZW50IiwiYmFja0J1dHRvblRleHRTdHlsZSIsInN0eWxlIiwibGVmdEJ1dHRvblN0eWxlIiwibGVmdEJ1dHRvbkljb25TdHlsZSIsImdldFRpdGxlIiwiZnVuYyIsInRpdGxlV3JhcHBlclN0eWxlIiwidGl0bGVTdHlsZSIsInRpdGxlT3BhY2l0eSIsIm51bWJlciIsInRpdGxlUHJvcHMiLCJuYXZpZ2F0aW9uQmFyU3R5bGUiLCJuYXZpZ2F0aW9uQmFyQmFja2dyb3VuZEltYWdlIiwicmVuZGVyVGl0bGUiLCJjb250ZXh0VHlwZXMiLCJkcmF3ZXIiLCJkZWZhdWx0UHJvcHMiLCJkcmF3ZXJJbWFnZSIsIk5hdkJhciIsInByb3BzIiwicmVuZGVyUmlnaHRCdXR0b24iLCJiaW5kIiwicmVuZGVyQmFja0J1dHRvbiIsInJlbmRlckxlZnRCdXR0b24iLCJzdGF0ZSIsImNoaWxkU3RhdGUiLCJjaGlsZHJlbiIsImluZGV4IiwiQmFja0J1dHRvbiIsInRleHRCdXR0b25TdHlsZSIsInBhcmVudEluZGV4IiwiYnV0dG9uSW1hZ2UiLCJvblByZXNzIiwib25CYWNrIiwicG9wIiwidGV4dCIsImJhY2tUaXRsZSIsImhpZGVCYWNrSW1hZ2UiLCJiYXJCdXR0b25JY29uU3R5bGUiLCJuYXZQcm9wcyIsInNlbGYiLCJ0cnlSZW5kZXIiLCJyaWdodFRpdGxlIiwiZ2V0UmlnaHRUaXRsZSIsInRleHRTdHlsZSIsInJpZ2h0QnV0dG9uVGV4dFN0eWxlIiwicmlnaHRCdXR0b25TdHlsZSIsIkJ1dHRvbiIsIm9uUmlnaHQiLCJyaWdodEJ1dHRvbkltYWdlIiwiZmxleCIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsInJpZ2h0QnV0dG9uSWNvblN0eWxlIiwiY29uc29sZSIsIndhcm4iLCJuYW1lIiwiY29udGV4dCIsIm9uTGVmdCIsImxlZnRCdXR0b25JbWFnZSIsIm1lbnVJY29uIiwiZHJhd2VySWNvbiIsImxlZnRCdXR0b25UZXh0U3R5bGUiLCJsZWZ0VGl0bGUiLCJnZXRMZWZ0VGl0bGUiLCJ0b2dnbGUiLCJ1bmRlZmluZWQiLCJrZXkiLCJvcGFjaXR5IiwiaW50ZXJwb2xhdGUiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJzZWxlY3RlZCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIndyYXBCeVN0eWxlIiwid3JhcFN0eWxlIiwiY29udGVudHMiLCJtYXAiLCJDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QkEsNEI7OztBQUdBOzs7Ozs7Ozs7QUFTQSxrQztBQUNBLDhDO0FBQ0EsZ0Q7O0FBRUEsR0FBTUEsUUFBUyx3QkFBV0MsTUFBWCxDQUFrQjtBQUMvQkMsTUFBTztBQUNMQyxVQUFXLFFBRE47QUFFTEMsTUFBTyxTQUZGO0FBR0xDLFNBQVUsRUFITDtBQUlM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QjtBQUV2QixLQUFLb0IsZ0JBRlA7QUFHQSxHQUFNVCxhQUFjMkQsU0FBUzNELFdBQVQ7QUFDbEIyRCxTQUFTekUsU0FBVCxDQUFtQmMsV0FERDtBQUVsQixLQUFLTSxLQUFMLENBQVdOLFdBRmI7QUFHQSxHQUFNRCw4QkFBK0IsS0FBS08sS0FBTCxDQUFXUCw0QkFBWDtBQUNuQ1ksTUFBTVosNEJBRFI7QUFFQSxHQUFNaUU7QUFDSjtBQUNHaEUsWUFBY0EsWUFBWTBCLFFBQVosQ0FBZCxDQUFzQ2YsTUFBTUUsUUFBTixDQUFlb0QsR0FBZixDQUFtQixLQUFLakUsV0FBeEIsQ0FBcUMsSUFBckMsQ0FEekM7QUFFR1MsaUJBQWlCaUIsUUFBakIsR0FBOEJoQixpQkFBaUJnQixRQUFqQixDQUZqQztBQUdHbkIsa0JBQWtCbUIsUUFBbEIsQ0FISCxDQURGOzs7QUFPQTtBQUNFLG9EQUFVLElBQVY7QUFDRSxNQUFPO0FBQ0xqRixPQUFPaUIsTUFERjtBQUVMLEtBQUs0QyxLQUFMLENBQVdSLGtCQUZOO0FBR0xhLE1BQU1iLGtCQUhEO0FBSUw2RCxTQUFTN0Qsa0JBSkosQ0FEVDs7O0FBUUdDO0FBQ0Msa0RBQU8sT0FBUUEsNEJBQWY7QUFDR2lFLFFBREgsQ0FERDs7QUFJR0EsUUFaTixDQURGOzs7QUFnQkQsQyxvQkF4VWtCLGdCQUFNRSxTOzs7QUEyVTNCN0QsT0FBT3pCLFNBQVAsQ0FBbUJBLFNBQW5CO0FBQ0F5QixPQUFPSixZQUFQLENBQXNCQSxZQUF0QjtBQUNBSSxPQUFPRixZQUFQLENBQXNCQSxZQUF0QixDOztBQUVlRSxNIiwiZmlsZSI6Ik5hdkJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LCBGYWNlYm9vaywgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBGYWNlYm9vaywgSW5jLiAoXCJGYWNlYm9va1wiKSBvd25zIGFsbCByaWdodCwgdGl0bGUgYW5kIGludGVyZXN0LCBpbmNsdWRpbmdcbiAqIGFsbCBpbnRlbGxlY3R1YWwgcHJvcGVydHkgYW5kIG90aGVyIHByb3ByaWV0YXJ5IHJpZ2h0cywgaW4gYW5kIHRvIHRoZSBSZWFjdFxuICogTmF0aXZlIEN1c3RvbUNvbXBvbmVudHMgc29mdHdhcmUgKHRoZSBcIlNvZnR3YXJlXCIpLiAgU3ViamVjdCB0byB5b3VyXG4gKiBjb21wbGlhbmNlIHdpdGggdGhlc2UgdGVybXMsIHlvdSBhcmUgaGVyZWJ5IGdyYW50ZWQgYSBub24tZXhjbHVzaXZlLFxuICogd29ybGR3aWRlLCByb3lhbHR5LWZyZWUgY29weXJpZ2h0IGxpY2Vuc2UgdG8gKDEpIHVzZSBhbmQgY29weSB0aGUgU29mdHdhcmU7XG4gKiBhbmQgKDIpIHJlcHJvZHVjZSBhbmQgZGlzdHJpYnV0ZSB0aGUgU29mdHdhcmUgYXMgcGFydCBvZiB5b3VyIG93biBzb2Z0d2FyZVxuICogKFwiWW91ciBTb2Z0d2FyZVwiKS4gIEZhY2Vib29rIHJlc2VydmVzIGFsbCByaWdodHMgbm90IGV4cHJlc3NseSBncmFudGVkIHRvXG4gKiB5b3UgaW4gdGhpcyBsaWNlbnNlIGFncmVlbWVudC5cbiAqXG4gKiBUSEUgU09GVFdBUkUgQU5EIERPQ1VNRU5UQVRJT04sIElGIEFOWSwgQVJFIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgQU5ZIEVYUFJFU1NcbiAqIE9SIElNUExJRUQgV0FSUkFOVElFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVNcbiAqIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UpIEFSRSBESVNDTEFJTUVELlxuICogSU4gTk8gRVZFTlQgU0hBTEwgRkFDRUJPT0sgT1IgSVRTIEFGRklMSUFURVMsIE9GRklDRVJTLCBESVJFQ1RPUlMgT1JcbiAqIEVNUExPWUVFUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLFxuICogRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLFxuICogUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7XG4gKiBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSxcbiAqIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SXG4gKiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSEUgU09GVFdBUkUsIEVWRU4gSUZcbiAqIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiAqL1xuaW1wb3J0IFJlYWN0LCB7XG4gIFByb3BUeXBlcyxcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgUGxhdGZvcm0sXG4gIEFuaW1hdGVkLFxuICBJbWFnZSxcbiAgU3R5bGVTaGVldCxcbiAgVGV4dCxcbiAgVG91Y2hhYmxlT3BhY2l0eSxcbiAgVmlldyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4vQWN0aW9ucyc7XG5pbXBvcnQgX2RyYXdlckltYWdlIGZyb20gJy4vbWVudV9idXJnZXIucG5nJztcbmltcG9ydCBfYmFja0J1dHRvbkltYWdlIGZyb20gJy4vYmFja19jaGV2cm9uLnBuZyc7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgdGl0bGU6IHtcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgIGNvbG9yOiAnIzBBMEEwQScsXG4gICAgZm9udFNpemU6IDE4LFxuICAgIHdpZHRoOiAxODAsXG4gICAgYWxpZ25TZWxmOiAnY2VudGVyJyxcbiAgfSxcbiAgdGl0bGVXcmFwcGVyOiB7XG4gICAgbWFyZ2luVG9wOiAxMCxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAuLi5QbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgaW9zOiB7XG4gICAgICAgIHRvcDogMjAsXG4gICAgICB9LFxuICAgICAgYW5kcm9pZDoge1xuICAgICAgICB0b3A6IDUsXG4gICAgICB9LFxuICAgIH0pLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gIH0sXG4gIGhlYWRlcjoge1xuICAgIGJhY2tncm91bmRDb2xvcjogJyNFRkVGRjInLFxuICAgIHBhZGRpbmdUb3A6IDAsXG4gICAgdG9wOiAwLFxuICAgIC4uLlBsYXRmb3JtLnNlbGVjdCh7XG4gICAgICBpb3M6IHtcbiAgICAgICAgaGVpZ2h0OiA2NCxcbiAgICAgIH0sXG4gICAgICBhbmRyb2lkOiB7XG4gICAgICAgIGhlaWdodDogNTQsXG4gICAgICB9LFxuICAgIH0pLFxuICAgIHJpZ2h0OiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgYm9yZGVyQm90dG9tV2lkdGg6IDAuNSxcbiAgICBib3JkZXJCb3R0b21Db2xvcjogJyM4MjgyODcnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICB9LFxuICBiYWNrQnV0dG9uOiB7XG4gICAgaGVpZ2h0OiAzNyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAuLi5QbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgaW9zOiB7XG4gICAgICAgIHRvcDogMjIsXG4gICAgICB9LFxuICAgICAgYW5kcm9pZDoge1xuICAgICAgICB0b3A6IDEwLFxuICAgICAgfSxcbiAgICB9KSxcbiAgICBsZWZ0OiAyLFxuICAgIHBhZGRpbmc6IDgsXG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gIH0sXG4gIHJpZ2h0QnV0dG9uOiB7XG4gICAgaGVpZ2h0OiAzNyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAuLi5QbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgaW9zOiB7XG4gICAgICAgIHRvcDogMjIsXG4gICAgICB9LFxuICAgICAgYW5kcm9pZDoge1xuICAgICAgICB0b3A6IDEwLFxuICAgICAgfSxcbiAgICB9KSxcbiAgICByaWdodDogMixcbiAgICBwYWRkaW5nOiA4LFxuICB9LFxuICBsZWZ0QnV0dG9uOiB7XG4gICAgaGVpZ2h0OiAzNyxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAuLi5QbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgaW9zOiB7XG4gICAgICAgIHRvcDogMjAsXG4gICAgICB9LFxuICAgICAgYW5kcm9pZDoge1xuICAgICAgICB0b3A6IDgsXG4gICAgICB9LFxuICAgIH0pLFxuICAgIGxlZnQ6IDIsXG4gICAgcGFkZGluZzogOCxcbiAgfSxcbiAgYmFyUmlnaHRCdXR0b25UZXh0OiB7XG4gICAgY29sb3I6ICdyZ2IoMCwgMTIyLCAyNTUpJyxcbiAgICB0ZXh0QWxpZ246ICdyaWdodCcsXG4gICAgZm9udFNpemU6IDE3LFxuICB9LFxuICBiYXJCYWNrQnV0dG9uVGV4dDoge1xuICAgIGNvbG9yOiAncmdiKDAsIDEyMiwgMjU1KScsXG4gICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgZm9udFNpemU6IDE3LFxuICAgIHBhZGRpbmdMZWZ0OiA2LFxuICB9LFxuICBiYXJMZWZ0QnV0dG9uVGV4dDoge1xuICAgIGNvbG9yOiAncmdiKDAsIDEyMiwgMjU1KScsXG4gICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgZm9udFNpemU6IDE3LFxuICB9LFxuICBiYWNrQnV0dG9uSW1hZ2U6IHtcbiAgICB3aWR0aDogMTMsXG4gICAgaGVpZ2h0OiAyMSxcbiAgfSxcbiAgZGVmYXVsdEltYWdlU3R5bGU6IHtcbiAgICBoZWlnaHQ6IDI0LFxuICAgIHJlc2l6ZU1vZGU6ICdjb250YWluJyxcbiAgfSxcbn0pO1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIG5hdmlnYXRpb25TdGF0ZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgYmFja0J1dHRvbkltYWdlOiBJbWFnZS5wcm9wVHlwZXMuc291cmNlLFxuICB3cmFwQnk6IFByb3BUeXBlcy5hbnksXG4gIGNvbXBvbmVudDogUHJvcFR5cGVzLmFueSxcbiAgYmFja0J1dHRvblRleHRTdHlsZTogVGV4dC5wcm9wVHlwZXMuc3R5bGUsXG4gIGxlZnRCdXR0b25TdHlsZTogVmlldy5wcm9wVHlwZXMuc3R5bGUsXG4gIGxlZnRCdXR0b25JY29uU3R5bGU6IEltYWdlLnByb3BUeXBlcy5zdHlsZSxcbiAgZ2V0VGl0bGU6IFByb3BUeXBlcy5mdW5jLFxuICB0aXRsZVdyYXBwZXJTdHlsZTogVGV4dC5wcm9wVHlwZXMuc3R5bGUsXG4gIHRpdGxlU3R5bGU6IFRleHQucHJvcFR5cGVzLnN0eWxlLFxuICB0aXRsZU9wYWNpdHk6IFByb3BUeXBlcy5udW1iZXIsXG4gIHRpdGxlUHJvcHM6IFByb3BUeXBlcy5hbnksXG4gIHBvc2l0aW9uOiBQcm9wVHlwZXMub2JqZWN0LFxuICBuYXZpZ2F0aW9uQmFyU3R5bGU6IFZpZXcucHJvcFR5cGVzLnN0eWxlLFxuICBuYXZpZ2F0aW9uQmFyQmFja2dyb3VuZEltYWdlOiBJbWFnZS5wcm9wVHlwZXMuc291cmNlLFxuICByZW5kZXJUaXRsZTogUHJvcFR5cGVzLmFueSxcbn07XG5cbmNvbnN0IGNvbnRleHRUeXBlcyA9IHtcbiAgZHJhd2VyOiBQcm9wVHlwZXMub2JqZWN0LFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBkcmF3ZXJJbWFnZTogX2RyYXdlckltYWdlLFxuICBiYWNrQnV0dG9uSW1hZ2U6IF9iYWNrQnV0dG9uSW1hZ2UsXG4gIHRpdGxlT3BhY2l0eTogMSxcbn07XG5cbmNsYXNzIE5hdkJhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnJlbmRlclJpZ2h0QnV0dG9uID0gdGhpcy5yZW5kZXJSaWdodEJ1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyQmFja0J1dHRvbiA9IHRoaXMucmVuZGVyQmFja0J1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyTGVmdEJ1dHRvbiA9IHRoaXMucmVuZGVyTGVmdEJ1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVuZGVyVGl0bGUgPSB0aGlzLnJlbmRlclRpdGxlLmJpbmQodGhpcyk7XG4gIH1cblxuICByZW5kZXJCYWNrQnV0dG9uKCkge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wcm9wcy5uYXZpZ2F0aW9uU3RhdGU7XG4gICAgY29uc3QgY2hpbGRTdGF0ZSA9IHN0YXRlLmNoaWxkcmVuW3N0YXRlLmluZGV4XTtcbiAgICBjb25zdCBCYWNrQnV0dG9uID0gKGNoaWxkU3RhdGUuY29tcG9uZW50ICYmIGNoaWxkU3RhdGUuY29tcG9uZW50LmJhY2tCdXR0b24pIHx8IHN0YXRlLmJhY2tCdXR0b25cbiAgICAgIHx8IGNoaWxkU3RhdGUuYmFja0J1dHRvbjtcbiAgICBjb25zdCB0ZXh0QnV0dG9uU3R5bGUgPSBbXG4gICAgICBzdHlsZXMuYmFyQmFja0J1dHRvblRleHQsXG4gICAgICB0aGlzLnByb3BzLmJhY2tCdXR0b25UZXh0U3R5bGUsXG4gICAgICBzdGF0ZS5iYWNrQnV0dG9uVGV4dFN0eWxlLFxuICAgICAgY2hpbGRTdGF0ZS5iYWNrQnV0dG9uVGV4dFN0eWxlLFxuICAgIF07XG4gICAgY29uc3Qgc3R5bGUgPSBbXG4gICAgICBzdHlsZXMuYmFja0J1dHRvbixcbiAgICAgIHRoaXMucHJvcHMubGVmdEJ1dHRvblN0eWxlLFxuICAgICAgc3RhdGUubGVmdEJ1dHRvblN0eWxlLFxuICAgICAgY2hpbGRTdGF0ZS5sZWZ0QnV0dG9uU3R5bGUsXG4gICAgXTtcblxuICAgIGlmIChzdGF0ZS5pbmRleCA9PT0gMCAmJiAoIXN0YXRlLnBhcmVudEluZGV4IHx8IHN0YXRlLnBhcmVudEluZGV4ID09PSAwKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKEJhY2tCdXR0b24pIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxCYWNrQnV0dG9uXG4gICAgICAgICAgdGVzdElEPVwiYmFja05hdkJ1dHRvblwiXG4gICAgICAgICAgdGV4dEJ1dHRvblN0eWxlPXt0ZXh0QnV0dG9uU3R5bGV9XG4gICAgICAgICAgey4uLmNoaWxkU3RhdGV9XG4gICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgYnV0dG9uSW1hZ2UgPSBjaGlsZFN0YXRlLmJhY2tCdXR0b25JbWFnZSB8fFxuICAgICAgc3RhdGUuYmFja0J1dHRvbkltYWdlIHx8IHRoaXMucHJvcHMuYmFja0J1dHRvbkltYWdlO1xuICAgIGxldCBvblByZXNzID0gY2hpbGRTdGF0ZS5vbkJhY2sgfHwgY2hpbGRTdGF0ZS5jb21wb25lbnQub25CYWNrO1xuICAgIGlmIChvblByZXNzKSB7XG4gICAgICBvblByZXNzID0gb25QcmVzcy5iaW5kKG51bGwsIHN0YXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb25QcmVzcyA9IEFjdGlvbnMucG9wO1xuICAgIH1cblxuICAgIGNvbnN0IHRleHQgPSBjaGlsZFN0YXRlLmJhY2tUaXRsZSA/XG4gICAgICAoPFRleHQgc3R5bGU9e3RleHRCdXR0b25TdHlsZX0+XG4gICAgICAgIHtjaGlsZFN0YXRlLmJhY2tUaXRsZX1cbiAgICAgIDwvVGV4dD4pXG4gICAgICA6IG51bGw7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFRvdWNoYWJsZU9wYWNpdHlcbiAgICAgICAgdGVzdElEPVwiYmFja05hdkJ1dHRvblwiXG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgb25QcmVzcz17b25QcmVzc31cbiAgICAgID5cbiAgICAgICAge2J1dHRvbkltYWdlICYmICFjaGlsZFN0YXRlLmhpZGVCYWNrSW1hZ2UgJiZcbiAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgIHNvdXJjZT17YnV0dG9uSW1hZ2V9XG4gICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICBzdHlsZXMuYmFja0J1dHRvbkltYWdlLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmxlZnRCdXR0b25JY29uU3R5bGUsXG4gICAgICAgICAgICAgIHN0YXRlLmJhckJ1dHRvbkljb25TdHlsZSxcbiAgICAgICAgICAgICAgc3RhdGUubGVmdEJ1dHRvbkljb25TdHlsZSxcbiAgICAgICAgICAgICAgY2hpbGRTdGF0ZS5sZWZ0QnV0dG9uSWNvblN0eWxlLFxuICAgICAgICAgICAgXX1cbiAgICAgICAgICAvPlxuICAgICAgICB9XG4gICAgICAgIHt0ZXh0fVxuICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJSaWdodEJ1dHRvbihuYXZQcm9wcykge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIHRyeVJlbmRlcihzdGF0ZSwgd3JhcEJ5KSB7XG4gICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgcmlnaHRUaXRsZSA9IHN0YXRlLmdldFJpZ2h0VGl0bGUgPyBzdGF0ZS5nZXRSaWdodFRpdGxlKG5hdlByb3BzKSA6IHN0YXRlLnJpZ2h0VGl0bGU7XG5cbiAgICAgIGNvbnN0IHRleHRTdHlsZSA9IFtzdHlsZXMuYmFyUmlnaHRCdXR0b25UZXh0LCBzZWxmLnByb3BzLnJpZ2h0QnV0dG9uVGV4dFN0eWxlLFxuICAgICAgICBzdGF0ZS5yaWdodEJ1dHRvblRleHRTdHlsZV07XG4gICAgICBjb25zdCBzdHlsZSA9IFtzdHlsZXMucmlnaHRCdXR0b24sIHNlbGYucHJvcHMucmlnaHRCdXR0b25TdHlsZSwgc3RhdGUucmlnaHRCdXR0b25TdHlsZV07XG4gICAgICBpZiAoc3RhdGUucmlnaHRCdXR0b24pIHtcbiAgICAgICAgbGV0IEJ1dHRvbiA9IHN0YXRlLnJpZ2h0QnV0dG9uO1xuICAgICAgICBpZiAod3JhcEJ5KSB7XG4gICAgICAgICAgQnV0dG9uID0gd3JhcEJ5KEJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB7Li4uc2VsZi5wcm9wc31cbiAgICAgICAgICAgIHsuLi5zdGF0ZX1cbiAgICAgICAgICAgIGtleT17J3JpZ2h0TmF2QmFyQnRuJ31cbiAgICAgICAgICAgIHRlc3RJRD1cInJpZ2h0TmF2QnV0dG9uXCJcbiAgICAgICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgICAgIHRleHRCdXR0b25TdHlsZT17dGV4dFN0eWxlfVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUub25SaWdodCAmJiAocmlnaHRUaXRsZSB8fCBzdGF0ZS5yaWdodEJ1dHRvbkltYWdlKSkge1xuICAgICAgICBjb25zdCBvblByZXNzID0gc3RhdGUub25SaWdodC5iaW5kKG51bGwsIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8VG91Y2hhYmxlT3BhY2l0eVxuICAgICAgICAgICAga2V5PXsncmlnaHROYXZCYXJCdG4nfVxuICAgICAgICAgICAgdGVzdElEPVwicmlnaHROYXZCdXR0b25cIlxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgICAgb25QcmVzcz17b25QcmVzc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cmlnaHRUaXRsZSAmJlxuICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17dGV4dFN0eWxlfT5cbiAgICAgICAgICAgICAgICB7cmlnaHRUaXRsZX1cbiAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAge3N0YXRlLnJpZ2h0QnV0dG9uSW1hZ2UgJiZcbiAgICAgICAgICAgICAgPFZpZXcgc3R5bGU9e3sgZmxleDogMSwganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBhbGlnbkl0ZW1zOiAnZmxleC1lbmQnIH19PlxuICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgc291cmNlPXtzdGF0ZS5yaWdodEJ1dHRvbkltYWdlfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0YXRlLnJpZ2h0QnV0dG9uSWNvblN0eWxlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoKCEhc3RhdGUub25SaWdodCBeICEhKHR5cGVvZiAocmlnaHRUaXRsZSkgIT09ICd1bmRlZmluZWQnXG4gICAgICAgIHx8IHR5cGVvZiAoc3RhdGUucmlnaHRCdXR0b25JbWFnZSkgIT09ICd1bmRlZmluZWQnKSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBCb3RoIG9uUmlnaHQgYW5kIHJpZ2h0VGl0bGUvcmlnaHRCdXR0b25JbWFnZVxuICAgICAgICAgICAgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIHRoZSBzY2VuZTogJHtzdGF0ZS5uYW1lfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRyeVJlbmRlcih0aGlzLnByb3BzLmNvbXBvbmVudCwgdGhpcy5wcm9wcy53cmFwQnkpIHx8IHRyeVJlbmRlcih0aGlzLnByb3BzKTtcbiAgfVxuXG4gIHJlbmRlckxlZnRCdXR0b24obmF2UHJvcHMpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBkcmF3ZXIgPSB0aGlzLmNvbnRleHQuZHJhd2VyO1xuICAgIGZ1bmN0aW9uIHRyeVJlbmRlcihzdGF0ZSwgd3JhcEJ5KSB7XG4gICAgICBsZXQgb25QcmVzcyA9IHN0YXRlLm9uTGVmdDtcbiAgICAgIGxldCBidXR0b25JbWFnZSA9IHN0YXRlLmxlZnRCdXR0b25JbWFnZTtcbiAgICAgIGxldCBtZW51SWNvbiA9IHN0YXRlLmRyYXdlckljb247XG4gICAgICBjb25zdCBzdHlsZSA9IFtzdHlsZXMubGVmdEJ1dHRvbiwgc2VsZi5wcm9wcy5sZWZ0QnV0dG9uU3R5bGUsIHN0YXRlLmxlZnRCdXR0b25TdHlsZV07XG4gICAgICBjb25zdCB0ZXh0U3R5bGUgPSBbc3R5bGVzLmJhckxlZnRCdXR0b25UZXh0LCBzZWxmLnByb3BzLmxlZnRCdXR0b25UZXh0U3R5bGUsXG4gICAgICAgIHN0YXRlLmxlZnRCdXR0b25UZXh0U3R5bGVdO1xuICAgICAgY29uc3QgbGVmdEJ1dHRvblN0eWxlID0gW3N0eWxlcy5kZWZhdWx0SW1hZ2VTdHlsZSwgc3RhdGUubGVmdEJ1dHRvbkljb25TdHlsZV07XG4gICAgICBjb25zdCBsZWZ0VGl0bGUgPSBzdGF0ZS5nZXRMZWZ0VGl0bGUgPyBzdGF0ZS5nZXRMZWZ0VGl0bGUobmF2UHJvcHMpIDogc3RhdGUubGVmdFRpdGxlO1xuXG4gICAgICBpZiAoc3RhdGUubGVmdEJ1dHRvbikge1xuICAgICAgICBsZXQgQnV0dG9uID0gc3RhdGUubGVmdEJ1dHRvbjtcbiAgICAgICAgaWYgKHdyYXBCeSkge1xuICAgICAgICAgIEJ1dHRvbiA9IHdyYXBCeShCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgey4uLnNlbGYucHJvcHN9XG4gICAgICAgICAgICB7Li4uc3RhdGV9XG4gICAgICAgICAgICBrZXk9eydsZWZ0TmF2QmFyQnRuJ31cbiAgICAgICAgICAgIHRlc3RJRD1cImxlZnROYXZCdXR0b25cIlxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgICAgdGV4dFN0eWxlPXt0ZXh0U3R5bGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvblByZXNzICYmICEhZHJhd2VyICYmIHR5cGVvZiBkcmF3ZXIudG9nZ2xlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGJ1dHRvbkltYWdlID0gc3RhdGUuZHJhd2VySW1hZ2U7XG4gICAgICAgIGlmIChidXR0b25JbWFnZSB8fCBtZW51SWNvbikge1xuICAgICAgICAgIG9uUHJlc3MgPSBkcmF3ZXIudG9nZ2xlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWVudUljb24pIHtcbiAgICAgICAgICBtZW51SWNvbiA9IChcbiAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICBzb3VyY2U9e2J1dHRvbkltYWdlfVxuICAgICAgICAgICAgICBzdHlsZT17bGVmdEJ1dHRvblN0eWxlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvblByZXNzICYmIChsZWZ0VGl0bGUgfHwgYnV0dG9uSW1hZ2UpKSB7XG4gICAgICAgIG9uUHJlc3MgPSBvblByZXNzLmJpbmQobnVsbCwgc3RhdGUpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxUb3VjaGFibGVPcGFjaXR5XG4gICAgICAgICAgICBrZXk9eydsZWZ0TmF2QmFyQnRuJ31cbiAgICAgICAgICAgIHRlc3RJRD1cImxlZnROYXZCdXR0b25cIlxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgICAgb25QcmVzcz17b25QcmVzc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bGVmdFRpdGxlICYmXG4gICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXt0ZXh0U3R5bGV9PlxuICAgICAgICAgICAgICAgIHtsZWZ0VGl0bGV9XG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtidXR0b25JbWFnZSAmJlxuICAgICAgICAgICAgICA8VmlldyBzdHlsZT17eyBmbGV4OiAxLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JyB9fT5cbiAgICAgICAgICAgICAgICB7bWVudUljb24gfHwgPEltYWdlXG4gICAgICAgICAgICAgICAgICBzb3VyY2U9e2J1dHRvbkltYWdlfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0YXRlLmxlZnRCdXR0b25JY29uU3R5bGUgfHwgc3R5bGVzLmRlZmF1bHRJbWFnZVN0eWxlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKCghIXN0YXRlLm9uTGVmdCBeICEhKGxlZnRUaXRsZSB8fCBidXR0b25JbWFnZSkpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgQm90aCBvbkxlZnQgYW5kIGxlZnRUaXRsZS9sZWZ0QnV0dG9uSW1hZ2VcbiAgICAgICAgICAgIG11c3QgYmUgc3BlY2lmaWVkIGZvciB0aGUgc2NlbmU6ICR7c3RhdGUubmFtZX1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0cnlSZW5kZXIodGhpcy5wcm9wcy5jb21wb25lbnQsIHRoaXMucHJvcHMud3JhcEJ5KSB8fCB0cnlSZW5kZXIodGhpcy5wcm9wcyk7XG4gIH1cblxuICByZW5kZXJUaXRsZShjaGlsZFN0YXRlLCBpbmRleDpudW1iZXIpIHtcbiAgICBsZXQgdGl0bGUgPSB0aGlzLnByb3BzLmdldFRpdGxlID8gdGhpcy5wcm9wcy5nZXRUaXRsZShjaGlsZFN0YXRlKSA6IGNoaWxkU3RhdGUudGl0bGU7XG4gICAgaWYgKHRpdGxlID09PSB1bmRlZmluZWQgJiYgY2hpbGRTdGF0ZS5jb21wb25lbnQgJiYgY2hpbGRTdGF0ZS5jb21wb25lbnQudGl0bGUpIHtcbiAgICAgIHRpdGxlID0gY2hpbGRTdGF0ZS5jb21wb25lbnQudGl0bGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgKHRpdGxlKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGl0bGUgPSB0aXRsZShjaGlsZFN0YXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgIGtleT17Y2hpbGRTdGF0ZS5rZXl9XG4gICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgc3R5bGVzLnRpdGxlV3JhcHBlcixcbiAgICAgICAgICB0aGlzLnByb3BzLnRpdGxlV3JhcHBlclN0eWxlLFxuICAgICAgICBdfVxuICAgICAgPlxuICAgICAgICA8QW5pbWF0ZWQuVGV4dFxuICAgICAgICAgIGxpbmVCcmVha01vZGU9XCJ0YWlsXCJcbiAgICAgICAgICBudW1iZXJPZkxpbmVzPXsxfVxuICAgICAgICAgIHsuLi50aGlzLnByb3BzLnRpdGxlUHJvcHN9XG4gICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgIHN0eWxlcy50aXRsZSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGl0bGVTdHlsZSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMubmF2aWdhdGlvblN0YXRlLnRpdGxlU3R5bGUsXG4gICAgICAgICAgICBjaGlsZFN0YXRlLnRpdGxlU3R5bGUsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IHRoaXMucHJvcHMucG9zaXRpb24uaW50ZXJwb2xhdGUoe1xuICAgICAgICAgICAgICAgIGlucHV0UmFuZ2U6IFtpbmRleCAtIDEsIGluZGV4LCBpbmRleCArIDFdLFxuICAgICAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMCwgdGhpcy5wcm9wcy50aXRsZU9wYWNpdHksIDBdLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgbGVmdDogdGhpcy5wcm9wcy5wb3NpdGlvbi5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRSYW5nZTogW2luZGV4IC0gMSwgaW5kZXggKyAxXSxcbiAgICAgICAgICAgICAgICBvdXRwdXRSYW5nZTogWzIwMCwgLTIwMF0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICByaWdodDogdGhpcy5wcm9wcy5wb3NpdGlvbi5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRSYW5nZTogW2luZGV4IC0gMSwgaW5kZXggKyAxXSxcbiAgICAgICAgICAgICAgICBvdXRwdXRSYW5nZTogWy0yMDAsIDIwMF0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdfVxuICAgICAgICA+XG4gICAgICAgICAge3RpdGxlfVxuICAgICAgICA8L0FuaW1hdGVkLlRleHQ+XG4gICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLnByb3BzLm5hdmlnYXRpb25TdGF0ZTtcbiAgICBsZXQgc2VsZWN0ZWQgPSBzdGF0ZS5jaGlsZHJlbltzdGF0ZS5pbmRleF07XG4gICAgd2hpbGUgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoc2VsZWN0ZWQsICdjaGlsZHJlbicpKSB7XG4gICAgICBzdGF0ZSA9IHNlbGVjdGVkO1xuICAgICAgc2VsZWN0ZWQgPSBzZWxlY3RlZC5jaGlsZHJlbltzZWxlY3RlZC5pbmRleF07XG4gICAgfVxuICAgIGNvbnN0IG5hdlByb3BzID0geyAuLi50aGlzLnByb3BzLCAuLi5zZWxlY3RlZCB9O1xuXG4gICAgY29uc3Qgd3JhcEJ5U3R5bGUgPSAoY29tcG9uZW50LCB3cmFwU3R5bGUpID0+IHtcbiAgICAgIGlmICghY29tcG9uZW50KSB7IHJldHVybiBudWxsOyB9XG4gICAgICByZXR1cm4gcHJvcHMgPT4gPFZpZXcgc3R5bGU9e3dyYXBTdHlsZX0+e2NvbXBvbmVudChwcm9wcyl9PC9WaWV3PjtcbiAgICB9O1xuXG4gICAgY29uc3QgbGVmdEJ1dHRvblN0eWxlID0gW3N0eWxlcy5sZWZ0QnV0dG9uLCB7IGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0JyB9XTtcbiAgICBjb25zdCByaWdodEJ1dHRvblN0eWxlID0gW3N0eWxlcy5yaWdodEJ1dHRvbiwgeyBhbGlnbkl0ZW1zOiAnZmxleC1lbmQnIH1dO1xuXG4gICAgY29uc3QgcmVuZGVyTGVmdEJ1dHRvbiA9IHdyYXBCeVN0eWxlKHNlbGVjdGVkLnJlbmRlckxlZnRCdXR0b24sIGxlZnRCdXR0b25TdHlsZSkgfHxcbiAgICAgIHdyYXBCeVN0eWxlKHNlbGVjdGVkLmNvbXBvbmVudC5yZW5kZXJMZWZ0QnV0dG9uLCBsZWZ0QnV0dG9uU3R5bGUpIHx8XG4gICAgICB0aGlzLnJlbmRlckxlZnRCdXR0b247XG4gICAgY29uc3QgcmVuZGVyUmlnaHRCdXR0b24gPSB3cmFwQnlTdHlsZShzZWxlY3RlZC5yZW5kZXJSaWdodEJ1dHRvbiwgcmlnaHRCdXR0b25TdHlsZSkgfHxcbiAgICAgIHdyYXBCeVN0eWxlKHNlbGVjdGVkLmNvbXBvbmVudC5yZW5kZXJSaWdodEJ1dHRvbiwgcmlnaHRCdXR0b25TdHlsZSkgfHxcbiAgICAgIHRoaXMucmVuZGVyUmlnaHRCdXR0b247XG4gICAgY29uc3QgcmVuZGVyQmFja0J1dHRvbiA9IHdyYXBCeVN0eWxlKHNlbGVjdGVkLnJlbmRlckJhY2tCdXR0b24sIGxlZnRCdXR0b25TdHlsZSkgfHxcbiAgICAgIHdyYXBCeVN0eWxlKHNlbGVjdGVkLmNvbXBvbmVudC5yZW5kZXJCYWNrQnV0dG9uLCBsZWZ0QnV0dG9uU3R5bGUpIHx8XG4gICAgICB0aGlzLnJlbmRlckJhY2tCdXR0b247XG4gICAgY29uc3QgcmVuZGVyVGl0bGUgPSBzZWxlY3RlZC5yZW5kZXJUaXRsZSB8fFxuICAgICAgc2VsZWN0ZWQuY29tcG9uZW50LnJlbmRlclRpdGxlIHx8XG4gICAgICB0aGlzLnByb3BzLnJlbmRlclRpdGxlO1xuICAgIGNvbnN0IG5hdmlnYXRpb25CYXJCYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzLnByb3BzLm5hdmlnYXRpb25CYXJCYWNrZ3JvdW5kSW1hZ2UgfHxcbiAgICAgIHN0YXRlLm5hdmlnYXRpb25CYXJCYWNrZ3JvdW5kSW1hZ2U7XG4gICAgY29uc3QgY29udGVudHMgPSAoXG4gICAgICA8Vmlldz5cbiAgICAgICAge3JlbmRlclRpdGxlID8gcmVuZGVyVGl0bGUobmF2UHJvcHMpIDogc3RhdGUuY2hpbGRyZW4ubWFwKHRoaXMucmVuZGVyVGl0bGUsIHRoaXMpfVxuICAgICAgICB7cmVuZGVyQmFja0J1dHRvbihuYXZQcm9wcykgfHwgcmVuZGVyTGVmdEJ1dHRvbihuYXZQcm9wcyl9XG4gICAgICAgIHtyZW5kZXJSaWdodEJ1dHRvbihuYXZQcm9wcyl9XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgICByZXR1cm4gKFxuICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICBzdHlsZXMuaGVhZGVyLFxuICAgICAgICAgIHRoaXMucHJvcHMubmF2aWdhdGlvbkJhclN0eWxlLFxuICAgICAgICAgIHN0YXRlLm5hdmlnYXRpb25CYXJTdHlsZSxcbiAgICAgICAgICBzZWxlY3RlZC5uYXZpZ2F0aW9uQmFyU3R5bGUsXG4gICAgICAgIF19XG4gICAgICA+XG4gICAgICAgIHtuYXZpZ2F0aW9uQmFyQmFja2dyb3VuZEltYWdlID8gKFxuICAgICAgICAgIDxJbWFnZSBzb3VyY2U9e25hdmlnYXRpb25CYXJCYWNrZ3JvdW5kSW1hZ2V9PlxuICAgICAgICAgICAge2NvbnRlbnRzfVxuICAgICAgICAgIDwvSW1hZ2U+XG4gICAgICAgICkgOiBjb250ZW50c31cbiAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICApO1xuICB9XG59XG5cbk5hdkJhci5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5OYXZCYXIuY29udGV4dFR5cGVzID0gY29udGV4dFR5cGVzO1xuTmF2QmFyLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0IGRlZmF1bHQgTmF2QmFyO1xuIl19