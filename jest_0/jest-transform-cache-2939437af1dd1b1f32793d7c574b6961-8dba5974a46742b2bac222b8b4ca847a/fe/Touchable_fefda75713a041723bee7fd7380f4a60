040c1813a56462b6f9998c5443dd7862











'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};

var BoundingDimensions=require('BoundingDimensions');
var Platform=require('Platform');
var Position=require('Position');
var React=require('React');
var ReactNative=require('ReactNative');
var TVEventHandler=require('TVEventHandler');
var TouchEventUtils=require('fbjs/lib/TouchEventUtils');
var UIManager=require('UIManager');
var View=require('View');

var keyMirror=require('fbjs/lib/keyMirror');
var normalizeColor=require('normalizeColor');

























































































var States=keyMirror({
NOT_RESPONDER:null,
RESPONDER_INACTIVE_PRESS_IN:null,
RESPONDER_INACTIVE_PRESS_OUT:null,
RESPONDER_ACTIVE_PRESS_IN:null,
RESPONDER_ACTIVE_PRESS_OUT:null,
RESPONDER_ACTIVE_LONG_PRESS_IN:null,
RESPONDER_ACTIVE_LONG_PRESS_OUT:null,
ERROR:null});





var IsActive={
RESPONDER_ACTIVE_PRESS_OUT:true,
RESPONDER_ACTIVE_PRESS_IN:true};






var IsPressingIn={
RESPONDER_INACTIVE_PRESS_IN:true,
RESPONDER_ACTIVE_PRESS_IN:true,
RESPONDER_ACTIVE_LONG_PRESS_IN:true};


var IsLongPressingIn={
RESPONDER_ACTIVE_LONG_PRESS_IN:true};





var Signals=keyMirror({
DELAY:null,
RESPONDER_GRANT:null,
RESPONDER_RELEASE:null,
RESPONDER_TERMINATED:null,
ENTER_PRESS_RECT:null,
LEAVE_PRESS_RECT:null,
LONG_PRESS_DETECTED:null});





var Transitions={
NOT_RESPONDER:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.RESPONDER_INACTIVE_PRESS_IN,
RESPONDER_RELEASE:States.ERROR,
RESPONDER_TERMINATED:States.ERROR,
ENTER_PRESS_RECT:States.ERROR,
LEAVE_PRESS_RECT:States.ERROR,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_INACTIVE_PRESS_IN:{
DELAY:States.RESPONDER_ACTIVE_PRESS_IN,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_INACTIVE_PRESS_OUT:{
DELAY:States.RESPONDER_ACTIVE_PRESS_OUT,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_INACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_ACTIVE_PRESS_IN:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.RESPONDER_ACTIVE_LONG_PRESS_IN},

RESPONDER_ACTIVE_PRESS_OUT:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

RESPONDER_ACTIVE_LONG_PRESS_IN:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
LONG_PRESS_DETECTED:States.RESPONDER_ACTIVE_LONG_PRESS_IN},

RESPONDER_ACTIVE_LONG_PRESS_OUT:{
DELAY:States.ERROR,
RESPONDER_GRANT:States.ERROR,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_IN,
LEAVE_PRESS_RECT:States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
LONG_PRESS_DETECTED:States.ERROR},

error:{
DELAY:States.NOT_RESPONDER,
RESPONDER_GRANT:States.RESPONDER_INACTIVE_PRESS_IN,
RESPONDER_RELEASE:States.NOT_RESPONDER,
RESPONDER_TERMINATED:States.NOT_RESPONDER,
ENTER_PRESS_RECT:States.NOT_RESPONDER,
LEAVE_PRESS_RECT:States.NOT_RESPONDER,
LONG_PRESS_DETECTED:States.NOT_RESPONDER}};






var HIGHLIGHT_DELAY_MS=130;

var PRESS_EXPAND_PX=20;

var LONG_PRESS_THRESHOLD=500;

var LONG_PRESS_DELAY_MS=LONG_PRESS_THRESHOLD-HIGHLIGHT_DELAY_MS;

var LONG_PRESS_ALLOWED_MOVEMENT=10;



































































var TouchableMixin={
componentDidMount:function componentDidMount(){
if(!Platform.isTVOS){
return;
}

this._tvEventHandler=new TVEventHandler();
this._tvEventHandler.enable(this,function(cmp,evt){
var myTag=ReactNative.findNodeHandle(cmp);
evt.dispatchConfig={};
if(myTag===evt.tag){
if(evt.eventType==='focus'){
cmp.touchableHandleActivePressIn&&cmp.touchableHandleActivePressIn(evt);
}else if(evt.eventType==='blur'){
cmp.touchableHandleActivePressOut&&cmp.touchableHandleActivePressOut(evt);
}else if(evt.eventType==='select'){
cmp.touchableHandlePress&&cmp.touchableHandlePress(evt);
}
}
});
},




componentWillUnmount:function componentWillUnmount(){
if(this._tvEventHandler){
this._tvEventHandler.disable();
delete this._tvEventHandler;
}
this.touchableDelayTimeout&&clearTimeout(this.touchableDelayTimeout);
this.longPressDelayTimeout&&clearTimeout(this.longPressDelayTimeout);
this.pressOutDelayTimeout&&clearTimeout(this.pressOutDelayTimeout);
},








touchableGetInitialState:function touchableGetInitialState(){
return{
touchable:{touchState:undefined,responderID:null}};

},





touchableHandleResponderTerminationRequest:function touchableHandleResponderTerminationRequest(){
return!this.props.rejectResponderTermination;
},




touchableHandleStartShouldSetResponder:function touchableHandleStartShouldSetResponder(){
return!this.props.disabled;
},




touchableLongPressCancelsPress:function touchableLongPressCancelsPress(){
return true;
},






touchableHandleResponderGrant:function touchableHandleResponderGrant(e){
var dispatchID=e.currentTarget;



e.persist();

this.pressOutDelayTimeout&&clearTimeout(this.pressOutDelayTimeout);
this.pressOutDelayTimeout=null;

this.state.touchable.touchState=States.NOT_RESPONDER;
this.state.touchable.responderID=dispatchID;
this._receiveSignal(Signals.RESPONDER_GRANT,e);
var delayMS=
this.touchableGetHighlightDelayMS!==undefined?
Math.max(this.touchableGetHighlightDelayMS(),0):HIGHLIGHT_DELAY_MS;
delayMS=isNaN(delayMS)?HIGHLIGHT_DELAY_MS:delayMS;
if(delayMS!==0){
this.touchableDelayTimeout=setTimeout(
this._handleDelay.bind(this,e),
delayMS);

}else{
this._handleDelay(e);
}

var longDelayMS=
this.touchableGetLongPressDelayMS!==undefined?
Math.max(this.touchableGetLongPressDelayMS(),10):LONG_PRESS_DELAY_MS;
longDelayMS=isNaN(longDelayMS)?LONG_PRESS_DELAY_MS:longDelayMS;
this.longPressDelayTimeout=setTimeout(
this._handleLongDelay.bind(this,e),
longDelayMS+delayMS);

},




touchableHandleResponderRelease:function touchableHandleResponderRelease(e){
this._receiveSignal(Signals.RESPONDER_RELEASE,e);
},




touchableHandleResponderTerminate:function touchableHandleResponderTerminate(e){
this._receiveSignal(Signals.RESPONDER_TERMINATED,e);
},




touchableHandleResponderMove:function touchableHandleResponderMove(e){


if(this.state.touchable.touchState===States.RESPONDER_INACTIVE_PRESS_IN){
return;
}


if(!this.state.touchable.positionOnActivate){
return;
}

var positionOnActivate=this.state.touchable.positionOnActivate;
var dimensionsOnActivate=this.state.touchable.dimensionsOnActivate;
var pressRectOffset=this.touchableGetPressRectOffset?
this.touchableGetPressRectOffset():{
left:PRESS_EXPAND_PX,
right:PRESS_EXPAND_PX,
top:PRESS_EXPAND_PX,
bottom:PRESS_EXPAND_PX};


var pressExpandLeft=pressRectOffset.left;
var pressExpandTop=pressRectOffset.top;
var pressExpandRight=pressRectOffset.right;
var pressExpandBottom=pressRectOffset.bottom;

var hitSlop=this.touchableGetHitSlop?
this.touchableGetHitSlop():null;

if(hitSlop){
pressExpandLeft+=hitSlop.left;
pressExpandTop+=hitSlop.top;
pressExpandRight+=hitSlop.right;
pressExpandBottom+=hitSlop.bottom;
}

var touch=TouchEventUtils.extractSingleTouch(e.nativeEvent);
var pageX=touch&&touch.pageX;
var pageY=touch&&touch.pageY;

if(this.pressInLocation){
var movedDistance=this._getDistanceBetweenPoints(pageX,pageY,this.pressInLocation.pageX,this.pressInLocation.pageY);
if(movedDistance>LONG_PRESS_ALLOWED_MOVEMENT){
this._cancelLongPressDelayTimeout();
}
}

var isTouchWithinActive=
pageX>positionOnActivate.left-pressExpandLeft&&
pageY>positionOnActivate.top-pressExpandTop&&
pageX<
positionOnActivate.left+
dimensionsOnActivate.width+
pressExpandRight&&
pageY<
positionOnActivate.top+
dimensionsOnActivate.height+
pressExpandBottom;
if(isTouchWithinActive){
this._receiveSignal(Signals.ENTER_PRESS_RECT,e);
var curState=this.state.touchable.touchState;
if(curState===States.RESPONDER_INACTIVE_PRESS_IN){

this._cancelLongPressDelayTimeout();
}
}else{
this._cancelLongPressDelayTimeout();
this._receiveSignal(Signals.LEAVE_PRESS_RECT,e);
}
},















































































_remeasureMetricsOnActivation:function _remeasureMetricsOnActivation(){
var tag=this.state.touchable.responderID;
if(tag==null){
return;
}

UIManager.measure(tag,this._handleQueryLayout);
},

_handleQueryLayout:function _handleQueryLayout(l,t,w,h,globalX,globalY){

if(!l&&!t&&!w&&!h&&!globalX&&!globalY){
return;
}
this.state.touchable.positionOnActivate&&
Position.release(this.state.touchable.positionOnActivate);
this.state.touchable.dimensionsOnActivate&&
BoundingDimensions.release(this.state.touchable.dimensionsOnActivate);
this.state.touchable.positionOnActivate=Position.getPooled(globalX,globalY);
this.state.touchable.dimensionsOnActivate=BoundingDimensions.getPooled(w,h);
},

_handleDelay:function _handleDelay(e){
this.touchableDelayTimeout=null;
this._receiveSignal(Signals.DELAY,e);
},

_handleLongDelay:function _handleLongDelay(e){
this.longPressDelayTimeout=null;
var curState=this.state.touchable.touchState;
if(curState!==States.RESPONDER_ACTIVE_PRESS_IN&&
curState!==States.RESPONDER_ACTIVE_LONG_PRESS_IN){
console.error('Attempted to transition from state `'+curState+'` to `'+
States.RESPONDER_ACTIVE_LONG_PRESS_IN+'`, which is not supported. This is '+
'most likely due to `Touchable.longPressDelayTimeout` not being cancelled.');
}else{
this._receiveSignal(Signals.LONG_PRESS_DETECTED,e);
}
},









_receiveSignal:function _receiveSignal(signal,e){
var responderID=this.state.touchable.responderID;
var curState=this.state.touchable.touchState;
var nextState=Transitions[curState]&&Transitions[curState][signal];
if(!responderID&&signal===Signals.RESPONDER_RELEASE){
return;
}
if(!nextState){
throw new Error(
'Unrecognized signal `'+signal+'` or state `'+curState+
'` for Touchable responder `'+responderID+'`');

}
if(nextState===States.ERROR){
throw new Error(
'Touchable cannot transition from `'+curState+'` to `'+signal+
'` for responder `'+responderID+'`');

}
if(curState!==nextState){
this._performSideEffectsForTransition(curState,nextState,signal,e);
this.state.touchable.touchState=nextState;
}
},

_cancelLongPressDelayTimeout:function _cancelLongPressDelayTimeout(){
this.longPressDelayTimeout&&clearTimeout(this.longPressDelayTimeout);
this.longPressDelayTimeout=null;
},

_isHighlight:function _isHighlight(state){
return state===States.RESPONDER_ACTIVE_PRESS_IN||
state===States.RESPONDER_ACTIVE_LONG_PRESS_IN;
},

_savePressInLocation:function _savePressInLocation(e){
var touch=TouchEventUtils.extractSingleTouch(e.nativeEvent);
var pageX=touch&&touch.pageX;
var pageY=touch&&touch.pageY;
var locationX=touch&&touch.locationX;
var locationY=touch&&touch.locationY;
this.pressInLocation={pageX:pageX,pageY:pageY,locationX:locationX,locationY:locationY};
},

_getDistanceBetweenPoints:function _getDistanceBetweenPoints(aX,aY,bX,bY){
var deltaX=aX-bX;
var deltaY=aY-bY;
return Math.sqrt(deltaX*deltaX+deltaY*deltaY);
},












_performSideEffectsForTransition:function _performSideEffectsForTransition(curState,nextState,signal,e){
var curIsHighlight=this._isHighlight(curState);
var newIsHighlight=this._isHighlight(nextState);

var isFinalSignal=
signal===Signals.RESPONDER_TERMINATED||
signal===Signals.RESPONDER_RELEASE;

if(isFinalSignal){
this._cancelLongPressDelayTimeout();
}

if(!IsActive[curState]&&IsActive[nextState]){
this._remeasureMetricsOnActivation();
}

if(IsPressingIn[curState]&&signal===Signals.LONG_PRESS_DETECTED){
this.touchableHandleLongPress&&this.touchableHandleLongPress(e);
}

if(newIsHighlight&&!curIsHighlight){
this._startHighlight(e);
}else if(!newIsHighlight&&curIsHighlight){
this._endHighlight(e);
}

if(IsPressingIn[curState]&&signal===Signals.RESPONDER_RELEASE){
var hasLongPressHandler=!!this.props.onLongPress;
var pressIsLongButStillCallOnPress=
IsLongPressingIn[curState]&&(
!hasLongPressHandler||
!this.touchableLongPressCancelsPress());


var shouldInvokePress=!IsLongPressingIn[curState]||pressIsLongButStillCallOnPress;
if(shouldInvokePress&&this.touchableHandlePress){
if(!newIsHighlight&&!curIsHighlight){

this._startHighlight(e);
this._endHighlight(e);
}
this.touchableHandlePress(e);
}
}

this.touchableDelayTimeout&&clearTimeout(this.touchableDelayTimeout);
this.touchableDelayTimeout=null;
},

_startHighlight:function _startHighlight(e){
this._savePressInLocation(e);
this.touchableHandleActivePressIn&&this.touchableHandleActivePressIn(e);
},

_endHighlight:function _endHighlight(e){var _this=this;
if(this.touchableHandleActivePressOut){
if(this.touchableGetPressOutDelayMS&&this.touchableGetPressOutDelayMS()){
this.pressOutDelayTimeout=setTimeout(function(){
_this.touchableHandleActivePressOut(e);
},this.touchableGetPressOutDelayMS());
}else{
this.touchableHandleActivePressOut(e);
}
}
}};



var Touchable={
Mixin:TouchableMixin,
TOUCH_TARGET_DEBUG:false,



renderDebugView:function renderDebugView(_ref){var color=_ref.color,hitSlop=_ref.hitSlop;
if(!Touchable.TOUCH_TARGET_DEBUG){
return null;
}
if(!__DEV__){
throw Error('Touchable.TOUCH_TARGET_DEBUG should not be enabled in prod!');
}
var debugHitSlopStyle={};
hitSlop=hitSlop||{top:0,bottom:0,left:0,right:0};
for(var key in hitSlop){
debugHitSlopStyle[key]=-hitSlop[key];
}
var hexColor='#'+('00000000'+normalizeColor(color).toString(16)).substr(-8);
return(
React.createElement(View,{
pointerEvents:'none',
style:_extends({
position:'absolute',
borderColor:hexColor.slice(0,-2)+'55',
borderWidth:1,
borderStyle:'dashed',
backgroundColor:hexColor.slice(0,-2)+'0F'},
debugHitSlopStyle)}));



}};


module.exports=Touchable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZS5qcyJdLCJuYW1lcyI6WyJCb3VuZGluZ0RpbWVuc2lvbnMiLCJyZXF1aXJlIiwiUGxhdGZvcm0iLCJQb3NpdGlvbiIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJUVkV2ZW50SGFuZGxlciIsIlRvdWNoRXZlbnRVdGlscyIsIlVJTWFuYWdlciIsIlZpZXciLCJrZXlNaXJyb3IiLCJub3JtYWxpemVDb2xvciIsIlN0YXRlcyIsIk5PVF9SRVNQT05ERVIiLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4iLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiIsIlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCIsIkVSUk9SIiwiSXNBY3RpdmUiLCJJc1ByZXNzaW5nSW4iLCJJc0xvbmdQcmVzc2luZ0luIiwiU2lnbmFscyIsIkRFTEFZIiwiUkVTUE9OREVSX0dSQU5UIiwiUkVTUE9OREVSX1JFTEVBU0UiLCJSRVNQT05ERVJfVEVSTUlOQVRFRCIsIkVOVEVSX1BSRVNTX1JFQ1QiLCJMRUFWRV9QUkVTU19SRUNUIiwiTE9OR19QUkVTU19ERVRFQ1RFRCIsIlRyYW5zaXRpb25zIiwiZXJyb3IiLCJISUdITElHSFRfREVMQVlfTVMiLCJQUkVTU19FWFBBTkRfUFgiLCJMT05HX1BSRVNTX1RIUkVTSE9MRCIsIkxPTkdfUFJFU1NfREVMQVlfTVMiLCJMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQiLCJUb3VjaGFibGVNaXhpbiIsImNvbXBvbmVudERpZE1vdW50IiwiaXNUVk9TIiwiX3R2RXZlbnRIYW5kbGVyIiwiZW5hYmxlIiwiY21wIiwiZXZ0IiwibXlUYWciLCJmaW5kTm9kZUhhbmRsZSIsImRpc3BhdGNoQ29uZmlnIiwidGFnIiwiZXZlbnRUeXBlIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiIsInRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0IiwidG91Y2hhYmxlSGFuZGxlUHJlc3MiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImRpc2FibGUiLCJ0b3VjaGFibGVEZWxheVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJsb25nUHJlc3NEZWxheVRpbWVvdXQiLCJwcmVzc091dERlbGF5VGltZW91dCIsInRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSIsInRvdWNoYWJsZSIsInRvdWNoU3RhdGUiLCJ1bmRlZmluZWQiLCJyZXNwb25kZXJJRCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCIsInByb3BzIiwicmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24iLCJ0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlciIsImRpc2FibGVkIiwidG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJlIiwiZGlzcGF0Y2hJRCIsImN1cnJlbnRUYXJnZXQiLCJwZXJzaXN0Iiwic3RhdGUiLCJfcmVjZWl2ZVNpZ25hbCIsImRlbGF5TVMiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwiTWF0aCIsIm1heCIsImlzTmFOIiwic2V0VGltZW91dCIsIl9oYW5kbGVEZWxheSIsImJpbmQiLCJsb25nRGVsYXlNUyIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJfaGFuZGxlTG9uZ0RlbGF5IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJwb3NpdGlvbk9uQWN0aXZhdGUiLCJkaW1lbnNpb25zT25BY3RpdmF0ZSIsInByZXNzUmVjdE9mZnNldCIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsInByZXNzRXhwYW5kTGVmdCIsInByZXNzRXhwYW5kVG9wIiwicHJlc3NFeHBhbmRSaWdodCIsInByZXNzRXhwYW5kQm90dG9tIiwiaGl0U2xvcCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJ0b3VjaCIsImV4dHJhY3RTaW5nbGVUb3VjaCIsIm5hdGl2ZUV2ZW50IiwicGFnZVgiLCJwYWdlWSIsInByZXNzSW5Mb2NhdGlvbiIsIm1vdmVkRGlzdGFuY2UiLCJfZ2V0RGlzdGFuY2VCZXR3ZWVuUG9pbnRzIiwiX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCIsImlzVG91Y2hXaXRoaW5BY3RpdmUiLCJ3aWR0aCIsImhlaWdodCIsImN1clN0YXRlIiwiX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb24iLCJtZWFzdXJlIiwiX2hhbmRsZVF1ZXJ5TGF5b3V0IiwibCIsInQiLCJ3IiwiaCIsImdsb2JhbFgiLCJnbG9iYWxZIiwicmVsZWFzZSIsImdldFBvb2xlZCIsImNvbnNvbGUiLCJzaWduYWwiLCJuZXh0U3RhdGUiLCJFcnJvciIsIl9wZXJmb3JtU2lkZUVmZmVjdHNGb3JUcmFuc2l0aW9uIiwiX2lzSGlnaGxpZ2h0IiwiX3NhdmVQcmVzc0luTG9jYXRpb24iLCJsb2NhdGlvblgiLCJsb2NhdGlvblkiLCJhWCIsImFZIiwiYlgiLCJiWSIsImRlbHRhWCIsImRlbHRhWSIsInNxcnQiLCJjdXJJc0hpZ2hsaWdodCIsIm5ld0lzSGlnaGxpZ2h0IiwiaXNGaW5hbFNpZ25hbCIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsIl9zdGFydEhpZ2hsaWdodCIsIl9lbmRIaWdobGlnaHQiLCJoYXNMb25nUHJlc3NIYW5kbGVyIiwib25Mb25nUHJlc3MiLCJwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3MiLCJzaG91bGRJbnZva2VQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUyIsIlRvdWNoYWJsZSIsIk1peGluIiwiVE9VQ0hfVEFSR0VUX0RFQlVHIiwicmVuZGVyRGVidWdWaWV3IiwiY29sb3IiLCJfX0RFVl9fIiwiZGVidWdIaXRTbG9wU3R5bGUiLCJrZXkiLCJoZXhDb2xvciIsInRvU3RyaW5nIiwic3Vic3RyIiwicG9zaXRpb24iLCJib3JkZXJDb2xvciIsInNsaWNlIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJTdHlsZSIsImJhY2tncm91bmRDb2xvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBV0EsYTs7QUFFQSxHQUFNQSxvQkFBcUJDLFFBQVEsb0JBQVIsQ0FBM0I7QUFDQSxHQUFNQyxVQUFXRCxRQUFRLFVBQVIsQ0FBakI7QUFDQSxHQUFNRSxVQUFXRixRQUFRLFVBQVIsQ0FBakI7QUFDQSxHQUFNRyxPQUFRSCxRQUFRLE9BQVIsQ0FBZDtBQUNBLEdBQU1JLGFBQWNKLFFBQVEsYUFBUixDQUFwQjtBQUNBLEdBQU1LLGdCQUFpQkwsUUFBUSxnQkFBUixDQUF2QjtBQUNBLEdBQU1NLGlCQUFrQk4sUUFBUSwwQkFBUixDQUF4QjtBQUNBLEdBQU1PLFdBQVlQLFFBQVEsV0FBUixDQUFsQjtBQUNBLEdBQU1RLE1BQU9SLFFBQVEsTUFBUixDQUFiOztBQUVBLEdBQU1TLFdBQVlULFFBQVEsb0JBQVIsQ0FBbEI7QUFDQSxHQUFNVSxnQkFBaUJWLFFBQVEsZ0JBQVIsQ0FBdkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBGQSxHQUFJVyxRQUFTRixVQUFVO0FBQ3JCRyxjQUFlLElBRE07QUFFckJDLDRCQUE2QixJQUZSO0FBR3JCQyw2QkFBOEIsSUFIVDtBQUlyQkMsMEJBQTJCLElBSk47QUFLckJDLDJCQUE0QixJQUxQO0FBTXJCQywrQkFBZ0MsSUFOWDtBQU9yQkMsZ0NBQWlDLElBUFo7QUFRckJDLE1BQU8sSUFSYyxDQUFWLENBQWI7Ozs7OztBQWNBLEdBQUlDLFVBQVc7QUFDYkos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OztBQW1DQVcsT0FBT0MsT0FBUCxDQUFpQmxCLFNBQWpCIiwiZmlsZSI6IlRvdWNoYWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgVG91Y2hhYmxlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBCb3VuZGluZ0RpbWVuc2lvbnMgPSByZXF1aXJlKCdCb3VuZGluZ0RpbWVuc2lvbnMnKTtcbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnUGxhdGZvcm0nKTtcbmNvbnN0IFBvc2l0aW9uID0gcmVxdWlyZSgnUG9zaXRpb24nKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgnUmVhY3QnKTtcbmNvbnN0IFJlYWN0TmF0aXZlID0gcmVxdWlyZSgnUmVhY3ROYXRpdmUnKTtcbmNvbnN0IFRWRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnVFZFdmVudEhhbmRsZXInKTtcbmNvbnN0IFRvdWNoRXZlbnRVdGlscyA9IHJlcXVpcmUoJ2ZianMvbGliL1RvdWNoRXZlbnRVdGlscycpO1xuY29uc3QgVUlNYW5hZ2VyID0gcmVxdWlyZSgnVUlNYW5hZ2VyJyk7XG5jb25zdCBWaWV3ID0gcmVxdWlyZSgnVmlldycpO1xuXG5jb25zdCBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcbmNvbnN0IG5vcm1hbGl6ZUNvbG9yID0gcmVxdWlyZSgnbm9ybWFsaXplQ29sb3InKTtcblxuLyoqXG4gKiBgVG91Y2hhYmxlYDogVGFwcyBkb25lIHJpZ2h0LlxuICpcbiAqIFlvdSBob29rIHlvdXIgYFJlc3BvbmRlckV2ZW50UGx1Z2luYCBldmVudHMgaW50byBgVG91Y2hhYmxlYC4gYFRvdWNoYWJsZWBcbiAqIHdpbGwgbWVhc3VyZSB0aW1lL2dlb21ldHJ5IGFuZCB0ZWxscyB5b3Ugd2hlbiB0byBnaXZlIGZlZWRiYWNrIHRvIHRoZSB1c2VyLlxuICpcbiAqID09PT09PT09PT09PT09PT09PT09PT0gVG91Y2hhYmxlIFR1dG9yaWFsID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFRoZSBgVG91Y2hhYmxlYCBtaXhpbiBoZWxwcyB5b3UgaGFuZGxlIHRoZSBcInByZXNzXCIgaW50ZXJhY3Rpb24uIEl0IGFuYWx5emVzXG4gKiB0aGUgZ2VvbWV0cnkgb2YgZWxlbWVudHMsIGFuZCBvYnNlcnZlcyB3aGVuIGFub3RoZXIgcmVzcG9uZGVyIChzY3JvbGwgdmlld1xuICogZXRjKSBoYXMgc3RvbGVuIHRoZSB0b3VjaCBsb2NrLiBJdCBub3RpZmllcyB5b3VyIGNvbXBvbmVudCB3aGVuIGl0IHNob3VsZFxuICogZ2l2ZSBmZWVkYmFjayB0byB0aGUgdXNlci4gKGJvdW5jaW5nL2hpZ2hsaWdodGluZy91bmhpZ2hsaWdodGluZykuXG4gKlxuICogLSBXaGVuIGEgdG91Y2ggd2FzIGFjdGl2YXRlZCAodHlwaWNhbGx5IHlvdSBoaWdobGlnaHQpXG4gKiAtIFdoZW4gYSB0b3VjaCB3YXMgZGVhY3RpdmF0ZWQgKHR5cGljYWxseSB5b3UgdW5oaWdobGlnaHQpXG4gKiAtIFdoZW4gYSB0b3VjaCB3YXMgXCJwcmVzc2VkXCIgLSBhIHRvdWNoIGVuZGVkIHdoaWxlIHN0aWxsIHdpdGhpbiB0aGUgZ2VvbWV0cnlcbiAqICAgb2YgdGhlIGVsZW1lbnQsIGFuZCBubyBvdGhlciBlbGVtZW50IChsaWtlIHNjcm9sbGVyKSBoYXMgXCJzdG9sZW5cIiB0b3VjaFxuICogICBsb2NrIChcInJlc3BvbmRlclwiKSAoVHlwaWNhbGx5IHlvdSBib3VuY2UgdGhlIGVsZW1lbnQpLlxuICpcbiAqIEEgZ29vZCB0YXAgaW50ZXJhY3Rpb24gaXNuJ3QgYXMgc2ltcGxlIGFzIHlvdSBtaWdodCB0aGluay4gVGhlcmUgc2hvdWxkIGJlIGFcbiAqIHNsaWdodCBkZWxheSBiZWZvcmUgc2hvd2luZyBhIGhpZ2hsaWdodCB3aGVuIHN0YXJ0aW5nIGEgdG91Y2guIElmIGFcbiAqIHN1YnNlcXVlbnQgdG91Y2ggbW92ZSBleGNlZWRzIHRoZSBib3VuZGFyeSBvZiB0aGUgZWxlbWVudCwgaXQgc2hvdWxkXG4gKiB1bmhpZ2hsaWdodCwgYnV0IGlmIHRoYXQgc2FtZSB0b3VjaCBpcyBicm91Z2h0IGJhY2sgd2l0aGluIHRoZSBib3VuZGFyeSwgaXRcbiAqIHNob3VsZCByZWhpZ2hsaWdodCBhZ2Fpbi4gQSB0b3VjaCBjYW4gbW92ZSBpbiBhbmQgb3V0IG9mIHRoYXQgYm91bmRhcnlcbiAqIHNldmVyYWwgdGltZXMsIGVhY2ggdGltZSB0b2dnbGluZyBoaWdobGlnaHRpbmcsIGJ1dCBhIFwicHJlc3NcIiBpcyBvbmx5XG4gKiB0cmlnZ2VyZWQgaWYgdGhhdCB0b3VjaCBlbmRzIHdoaWxlIHdpdGhpbiB0aGUgZWxlbWVudCdzIGJvdW5kYXJ5IGFuZCBub1xuICogc2Nyb2xsZXIgKG9yIGFueXRoaW5nIGVsc2UpIGhhcyBzdG9sZW4gdGhlIGxvY2sgb24gdG91Y2hlcy5cbiAqXG4gKiBUbyBjcmVhdGUgYSBuZXcgdHlwZSBvZiBjb21wb25lbnQgdGhhdCBoYW5kbGVzIGludGVyYWN0aW9uIHVzaW5nIHRoZVxuICogYFRvdWNoYWJsZWAgbWl4aW4sIGRvIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogLSBJbml0aWFsaXplIHRoZSBgVG91Y2hhYmxlYCBzdGF0ZS5cbiAqXG4gKiAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIG1lcmdlKHRoaXMudG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlKCksIHlvdXJDb21wb25lbnRTdGF0ZSk7XG4gKiAgIH1cbiAqXG4gKiAtIENob29zZSB0aGUgcmVuZGVyZWQgY29tcG9uZW50IHdobydzIHRvdWNoZXMgc2hvdWxkIHN0YXJ0IHRoZSBpbnRlcmFjdGl2ZVxuICogICBzZXF1ZW5jZS4gT24gdGhhdCByZW5kZXJlZCBub2RlLCBmb3J3YXJkIGFsbCBgVG91Y2hhYmxlYCByZXNwb25kZXJcbiAqICAgaGFuZGxlcnMuIFlvdSBjYW4gY2hvb3NlIGFueSByZW5kZXJlZCBub2RlIHlvdSBsaWtlLiBDaG9vc2UgYSBub2RlIHdob3NlXG4gKiAgIGhpdCB0YXJnZXQgeW91J2QgbGlrZSB0byBpbnN0aWdhdGUgdGhlIGludGVyYWN0aW9uIHNlcXVlbmNlOlxuICpcbiAqICAgLy8gSW4gcmVuZGVyIGZ1bmN0aW9uOlxuICogICByZXR1cm4gKFxuICogICAgIDxWaWV3XG4gKiAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyfVxuICogICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0fVxuICogICAgICAgb25SZXNwb25kZXJHcmFudD17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudH1cbiAqICAgICAgIG9uUmVzcG9uZGVyTW92ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlfVxuICogICAgICAgb25SZXNwb25kZXJSZWxlYXNlPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2V9XG4gKiAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGV9PlxuICogICAgICAgPFZpZXc+XG4gKiAgICAgICAgIEV2ZW4gdGhvdWdoIHRoZSBoaXQgZGV0ZWN0aW9uL2ludGVyYWN0aW9ucyBhcmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogICAgICAgICB3cmFwcGluZyAodHlwaWNhbGx5IGxhcmdlcikgbm9kZSwgd2UgdXN1YWxseSBlbmQgdXAgaW1wbGVtZW50aW5nXG4gKiAgICAgICAgIGN1c3RvbSBsb2dpYyB0aGF0IGhpZ2hsaWdodHMgdGhpcyBpbm5lciBvbmUuXG4gKiAgICAgICA8L1ZpZXc+XG4gKiAgICAgPC9WaWV3PlxuICogICApO1xuICpcbiAqIC0gWW91IG1heSBzZXQgdXAgeW91ciBvd24gaGFuZGxlcnMgZm9yIGVhY2ggb2YgdGhlc2UgZXZlbnRzLCBzbyBsb25nIGFzIHlvdVxuICogICBhbHNvIGludm9rZSB0aGUgYHRvdWNoYWJsZSpgIGhhbmRsZXJzIGluc2lkZSBvZiB5b3VyIGN1c3RvbSBoYW5kbGVyLlxuICpcbiAqIC0gSW1wbGVtZW50IHRoZSBoYW5kbGVycyBvbiB5b3VyIGNvbXBvbmVudCBjbGFzcyBpbiBvcmRlciB0byBwcm92aWRlXG4gKiAgIGZlZWRiYWNrIHRvIHRoZSB1c2VyLiBTZWUgZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvZiB0aGVzZSBjbGFzcyBtZXRob2RzXG4gKiAgIHRoYXQgeW91IHNob3VsZCBpbXBsZW1lbnQuXG4gKlxuICogICB0b3VjaGFibGVIYW5kbGVQcmVzczogZnVuY3Rpb24oKSB7XG4gKiAgICAgIHRoaXMucGVyZm9ybUJvdW5jZUFuaW1hdGlvbigpOyAgLy8gb3Igd2hhdGV2ZXIgeW91IHdhbnQgdG8gZG8uXG4gKiAgIH0sXG4gKiAgIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uKCkge1xuICogICAgIHRoaXMuYmVnaW5IaWdobGlnaHRpbmcoLi4uKTsgIC8vIFdoYXRldmVyIHlvdSBsaWtlIHRvIGNvbnZleSBhY3RpdmF0aW9uXG4gKiAgIH0sXG4gKiAgIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiBmdW5jdGlvbigpIHtcbiAqICAgICB0aGlzLmVuZEhpZ2hsaWdodGluZyguLi4pOyAgLy8gV2hhdGV2ZXIgeW91IGxpa2UgdG8gY29udmV5IGRlYWN0aXZhdGlvblxuICogICB9LFxuICpcbiAqIC0gVGhlcmUgYXJlIG1vcmUgYWR2YW5jZWQgbWV0aG9kcyB5b3UgY2FuIGltcGxlbWVudCAoc2VlIGRvY3VtZW50YXRpb24gYmVsb3cpOlxuICogICB0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TOiBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4gMjA7XG4gKiAgIH1cbiAqICAgLy8gSW4gcHJhY3RpY2UsICphbHdheXMqIHVzZSBhIHByZWRlY2xhcmVkIGNvbnN0YW50IChjb25zZXJ2ZSBtZW1vcnkpLlxuICogICB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiB7dG9wOiAyMCwgbGVmdDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAxMDB9O1xuICogICB9XG4gKi9cblxuLyoqXG4gKiBUb3VjaGFibGUgc3RhdGVzLlxuICovXG52YXIgU3RhdGVzID0ga2V5TWlycm9yKHtcbiAgTk9UX1JFU1BPTkRFUjogbnVsbCwgICAgICAgICAgICAgICAgICAgLy8gTm90IHRoZSByZXNwb25kZXJcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiBudWxsLCAgICAgLy8gUmVzcG9uZGVyLCBpbmFjdGl2ZSwgaW4gdGhlIGBQcmVzc1JlY3RgXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IG51bGwsICAgIC8vIFJlc3BvbmRlciwgaW5hY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiBudWxsLCAgICAgICAvLyBSZXNwb25kZXIsIGFjdGl2ZSwgaW4gdGhlIGBQcmVzc1JlY3RgXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiBudWxsLCAgICAgIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOOiBudWxsLCAgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YCwgYWZ0ZXIgbG9uZyBwcmVzcyB0aHJlc2hvbGRcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVDogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YCwgYWZ0ZXIgbG9uZyBwcmVzcyB0aHJlc2hvbGRcbiAgRVJST1I6IG51bGxcbn0pO1xuXG4vKipcbiAqIFF1aWNrIGxvb2t1cCBtYXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwiYWN0aXZlXCJcbiAqL1xudmFyIElzQWN0aXZlID0ge1xuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogdHJ1ZVxufTtcblxuLyoqXG4gKiBRdWljayBsb29rdXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwicHJlc3NpbmdcIiBhbmQgYXJlXG4gKiB0aGVyZWZvcmUgZWxpZ2libGUgdG8gcmVzdWx0IGluIGEgXCJzZWxlY3Rpb25cIiBpZiB0aGUgcHJlc3Mgc3RvcHMuXG4gKi9cbnZhciBJc1ByZXNzaW5nSW4gPSB7XG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOOiB0cnVlLFxufTtcblxudmFyIElzTG9uZ1ByZXNzaW5nSW4gPSB7XG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogdHJ1ZSxcbn07XG5cbi8qKlxuICogSW5wdXRzIHRvIHRoZSBzdGF0ZSBtYWNoaW5lLlxuICovXG52YXIgU2lnbmFscyA9IGtleU1pcnJvcih7XG4gIERFTEFZOiBudWxsLFxuICBSRVNQT05ERVJfR1JBTlQ6IG51bGwsXG4gIFJFU1BPTkRFUl9SRUxFQVNFOiBudWxsLFxuICBSRVNQT05ERVJfVEVSTUlOQVRFRDogbnVsbCxcbiAgRU5URVJfUFJFU1NfUkVDVDogbnVsbCxcbiAgTEVBVkVfUFJFU1NfUkVDVDogbnVsbCxcbiAgTE9OR19QUkVTU19ERVRFQ1RFRDogbnVsbCxcbn0pO1xuXG4vKipcbiAqIE1hcHBpbmcgZnJvbSBTdGF0ZXMgeCBTaWduYWxzID0+IFN0YXRlc1xuICovXG52YXIgVHJhbnNpdGlvbnMgPSB7XG4gIE5PVF9SRVNQT05ERVI6IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuRVJST1IsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLkVSUk9SLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5FUlJPUixcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjoge1xuICAgIERFTEFZOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLkVSUk9SLFxuICB9LFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUOiB7XG4gICAgREVMQVk6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCxcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLkVSUk9SLFxuICB9LFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICB9LFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLkVSUk9SLFxuICB9LFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICB9LFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQsXG4gICAgTE9OR19QUkVTU19ERVRFQ1RFRDogU3RhdGVzLkVSUk9SLFxuICB9LFxuICBlcnJvcjoge1xuICAgIERFTEFZOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4sXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgfVxufTtcblxuLy8gPT09PSBUeXBpY2FsIENvbnN0YW50cyBmb3IgaW50ZWdyYXRpbmcgaW50byBVSSBjb21wb25lbnRzID09PT1cbi8vIHZhciBISVRfRVhQQU5EX1BYID0gMjA7XG4vLyB2YXIgSElUX1ZFUlRfT0ZGU0VUX1BYID0gMTA7XG52YXIgSElHSExJR0hUX0RFTEFZX01TID0gMTMwO1xuXG52YXIgUFJFU1NfRVhQQU5EX1BYID0gMjA7XG5cbnZhciBMT05HX1BSRVNTX1RIUkVTSE9MRCA9IDUwMDtcblxudmFyIExPTkdfUFJFU1NfREVMQVlfTVMgPSBMT05HX1BSRVNTX1RIUkVTSE9MRCAtIEhJR0hMSUdIVF9ERUxBWV9NUztcblxudmFyIExPTkdfUFJFU1NfQUxMT1dFRF9NT1ZFTUVOVCA9IDEwO1xuXG4vLyBEZWZhdWx0IGFtb3VudCBcImFjdGl2ZVwiIHJlZ2lvbiBwcm90cnVkZXMgYmV5b25kIGJveFxuXG4vKipcbiAqIEJ5IGNvbnZlbnRpb24sIG1ldGhvZHMgcHJlZml4ZWQgd2l0aCB1bmRlcnNjb3JlcyBhcmUgbWVhbnQgdG8gYmUgQHByaXZhdGUsXG4gKiBhbmQgbm90IEBwcm90ZWN0ZWQuIE1peGVycyBzaG91bGRuJ3QgYWNjZXNzIHRoZW0gLSBub3QgZXZlbiB0byBwcm92aWRlIHRoZW1cbiAqIGFzIGNhbGxiYWNrIGhhbmRsZXJzLlxuICpcbiAqXG4gKiA9PT09PT09PT09IEdlb21ldHJ5ID09PT09PT09PVxuICogYFRvdWNoYWJsZWAgb25seSBhc3N1bWVzIHRoYXQgdGhlcmUgZXhpc3RzIGEgYEhpdFJlY3RgIG5vZGUuIFRoZSBgUHJlc3NSZWN0YFxuICogaXMgYW4gYWJzdHJhY3QgYm94IHRoYXQgaXMgZXh0ZW5kZWQgYmV5b25kIHRoZSBgSGl0UmVjdGAuXG4gKlxuICogICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqICB8ICAgICAgICAgICAgICAgICAgICAgICAgICB8IC0gXCJTdGFydFwiIGV2ZW50cyBpbiBgSGl0UmVjdGAgY2F1c2UgYEhpdFJlY3RgXG4gKiAgfCAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgfCAgIHRvIGJlY29tZSB0aGUgcmVzcG9uZGVyLlxuICogIHwgIHwgICstLS0tLS0tLS0tLS0tLSsgIHwgIHwgLSBgSGl0UmVjdGAgaXMgdHlwaWNhbGx5IGV4cGFuZGVkIGFyb3VuZFxuICogIHwgIHwgIHwgICAgICAgICAgICAgIHwgIHwgIHwgICB0aGUgYFZpc3VhbFJlY3RgLCBidXQgc2hpZnRlZCBkb3dud2FyZC5cbiAqICB8ICB8ICB8ICBWaXN1YWxSZWN0ICB8ICB8ICB8IC0gQWZ0ZXIgcHJlc3NpbmcgZG93biwgYWZ0ZXIgc29tZSBkZWxheSxcbiAqICB8ICB8ICB8ICAgICAgICAgICAgICB8ICB8ICB8ICAgYW5kIGJlZm9yZSBsZXR0aW5nIHVwLCB0aGUgVmlzdWFsIFJlYWN0XG4gKiAgfCAgfCAgKy0tLS0tLS0tLS0tLS0tKyAgfCAgfCAgIHdpbGwgYmVjb21lIFwiYWN0aXZlXCIuIFRoaXMgbWFrZXMgaXQgZWxpZ2libGVcbiAqICB8ICB8ICAgICBIaXRSZWN0ICAgICAgICB8ICB8ICAgZm9yIGJlaW5nIGhpZ2hsaWdodGVkIChzbyBsb25nIGFzIHRoZVxuICogIHwgICstLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHwgICBwcmVzcyByZW1haW5zIGluIHRoZSBgUHJlc3NSZWN0YCkuXG4gKiAgfCAgICAgICAgUHJlc3NSZWN0ICAgICBvICAgfFxuICogICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLStcbiAqICAgICAgICAgICBPdXQgUmVnaW9uICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLSsgVGhpcyBnYXAgYmV0d2VlbiB0aGUgYEhpdFJlY3RgIGFuZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgUHJlc3NSZWN0YCBhbGxvd3MgYSB0b3VjaCB0byBtb3ZlIGZhciBhd2F5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gdGhlIG9yaWdpbmFsIGhpdCByZWN0LCBhbmQgcmVtYWluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkLCBhbmQgZWxpZ2libGUgZm9yIGEgXCJQcmVzc1wiLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDdXN0b21pemUgdGhpcyB2aWFcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCgpYC5cbiAqXG4gKlxuICpcbiAqID09PT09PT0gU3RhdGUgTWFjaGluZSA9PT09PT09XG4gKlxuICogKy0tLS0tLS0tLS0tLS0rIDwtLS0rIFJFU1BPTkRFUl9SRUxFQVNFXG4gKiB8Tk9UX1JFU1BPTkRFUnxcbiAqICstLS0tLS0tLS0tLS0tKyA8LS0tKyBSRVNQT05ERVJfVEVSTUlOQVRFRFxuICogICAgICtcbiAqICAgICB8IFJFU1BPTkRFUl9HUkFOVCAoSGl0UmVjdClcbiAqICAgICB2XG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgREVMQVkgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIFQgKyBERUxBWSAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIHxSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU58Ky0tLS0tLS0tPnxSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOfCArLS0tLS0tLS0tLS0tPiB8UkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOfFxuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiAgICAgKyAgICAgICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgKyAgICAgICAgICAgXiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICAgIF5cbiAqICAgICB8TEVBVkVfICAgICAgfEVOVEVSXyAgICAgICAgICAgICAgICAgICB8TEVBVkVfICAgICB8RU5URVJfICAgICAgICAgICAgICAgICAgICAgICAgICAgfExFQVZFXyAgICAgfEVOVEVSX1xuICogICAgIHxQUkVTU19SRUNUICB8UFJFU1NfUkVDVCAgICAgICAgICAgICAgIHxQUkVTU19SRUNUIHxQUkVTU19SRUNUICAgICAgICAgICAgICAgICAgICAgICB8UFJFU1NfUkVDVCB8UFJFU1NfUkVDVFxuICogICAgIHwgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICB8XG4gKiAgICAgdiAgICAgICAgICAgICsgICAgICAgICAgICAgICAgICAgICAgICAgdiAgICAgICAgICAgKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICtcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgREVMQVkgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqIHxSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUfCstLS0tLS0tPnxSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVHwgICAgICAgICAgICAgICB8UkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVHxcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAqXG4gKiBUICsgREVMQVkgPT4gTE9OR19QUkVTU19ERUxBWV9NUyArIERFTEFZXG4gKlxuICogTm90IGRyYXduIGFyZSB0aGUgc2lkZSBlZmZlY3RzIG9mIGVhY2ggdHJhbnNpdGlvbi4gVGhlIG1vc3QgaW1wb3J0YW50IHNpZGVcbiAqIGVmZmVjdCBpcyB0aGUgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCBhYnN0cmFjdCBtZXRob2QgaW52b2NhdGlvbiB0aGF0IG9jY3Vyc1xuICogd2hlbiBhIHJlc3BvbmRlciBpcyByZWxlYXNlZCB3aGlsZSBpbiBlaXRoZXIgb2YgdGhlIFwiUHJlc3NcIiBzdGF0ZXMuXG4gKlxuICogVGhlIG90aGVyIGltcG9ydGFudCBzaWRlIGVmZmVjdHMgYXJlIHRoZSBoaWdobGlnaHQgYWJzdHJhY3QgbWV0aG9kXG4gKiBpbnZvY2F0aW9ucyAoaW50ZXJuYWwgY2FsbGJhY2tzKSB0byBiZSBpbXBsZW1lbnRlZCBieSB0aGUgbWl4ZXIuXG4gKlxuICpcbiAqIEBsZW5kcyBUb3VjaGFibGUucHJvdG90eXBlXG4gKi9cbnZhciBUb3VjaGFibGVNaXhpbiA9IHtcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghUGxhdGZvcm0uaXNUVk9TKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdHZFdmVudEhhbmRsZXIgPSBuZXcgVFZFdmVudEhhbmRsZXIoKTtcbiAgICB0aGlzLl90dkV2ZW50SGFuZGxlci5lbmFibGUodGhpcywgZnVuY3Rpb24oY21wLCBldnQpIHtcbiAgICAgIHZhciBteVRhZyA9IFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKGNtcCk7XG4gICAgICBldnQuZGlzcGF0Y2hDb25maWcgPSB7fTtcbiAgICAgIGlmIChteVRhZyA9PT0gZXZ0LnRhZykge1xuICAgICAgICBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luICYmIGNtcC50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luKGV2dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ2JsdXInKSB7XG4gICAgICAgICAgY21wLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0ICYmIGNtcC50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dChldnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC5ldmVudFR5cGUgPT09ICdzZWxlY3QnKSB7XG4gICAgICAgICAgY21wLnRvdWNoYWJsZUhhbmRsZVByZXNzICYmIGNtcC50b3VjaGFibGVIYW5kbGVQcmVzcyhldnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCB0aW1lb3V0cyBvbiB1bm1vdW50XG4gICAqL1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3R2RXZlbnRIYW5kbGVyKSB7XG4gICAgICB0aGlzLl90dkV2ZW50SGFuZGxlci5kaXNhYmxlKCk7XG4gICAgICBkZWxldGUgdGhpcy5fdHZFdmVudEhhbmRsZXI7XG4gICAgfVxuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCk7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0KTtcbiAgfSxcblxuICAvKipcbiAgICogSXQncyBwcmVmZXIgdGhhdCBtaXhpbnMgZGV0ZXJtaW5lIHN0YXRlIGluIHRoaXMgd2F5LCBoYXZpbmcgdGhlIGNsYXNzXG4gICAqIGV4cGxpY2l0bHkgbWl4IHRoZSBzdGF0ZSBpbiB0aGUgb25lIGFuZCBvbmx5IGBnZXRJbml0aWFsU3RhdGVgIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fSBTdGF0ZSBvYmplY3QgdG8gYmUgcGxhY2VkIGluc2lkZSBvZlxuICAgKiBgdGhpcy5zdGF0ZS50b3VjaGFibGVgLlxuICAgKi9cbiAgdG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG91Y2hhYmxlOiB7dG91Y2hTdGF0ZTogdW5kZWZpbmVkLCByZXNwb25kZXJJRDogbnVsbH1cbiAgICB9O1xuICB9LFxuXG4gIC8vID09PT0gSG9va3MgdG8gR2VzdHVyZSBSZXNwb25kZXIgc3lzdGVtID09PT1cbiAgLyoqXG4gICAqIE11c3QgcmV0dXJuIHRydWUgaWYgZW1iZWRkZWQgaW4gYSBuYXRpdmUgcGxhdGZvcm0gc2Nyb2xsIHZpZXcuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3Q6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5yZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogTXVzdCByZXR1cm4gdHJ1ZSB0byBzdGFydCB0aGUgcHJvY2VzcyBvZiBgVG91Y2hhYmxlYC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMuZGlzYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB0cnVlIHRvIGNhbmNlbCBwcmVzcyBvbiBsb25nIHByZXNzLlxuICAgKi9cbiAgdG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyR3JhbnRgIGV2ZW50LlxuICAgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBlIFN5bnRoZXRpYyBldmVudCBmcm9tIGV2ZW50IHN5c3RlbS5cbiAgICpcbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50OiBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGRpc3BhdGNoSUQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgLy8gU2luY2UgZSBpcyB1c2VkIGluIGEgY2FsbGJhY2sgaW52b2tlZCBvbiBhbm90aGVyIGV2ZW50IGxvb3BcbiAgICAvLyAoYXMgaW4gc2V0VGltZW91dCBldGMpLCB3ZSBuZWVkIHRvIGNhbGwgZS5wZXJzaXN0KCkgb24gdGhlXG4gICAgLy8gZXZlbnQgdG8gbWFrZSBzdXJlIGl0IGRvZXNuJ3QgZ2V0IHJldXNlZCBpbiB0aGUgZXZlbnQgb2JqZWN0IHBvb2wuXG4gICAgZS5wZXJzaXN0KCk7XG5cbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ID0gbnVsbDtcblxuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGUgPSBTdGF0ZXMuTk9UX1JFU1BPTkRFUjtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRCA9IGRpc3BhdGNoSUQ7XG4gICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLlJFU1BPTkRFUl9HUkFOVCwgZSk7XG4gICAgdmFyIGRlbGF5TVMgPVxuICAgICAgdGhpcy50b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TICE9PSB1bmRlZmluZWQgP1xuICAgICAgTWF0aC5tYXgodGhpcy50b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TKCksIDApIDogSElHSExJR0hUX0RFTEFZX01TO1xuICAgIGRlbGF5TVMgPSBpc05hTihkZWxheU1TKSA/IEhJR0hMSUdIVF9ERUxBWV9NUyA6IGRlbGF5TVM7XG4gICAgaWYgKGRlbGF5TVMgIT09IDApIHtcbiAgICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsYXkuYmluZCh0aGlzLCBlKSxcbiAgICAgICAgZGVsYXlNU1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGFuZGxlRGVsYXkoZSk7XG4gICAgfVxuXG4gICAgdmFyIGxvbmdEZWxheU1TID1cbiAgICAgIHRoaXMudG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIE1hdGgubWF4KHRoaXMudG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUygpLCAxMCkgOiBMT05HX1BSRVNTX0RFTEFZX01TO1xuICAgIGxvbmdEZWxheU1TID0gaXNOYU4obG9uZ0RlbGF5TVMpID8gTE9OR19QUkVTU19ERUxBWV9NUyA6IGxvbmdEZWxheU1TO1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgIHRoaXMuX2hhbmRsZUxvbmdEZWxheS5iaW5kKHRoaXMsIGUpLFxuICAgICAgbG9uZ0RlbGF5TVMgKyBkZWxheU1TXG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogUGxhY2UgYXMgY2FsbGJhY2sgZm9yIGEgRE9NIGVsZW1lbnQncyBgb25SZXNwb25kZXJSZWxlYXNlYCBldmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2U6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX1JFTEVBU0UsIGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlclRlcm1pbmF0ZWAgZXZlbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGU6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX1RFUk1JTkFURUQsIGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlck1vdmVgIGV2ZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZTogZnVuY3Rpb24oZSkge1xuICAgIC8vIE5vdCBlbm91Z2ggdGltZSBlbGFwc2VkIHlldCwgd2FpdCBmb3IgaGlnaGxpZ2h0IC1cbiAgICAvLyB0aGlzIGlzIGp1c3QgYSBwZXJmIG9wdGltaXphdGlvbi5cbiAgICBpZiAodGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1lYXN1cmVtZW50IG1heSBub3QgaGF2ZSByZXR1cm5lZCB5ZXQuXG4gICAgaWYgKCF0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb25PbkFjdGl2YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlO1xuICAgIHZhciBkaW1lbnNpb25zT25BY3RpdmF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlO1xuICAgIHZhciBwcmVzc1JlY3RPZmZzZXQgPSB0aGlzLnRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCA/XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCgpIDoge1xuICAgICAgICBsZWZ0OiBQUkVTU19FWFBBTkRfUFgsXG4gICAgICAgIHJpZ2h0OiBQUkVTU19FWFBBTkRfUFgsXG4gICAgICAgIHRvcDogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICBib3R0b206IFBSRVNTX0VYUEFORF9QWFxuICAgICAgfTtcblxuICAgIHZhciBwcmVzc0V4cGFuZExlZnQgPSBwcmVzc1JlY3RPZmZzZXQubGVmdDtcbiAgICB2YXIgcHJlc3NFeHBhbmRUb3AgPSBwcmVzc1JlY3RPZmZzZXQudG9wO1xuICAgIHZhciBwcmVzc0V4cGFuZFJpZ2h0ID0gcHJlc3NSZWN0T2Zmc2V0LnJpZ2h0O1xuICAgIHZhciBwcmVzc0V4cGFuZEJvdHRvbSA9IHByZXNzUmVjdE9mZnNldC5ib3R0b207XG5cbiAgICB2YXIgaGl0U2xvcCA9IHRoaXMudG91Y2hhYmxlR2V0SGl0U2xvcCA/XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldEhpdFNsb3AoKSA6IG51bGw7XG5cbiAgICBpZiAoaGl0U2xvcCkge1xuICAgICAgcHJlc3NFeHBhbmRMZWZ0ICs9IGhpdFNsb3AubGVmdDtcbiAgICAgIHByZXNzRXhwYW5kVG9wICs9IGhpdFNsb3AudG9wO1xuICAgICAgcHJlc3NFeHBhbmRSaWdodCArPSBoaXRTbG9wLnJpZ2h0O1xuICAgICAgcHJlc3NFeHBhbmRCb3R0b20gKz0gaGl0U2xvcC5ib3R0b207XG4gICAgfVxuXG4gICAgdmFyIHRvdWNoID0gVG91Y2hFdmVudFV0aWxzLmV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICB2YXIgcGFnZVggPSB0b3VjaCAmJiB0b3VjaC5wYWdlWDtcbiAgICB2YXIgcGFnZVkgPSB0b3VjaCAmJiB0b3VjaC5wYWdlWTtcblxuICAgIGlmICh0aGlzLnByZXNzSW5Mb2NhdGlvbikge1xuICAgICAgdmFyIG1vdmVkRGlzdGFuY2UgPSB0aGlzLl9nZXREaXN0YW5jZUJldHdlZW5Qb2ludHMocGFnZVgsIHBhZ2VZLCB0aGlzLnByZXNzSW5Mb2NhdGlvbi5wYWdlWCwgdGhpcy5wcmVzc0luTG9jYXRpb24ucGFnZVkpO1xuICAgICAgaWYgKG1vdmVkRGlzdGFuY2UgPiBMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGlzVG91Y2hXaXRoaW5BY3RpdmUgPVxuICAgICAgICBwYWdlWCA+IHBvc2l0aW9uT25BY3RpdmF0ZS5sZWZ0IC0gcHJlc3NFeHBhbmRMZWZ0ICYmXG4gICAgICAgIHBhZ2VZID4gcG9zaXRpb25PbkFjdGl2YXRlLnRvcCAtIHByZXNzRXhwYW5kVG9wICYmXG4gICAgICAgIHBhZ2VYIDxcbiAgICAgICAgICBwb3NpdGlvbk9uQWN0aXZhdGUubGVmdCArXG4gICAgICAgICAgZGltZW5zaW9uc09uQWN0aXZhdGUud2lkdGggK1xuICAgICAgICAgIHByZXNzRXhwYW5kUmlnaHQgJiZcbiAgICAgICAgcGFnZVkgPFxuICAgICAgICAgIHBvc2l0aW9uT25BY3RpdmF0ZS50b3AgK1xuICAgICAgICAgIGRpbWVuc2lvbnNPbkFjdGl2YXRlLmhlaWdodCArXG4gICAgICAgICAgcHJlc3NFeHBhbmRCb3R0b207XG4gICAgaWYgKGlzVG91Y2hXaXRoaW5BY3RpdmUpIHtcbiAgICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5FTlRFUl9QUkVTU19SRUNULCBlKTtcbiAgICAgIHZhciBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgICBpZiAoY3VyU3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4pIHtcbiAgICAgICAgLy8gZml4IGZvciB0Nzk2NzQyMFxuICAgICAgICB0aGlzLl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuTEVBVkVfUFJFU1NfUkVDVCwgZSk7XG4gICAgfVxuICB9LFxuXG4gIC8vID09PT0gQWJzdHJhY3QgQXBwbGljYXRpb24gQ2FsbGJhY2tzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIHNob3VsZCBiZSBoaWdobGlnaHRlZC4gTWl4ZXJzIHNob3VsZCBpbXBsZW1lbnQgdGhpc1xuICAgKiB0byB2aXN1YWxseSBkaXN0aW5ndWlzaCB0aGUgYFZpc3VhbFJlY3RgIHNvIHRoYXQgdGhlIHVzZXIga25vd3MgdGhhdFxuICAgKiByZWxlYXNpbmcgYSB0b3VjaCB3aWxsIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgKGFuYWxvZyB0byBjbGljaykuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbixcbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcImFjdGl2ZVwiIChpbiB0aGF0IGl0IGlzIHN0aWxsIGVsaWdpYmxlIHRvIGJlY29tZVxuICAgKiBhIFwic2VsZWN0XCIpIGJ1dCB0aGUgdG91Y2ggaGFzIGxlZnQgdGhlIGBQcmVzc1JlY3RgLiBVc3VhbGx5IHRoZSBtaXhlciB3aWxsXG4gICAqIHdhbnQgdG8gdW5oaWdobGlnaHQgdGhlIGBWaXN1YWxSZWN0YC4gSWYgdGhlIHVzZXIgKHdoaWxlIHByZXNzaW5nKSBtb3Zlc1xuICAgKiBiYWNrIGludG8gdGhlIGBQcmVzc1JlY3RgIGB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luYCB3aWxsIGJlIGludm9rZWRcbiAgICogYWdhaW4gYW5kIHRoZSBtaXhlciBzaG91bGQgcHJvYmFibHkgaGlnaGxpZ2h0IHRoZSBgVmlzdWFsUmVjdGAgYWdhaW4uIFRoaXNcbiAgICogZXZlbnQgd2lsbCBub3QgZmlyZSBvbiBhbiBgdG91Y2hFbmQvbW91c2VVcGAgZXZlbnQsIG9ubHkgbW92ZSBldmVudHMgd2hpbGVcbiAgICogdGhlIHVzZXIgaXMgZGVwcmVzc2luZyB0aGUgbW91c2UvdG91Y2guXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcInNlbGVjdGVkXCIgLSBtZWFuaW5nIHRoZSBpbnRlcmFjdGlvbiBlbmRlZCBieVxuICAgKiBsZXR0aW5nIHVwIHdoaWxlIHRoZSBpdGVtIHdhcyBlaXRoZXIgaW4gdGhlIHN0YXRlXG4gICAqIGBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOYCBvciBgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOYC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIGxvbmcgcHJlc3NlZCAtIG1lYW5pbmcgdGhlIGludGVyYWN0aW9uIGVuZGVkIGJ5XG4gICAqIGxldHRpbmcgdXAgd2hpbGUgdGhlIGl0ZW0gd2FzIGluIGBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU5gLiBJZlxuICAgKiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBpcyAqbm90KiBwcm92aWRlZCwgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCB3aWxsXG4gICAqIGJlIGNhbGxlZCBhcyBpdCBub3JtYWxseSBpcy4gSWYgYHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzc2AgaXMgcHJvdmlkZWQsIGJ5XG4gICAqIGRlZmF1bHQgYW55IGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgY2FsbGJhY2sgd2lsbCBub3QgYmUgaW52b2tlZC4gVG9cbiAgICogb3ZlcnJpZGUgdGhpcyBkZWZhdWx0IGJlaGF2aW9yLCBvdmVycmlkZSBgdG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzYFxuICAgKiB0byByZXR1cm4gZmFsc2UuIEFzIGEgcmVzdWx0LCBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgICogbGlmdGluZyB1cCwgZXZlbiBpZiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBoYXMgYWxzbyBiZWVuIGNhbGxlZC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzczogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXMgdG8gd2FpdCBiZWZvcmUgdHJpZ2dlcmluZyBhIGhpZ2hsaWdodC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVM6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbW91bnQgdG8gZXh0ZW5kIHRoZSBgSGl0UmVjdGAgaW50byB0aGUgYFByZXNzUmVjdGAuIFBvc2l0aXZlXG4gICAqIG51bWJlcnMgbWVhbiB0aGUgc2l6ZSBleHBhbmRzIG91dHdhcmRzLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvblxuICAgKi9cblxuXG5cbiAgLy8gPT09PSBJbnRlcm5hbCBMb2dpYyA9PT09XG5cbiAgLyoqXG4gICAqIE1lYXN1cmVzIHRoZSBgSGl0UmVjdGAgbm9kZSBvbiBhY3RpdmF0aW9uLiBUaGUgQm91bmRpbmcgcmVjdGFuZ2xlIGlzIHdpdGhcbiAgICogcmVzcGVjdCB0byB2aWV3cG9ydCAtIG5vdCBwYWdlLCBzbyBhZGRpbmcgdGhlIGBwYWdlWE9mZnNldC9wYWdlWU9mZnNldGBcbiAgICogc2hvdWxkIHJlc3VsdCBpbiBwb2ludHMgdGhhdCBhcmUgaW4gdGhlIHNhbWUgY29vcmRpbmF0ZSBzeXN0ZW0gYXMgYW5cbiAgICogZXZlbnQncyBgZ2xvYmFsWC9nbG9iYWxZYCBkYXRhIHZhbHVlcy5cbiAgICpcbiAgICogLSBDb25zaWRlciBjYWNoaW5nIHRoaXMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgY29tcG9uZW50LCBvciBwb3NzaWJseVxuICAgKiAgIGJlaW5nIGFibGUgdG8gc2hhcmUgdGhpcyBjYWNoZSBiZXR3ZWVuIGFueSBgU2Nyb2xsTWFwYCB2aWV3LlxuICAgKlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1lYXN1cmVNZXRyaWNzT25BY3RpdmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0YWcgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRDtcbiAgICBpZiAodGFnID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBVSU1hbmFnZXIubWVhc3VyZSh0YWcsIHRoaXMuX2hhbmRsZVF1ZXJ5TGF5b3V0KTtcbiAgfSxcblxuICBfaGFuZGxlUXVlcnlMYXlvdXQ6IGZ1bmN0aW9uKGwsIHQsIHcsIGgsIGdsb2JhbFgsIGdsb2JhbFkpIHtcbiAgICAvL2Rvbid0IGRvIGFueXRoaW5nIFVJTWFuYWdlciBmYWlsZWQgdG8gbWVhc3VyZSBub2RlXG4gICAgaWYgKCFsICYmICF0ICYmICF3ICYmICFoICYmICFnbG9iYWxYICYmICFnbG9iYWxZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSAmJlxuICAgICAgUG9zaXRpb24ucmVsZWFzZSh0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUpO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlICYmXG4gICAgICBCb3VuZGluZ0RpbWVuc2lvbnMucmVsZWFzZSh0aGlzLnN0YXRlLnRvdWNoYWJsZS5kaW1lbnNpb25zT25BY3RpdmF0ZSk7XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlID0gUG9zaXRpb24uZ2V0UG9vbGVkKGdsb2JhbFgsIGdsb2JhbFkpO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlID0gQm91bmRpbmdEaW1lbnNpb25zLmdldFBvb2xlZCh3LCBoKTtcbiAgfSxcblxuICBfaGFuZGxlRGVsYXk6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkRFTEFZLCBlKTtcbiAgfSxcblxuICBfaGFuZGxlTG9uZ0RlbGF5OiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgaWYgKGN1clN0YXRlICE9PSBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiAmJlxuICAgICAgICBjdXJTdGF0ZSAhPT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTikge1xuICAgICAgY29uc29sZS5lcnJvcignQXR0ZW1wdGVkIHRvIHRyYW5zaXRpb24gZnJvbSBzdGF0ZSBgJyArIGN1clN0YXRlICsgJ2AgdG8gYCcgK1xuICAgICAgICBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOICsgJ2AsIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIFRoaXMgaXMgJyArXG4gICAgICAgICdtb3N0IGxpa2VseSBkdWUgdG8gYFRvdWNoYWJsZS5sb25nUHJlc3NEZWxheVRpbWVvdXRgIG5vdCBiZWluZyBjYW5jZWxsZWQuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5MT05HX1BSRVNTX0RFVEVDVEVELCBlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGEgc3RhdGUgbWFjaGluZSBzaWduYWwsIHBlcmZvcm1zIHNpZGUgZWZmZWN0cyBvZiB0aGUgdHJhbnNpdGlvblxuICAgKiBhbmQgc3RvcmVzIHRoZSBuZXcgc3RhdGUuIFZhbGlkYXRlcyB0aGUgdHJhbnNpdGlvbiBhcyB3ZWxsLlxuICAgKlxuICAgKiBAcGFyYW0ge1NpZ25hbHN9IHNpZ25hbCBTdGF0ZSBtYWNoaW5lIHNpZ25hbC5cbiAgICogQHRocm93cyBFcnJvciBpZiBpbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gb3IgdW5yZWNvZ25pemVkIHNpZ25hbC5cbiAgICogQHNpZGVlZmZlY3RzXG4gICAqL1xuICBfcmVjZWl2ZVNpZ25hbDogZnVuY3Rpb24oc2lnbmFsLCBlKSB7XG4gICAgdmFyIHJlc3BvbmRlcklEID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQ7XG4gICAgdmFyIGN1clN0YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZTtcbiAgICB2YXIgbmV4dFN0YXRlID0gVHJhbnNpdGlvbnNbY3VyU3RhdGVdICYmIFRyYW5zaXRpb25zW2N1clN0YXRlXVtzaWduYWxdO1xuICAgIGlmICghcmVzcG9uZGVySUQgJiYgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghbmV4dFN0YXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbnJlY29nbml6ZWQgc2lnbmFsIGAnICsgc2lnbmFsICsgJ2Agb3Igc3RhdGUgYCcgKyBjdXJTdGF0ZSArXG4gICAgICAgICdgIGZvciBUb3VjaGFibGUgcmVzcG9uZGVyIGAnICsgcmVzcG9uZGVySUQgKyAnYCdcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChuZXh0U3RhdGUgPT09IFN0YXRlcy5FUlJPUikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlIGNhbm5vdCB0cmFuc2l0aW9uIGZyb20gYCcgKyBjdXJTdGF0ZSArICdgIHRvIGAnICsgc2lnbmFsICtcbiAgICAgICAgJ2AgZm9yIHJlc3BvbmRlciBgJyArIHJlc3BvbmRlcklEICsgJ2AnXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY3VyU3RhdGUgIT09IG5leHRTdGF0ZSkge1xuICAgICAgdGhpcy5fcGVyZm9ybVNpZGVFZmZlY3RzRm9yVHJhbnNpdGlvbihjdXJTdGF0ZSwgbmV4dFN0YXRlLCBzaWduYWwsIGUpO1xuICAgICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICB9XG4gIH0sXG5cbiAgX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCk7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgPSBudWxsO1xuICB9LFxuXG4gIF9pc0hpZ2hsaWdodDogZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlID09PSBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiB8fFxuICAgICAgICAgICBzdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjtcbiAgfSxcblxuICBfc2F2ZVByZXNzSW5Mb2NhdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIHZhciB0b3VjaCA9IFRvdWNoRXZlbnRVdGlscy5leHRyYWN0U2luZ2xlVG91Y2goZS5uYXRpdmVFdmVudCk7XG4gICAgdmFyIHBhZ2VYID0gdG91Y2ggJiYgdG91Y2gucGFnZVg7XG4gICAgdmFyIHBhZ2VZID0gdG91Y2ggJiYgdG91Y2gucGFnZVk7XG4gICAgdmFyIGxvY2F0aW9uWCA9IHRvdWNoICYmIHRvdWNoLmxvY2F0aW9uWDtcbiAgICB2YXIgbG9jYXRpb25ZID0gdG91Y2ggJiYgdG91Y2gubG9jYXRpb25ZO1xuICAgIHRoaXMucHJlc3NJbkxvY2F0aW9uID0ge3BhZ2VYLCBwYWdlWSwgbG9jYXRpb25YLCBsb2NhdGlvbll9O1xuICB9LFxuXG4gIF9nZXREaXN0YW5jZUJldHdlZW5Qb2ludHM6IGZ1bmN0aW9uIChhWCwgYVksIGJYLCBiWSkge1xuICAgIHZhciBkZWx0YVggPSBhWCAtIGJYO1xuICAgIHZhciBkZWx0YVkgPSBhWSAtIGJZO1xuICAgIHJldHVybiBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKTtcbiAgfSxcblxuICAvKipcbiAgICogV2lsbCBwZXJmb3JtIGEgdHJhbnNpdGlvbiBiZXR3ZWVuIHRvdWNoYWJsZSBzdGF0ZXMsIGFuZCBpZGVudGlmeSBhbnlcbiAgICogaGlnaGxpZ2h0aW5nIG9yIHVuaGlnaGxpZ2h0aW5nIHRoYXQgbXVzdCBiZSBwZXJmb3JtZWQgZm9yIHRoaXMgcGFydGljdWxhclxuICAgKiB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0YXRlc30gY3VyU3RhdGUgQ3VycmVudCBUb3VjaGFibGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7U3RhdGVzfSBuZXh0U3RhdGUgTmV4dCBUb3VjaGFibGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7U2lnbmFsfSBzaWduYWwgU2lnbmFsIHRoYXQgdHJpZ2dlcmVkIHRoZSB0cmFuc2l0aW9uLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIE5hdGl2ZSBldmVudC5cbiAgICogQHNpZGVlZmZlY3RzXG4gICAqL1xuICBfcGVyZm9ybVNpZGVFZmZlY3RzRm9yVHJhbnNpdGlvbjogZnVuY3Rpb24oY3VyU3RhdGUsIG5leHRTdGF0ZSwgc2lnbmFsLCBlKSB7XG4gICAgdmFyIGN1cklzSGlnaGxpZ2h0ID0gdGhpcy5faXNIaWdobGlnaHQoY3VyU3RhdGUpO1xuICAgIHZhciBuZXdJc0hpZ2hsaWdodCA9IHRoaXMuX2lzSGlnaGxpZ2h0KG5leHRTdGF0ZSk7XG5cbiAgICB2YXIgaXNGaW5hbFNpZ25hbCA9XG4gICAgICBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1RFUk1JTkFURUQgfHxcbiAgICAgIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRTtcblxuICAgIGlmIChpc0ZpbmFsU2lnbmFsKSB7XG4gICAgICB0aGlzLl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQoKTtcbiAgICB9XG5cbiAgICBpZiAoIUlzQWN0aXZlW2N1clN0YXRlXSAmJiBJc0FjdGl2ZVtuZXh0U3RhdGVdKSB7XG4gICAgICB0aGlzLl9yZW1lYXN1cmVNZXRyaWNzT25BY3RpdmF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKElzUHJlc3NpbmdJbltjdXJTdGF0ZV0gJiYgc2lnbmFsID09PSBTaWduYWxzLkxPTkdfUFJFU1NfREVURUNURUQpIHtcbiAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzKGUpO1xuICAgIH1cblxuICAgIGlmIChuZXdJc0hpZ2hsaWdodCAmJiAhY3VySXNIaWdobGlnaHQpIHtcbiAgICAgIHRoaXMuX3N0YXJ0SGlnaGxpZ2h0KGUpO1xuICAgIH0gZWxzZSBpZiAoIW5ld0lzSGlnaGxpZ2h0ICYmIGN1cklzSGlnaGxpZ2h0KSB7XG4gICAgICB0aGlzLl9lbmRIaWdobGlnaHQoZSk7XG4gICAgfVxuXG4gICAgaWYgKElzUHJlc3NpbmdJbltjdXJTdGF0ZV0gJiYgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFKSB7XG4gICAgICB2YXIgaGFzTG9uZ1ByZXNzSGFuZGxlciA9ICEhdGhpcy5wcm9wcy5vbkxvbmdQcmVzcztcbiAgICAgIHZhciBwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3MgPVxuICAgICAgICBJc0xvbmdQcmVzc2luZ0luW2N1clN0YXRlXSAmJiAoICAgIC8vIFdlICphcmUqIGxvbmcgcHJlc3NpbmcuLlxuICAgICAgICAgICFoYXNMb25nUHJlc3NIYW5kbGVyIHx8ICAgICAgICAgIC8vIEJ1dCBlaXRoZXIgaGFzIG5vIGxvbmcgaGFuZGxlclxuICAgICAgICAgICF0aGlzLnRvdWNoYWJsZUxvbmdQcmVzc0NhbmNlbHNQcmVzcygpIC8vIG9yIHdlJ3JlIHRvbGQgdG8gaWdub3JlIGl0LlxuICAgICAgICApO1xuXG4gICAgICB2YXIgc2hvdWxkSW52b2tlUHJlc3MgPSAgIUlzTG9uZ1ByZXNzaW5nSW5bY3VyU3RhdGVdIHx8IHByZXNzSXNMb25nQnV0U3RpbGxDYWxsT25QcmVzcztcbiAgICAgIGlmIChzaG91bGRJbnZva2VQcmVzcyAmJiB0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzKSB7XG4gICAgICAgIGlmICghbmV3SXNIaWdobGlnaHQgJiYgIWN1cklzSGlnaGxpZ2h0KSB7XG4gICAgICAgICAgLy8gd2UgbmV2ZXIgaGlnaGxpZ2h0ZWQgYmVjYXVzZSBvZiBkZWxheSwgYnV0IHdlIHNob3VsZCBoaWdobGlnaHQgbm93XG4gICAgICAgICAgdGhpcy5fc3RhcnRIaWdobGlnaHQoZSk7XG4gICAgICAgICAgdGhpcy5fZW5kSGlnaGxpZ2h0KGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUHJlc3MoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IG51bGw7XG4gIH0sXG5cbiAgX3N0YXJ0SGlnaGxpZ2h0OiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5fc2F2ZVByZXNzSW5Mb2NhdGlvbihlKTtcbiAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4gJiYgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luKGUpO1xuICB9LFxuXG4gIF9lbmRIaWdobGlnaHQ6IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAodGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dCkge1xuICAgICAgaWYgKHRoaXMudG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TICYmIHRoaXMudG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TKCkpIHtcbiAgICAgICAgdGhpcy5wcmVzc091dERlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQoZSk7XG4gICAgICAgIH0sIHRoaXMudG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dChlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbn07XG5cbnZhciBUb3VjaGFibGUgPSB7XG4gIE1peGluOiBUb3VjaGFibGVNaXhpbixcbiAgVE9VQ0hfVEFSR0VUX0RFQlVHOiBmYWxzZSwgLy8gSGlnaGxpZ2h0cyBhbGwgdG91Y2hhYmxlIHRhcmdldHMuIFRvZ2dsZSB3aXRoIEluc3BlY3Rvci5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBkZWJ1Z2dpbmcgb3ZlcmxheSB0byB2aXN1YWxpemUgdG91Y2ggdGFyZ2V0IHdpdGggaGl0U2xvcCAobWlnaHQgbm90IHdvcmsgb24gQW5kcm9pZCkuXG4gICAqL1xuICByZW5kZXJEZWJ1Z1ZpZXc6ICh7Y29sb3IsIGhpdFNsb3B9KSA9PiB7XG4gICAgaWYgKCFUb3VjaGFibGUuVE9VQ0hfVEFSR0VUX0RFQlVHKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCFfX0RFVl9fKSB7XG4gICAgICB0aHJvdyBFcnJvcignVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyBzaG91bGQgbm90IGJlIGVuYWJsZWQgaW4gcHJvZCEnKTtcbiAgICB9XG4gICAgY29uc3QgZGVidWdIaXRTbG9wU3R5bGUgPSB7fTtcbiAgICBoaXRTbG9wID0gaGl0U2xvcCB8fCB7dG9wOiAwLCBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBoaXRTbG9wKSB7XG4gICAgICBkZWJ1Z0hpdFNsb3BTdHlsZVtrZXldID0gLWhpdFNsb3Bba2V5XTtcbiAgICB9XG4gICAgY29uc3QgaGV4Q29sb3IgPSAnIycgKyAoJzAwMDAwMDAwJyArIG5vcm1hbGl6ZUNvbG9yKGNvbG9yKS50b1N0cmluZygxNikpLnN1YnN0cigtOCk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3XG4gICAgICAgIHBvaW50ZXJFdmVudHM9XCJub25lXCJcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICBib3JkZXJDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzU1JywgLy8gTW9yZSBvcGFxdWVcbiAgICAgICAgICBib3JkZXJXaWR0aDogMSxcbiAgICAgICAgICBib3JkZXJTdHlsZTogJ2Rhc2hlZCcsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBoZXhDb2xvci5zbGljZSgwLCAtMikgKyAnMEYnLCAvLyBMZXNzIG9wYXF1ZVxuICAgICAgICAgIC4uLmRlYnVnSGl0U2xvcFN0eWxlXG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlO1xuIl19