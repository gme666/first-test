8c81ddf415130355d650e8c7ac49512a
Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[typeof Symbol==='function'?Symbol.iterator:'@@iterator'](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if((typeof Symbol==='function'?Symbol.iterator:'@@iterator')in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports.default=
















































































function(props){
return transformToMatrix(props2transform(props),props.transform?props2transform(props.transform):null);
};var _Matrix2D=require('../Matrix2D');var _Matrix2D2=_interopRequireDefault(_Matrix2D);var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var pooledMatrix=new _Matrix2D2.default();function transformToMatrix(props,transform){pooledMatrix.reset();appendTransform(props);if(transform){appendTransform(transform);}return pooledMatrix.toArray();}function appendTransform(transform){pooledMatrix.appendTransform(transform.x+transform.originX,transform.y+transform.originY,transform.scaleX,transform.scaleY,transform.rotation,transform.skewX,transform.skewY,transform.originX,transform.originY);}function universal2axis(universal,axisX,axisY,defaultValue){var coords=[];var x=void 0;var y=void 0;if(_lodash2.default.isString(universal)){coords=universal.split(/\s*,\s*/);if(coords.length===2){x=+coords[0];y=+coords[1];}else if(coords.length===1){x=y=+coords[0];}}else if(_lodash2.default.isNumber(universal)){x=y=universal;}axisX=+axisX;if(!isNaN(axisX)){x=axisX;}axisY=+axisY;if(!isNaN(axisY)){y=axisY;}return[x||defaultValue||0,y||defaultValue||0];}function props2transform(props){var _universal2axis=universal2axis(props.origin,props.originX,props.originY),_universal2axis2=_slicedToArray(_universal2axis,2),originX=_universal2axis2[0],originY=_universal2axis2[1];var _universal2axis3=universal2axis(props.scale,props.scaleX,props.scaleY,1),_universal2axis4=_slicedToArray(_universal2axis3,2),scaleX=_universal2axis4[0],scaleY=_universal2axis4[1];var _universal2axis5=universal2axis(props.skew,props.skewX,props.skewY),_universal2axis6=_slicedToArray(_universal2axis5,2),skewX=_universal2axis6[0],skewY=_universal2axis6[1];var _universal2axis7=universal2axis(props.translate,_lodash2.default.isNil(props.translateX)?props.x:props.translateX,_lodash2.default.isNil(props.translateY)?props.y:props.translateY),_universal2axis8=_slicedToArray(_universal2axis7,2),translateX=_universal2axis8[0],translateY=_universal2axis8[1];return{rotation:+props.rotation||+props.rotate||0,scaleX:scaleX,scaleY:scaleY,originX:originX,originY:originY,skewX:skewX,skewY:skewY,x:translateX,y:translateY};}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dHJhY3RUcmFuc2Zvcm0uanMiXSwibmFtZXMiOlsicHJvcHMiLCJ0cmFuc2Zvcm1Ub01hdHJpeCIsInByb3BzMnRyYW5zZm9ybSIsInRyYW5zZm9ybSIsInBvb2xlZE1hdHJpeCIsInJlc2V0IiwiYXBwZW5kVHJhbnNmb3JtIiwidG9BcnJheSIsIngiLCJvcmlnaW5YIiwieSIsIm9yaWdpblkiLCJzY2FsZVgiLCJzY2FsZVkiLCJyb3RhdGlvbiIsInNrZXdYIiwic2tld1kiLCJ1bml2ZXJzYWwyYXhpcyIsInVuaXZlcnNhbCIsImF4aXNYIiwiYXhpc1kiLCJkZWZhdWx0VmFsdWUiLCJjb29yZHMiLCJpc1N0cmluZyIsInNwbGl0IiwibGVuZ3RoIiwiaXNOdW1iZXIiLCJpc05hTiIsIm9yaWdpbiIsInNjYWxlIiwic2tldyIsInRyYW5zbGF0ZSIsImlzTmlsIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJyb3RhdGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlGZSxTQUFVQSxLQUFWLENBQWlCO0FBQzVCLE1BQU9DLG1CQUFrQkMsZ0JBQWdCRixLQUFoQixDQUFsQixDQUEwQ0EsTUFBTUcsU0FBTixDQUFrQkQsZ0JBQWdCRixNQUFNRyxTQUF0QixDQUFsQixDQUFxRCxJQUEvRixDQUFQO0FBQ0gsQyxDQW5GRCxxQyxpREFDQSw4QixnSUFDQSxHQUFJQyxjQUFlLHdCQUFuQixDQUVBLFFBQVNILGtCQUFULENBQTJCRCxLQUEzQixDQUFrQ0csU0FBbEMsQ0FBNkMsQ0FDekNDLGFBQWFDLEtBQWIsR0FDQUMsZ0JBQWdCTixLQUFoQixFQUVBLEdBQUlHLFNBQUosQ0FBZSxDQUNYRyxnQkFBZ0JILFNBQWhCLEVBQ0gsQ0FFRCxNQUFPQyxjQUFhRyxPQUFiLEVBQVAsQ0FDSCxDQUVELFFBQVNELGdCQUFULENBQXlCSCxTQUF6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WyJpbXBvcnQgTWF0cml4MkQgZnJvbSAnLi4vTWF0cml4MkQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmxldCBwb29sZWRNYXRyaXggPSBuZXcgTWF0cml4MkQoKTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtVG9NYXRyaXgocHJvcHMsIHRyYW5zZm9ybSkge1xuICAgIHBvb2xlZE1hdHJpeC5yZXNldCgpO1xuICAgIGFwcGVuZFRyYW5zZm9ybShwcm9wcyk7XG5cbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgIGFwcGVuZFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICAgIH1cblxuICAgIHJldHVybiBwb29sZWRNYXRyaXgudG9BcnJheSgpO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRUcmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgcG9vbGVkTWF0cml4XG4gICAgICAgIC5hcHBlbmRUcmFuc2Zvcm0oXG4gICAgICAgICAgICB0cmFuc2Zvcm0ueCArIHRyYW5zZm9ybS5vcmlnaW5YLFxuICAgICAgICAgICAgdHJhbnNmb3JtLnkgKyB0cmFuc2Zvcm0ub3JpZ2luWSxcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zY2FsZVgsIHRyYW5zZm9ybS5zY2FsZVksXG4gICAgICAgICAgICB0cmFuc2Zvcm0ucm90YXRpb24sXG4gICAgICAgICAgICB0cmFuc2Zvcm0uc2tld1gsXG4gICAgICAgICAgICB0cmFuc2Zvcm0uc2tld1ksXG4gICAgICAgICAgICB0cmFuc2Zvcm0ub3JpZ2luWCxcbiAgICAgICAgICAgIHRyYW5zZm9ybS5vcmlnaW5ZXG4gICAgICAgICk7XG59XG5cbmZ1bmN0aW9uIHVuaXZlcnNhbDJheGlzKHVuaXZlcnNhbCwgYXhpc1gsIGF4aXNZLCBkZWZhdWx0VmFsdWUpIHtcbiAgICBsZXQgY29vcmRzID0gW107XG4gICAgbGV0IHg7XG4gICAgbGV0IHk7XG4gICAgaWYgKF8uaXNTdHJpbmcodW5pdmVyc2FsKSkge1xuICAgICAgICBjb29yZHMgPSB1bml2ZXJzYWwuc3BsaXQoL1xccyosXFxzKi8pO1xuICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgeCA9ICtjb29yZHNbMF07XG4gICAgICAgICAgICB5ID0gK2Nvb3Jkc1sxXTtcbiAgICAgICAgfSBlbHNlIGlm44CAKGNvb3Jkcy5sZW5ndGggPT09IDEp44CAe1xuICAgICAgICAgICAgeCA9IHkgPSArY29vcmRzWzBdO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChfLmlzTnVtYmVyKHVuaXZlcnNhbCkpIHtcbiAgICAgICAgeCA9IHkgPSB1bml2ZXJzYWw7XG4gICAgfVxuXG4gICAgYXhpc1ggPSArYXhpc1g7XG4gICAgaWYgKCFpc05hTihheGlzWCkpIHtcbiAgICAgICAgeCA9IGF4aXNYO1xuICAgIH1cblxuICAgIGF4aXNZID0gK2F4aXNZO1xuICAgIGlmICghaXNOYU4oYXhpc1kpKSB7XG4gICAgICAgIHkgPSBheGlzWTtcbiAgICB9XG5cbiAgICByZXR1cm4gW3ggfHwgZGVmYXVsdFZhbHVlIHx8IDAsIHkgfHwgZGVmYXVsdFZhbHVlIHx8IDBdO1xufVxuXG5mdW5jdGlvbiBwcm9wczJ0cmFuc2Zvcm0ocHJvcHMpIHtcbiAgICBsZXQgW29yaWdpblgsIG9yaWdpblldID0gdW5pdmVyc2FsMmF4aXMocHJvcHMub3JpZ2luLCBwcm9wcy5vcmlnaW5YLCBwcm9wcy5vcmlnaW5ZKTtcbiAgICBsZXQgW3NjYWxlWCwgc2NhbGVZXSA9IHVuaXZlcnNhbDJheGlzKHByb3BzLnNjYWxlLCBwcm9wcy5zY2FsZVgsIHByb3BzLnNjYWxlWSwgMSk7XG4gICAgbGV0IFtza2V3WCwgc2tld1ldID0gdW5pdmVyc2FsMmF4aXMocHJvcHMuc2tldywgcHJvcHMuc2tld1gsIHByb3BzLnNrZXdZKTtcbiAgICBsZXQgW3RyYW5zbGF0ZVgsIHRyYW5zbGF0ZVldID0gdW5pdmVyc2FsMmF4aXMoXG4gICAgICAgIHByb3BzLnRyYW5zbGF0ZSxcbiAgICAgICAgXy5pc05pbChwcm9wcy50cmFuc2xhdGVYKSA/IHByb3BzLnggOiBwcm9wcy50cmFuc2xhdGVYLFxuICAgICAgICBfLmlzTmlsKHByb3BzLnRyYW5zbGF0ZVkpID8gcHJvcHMueSA6IHByb3BzLnRyYW5zbGF0ZVlcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm90YXRpb246ICtwcm9wcy5yb3RhdGlvbiB8fCArcHJvcHMucm90YXRlIHx8IDAsXG4gICAgICAgIHNjYWxlWDogc2NhbGVYLFxuICAgICAgICBzY2FsZVk6IHNjYWxlWSxcbiAgICAgICAgb3JpZ2luWDogb3JpZ2luWCxcbiAgICAgICAgb3JpZ2luWTogb3JpZ2luWSxcbiAgICAgICAgc2tld1g6IHNrZXdYLFxuICAgICAgICBza2V3WTogc2tld1ksXG4gICAgICAgIHg6IHRyYW5zbGF0ZVgsXG4gICAgICAgIHk6IHRyYW5zbGF0ZVlcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtVG9NYXRyaXgocHJvcHMydHJhbnNmb3JtKHByb3BzKSwgcHJvcHMudHJhbnNmb3JtID8gcHJvcHMydHJhbnNmb3JtKHByb3BzLnRyYW5zZm9ybSkgOiBudWxsKTtcbn1cbiJdfQ==