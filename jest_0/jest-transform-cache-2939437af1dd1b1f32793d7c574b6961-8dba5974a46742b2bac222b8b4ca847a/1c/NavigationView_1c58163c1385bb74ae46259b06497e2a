de31990355514105b1e939d111bc701d











'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var Animated=require('react-native').Animated;
var NavigationContainer=require('./NavigationContainer');
var React=require('react');
var StyleSheet=require('react-native').StyleSheet;
var View=require('react-native').View;
var NavigationScenesReducer=require('./NavigationScenesReducer');
var ReactComponentWithPureRenderMixin=require('react-addons-pure-render-mixin');var























PropTypes=React.PropTypes;var





NavigationView=function(_React$Component){_inherits(NavigationView,_React$Component);












function NavigationView(props,context){_classCallCheck(this,NavigationView);var _this=_possibleConstructorReturn(this,(NavigationView.__proto__||Object.getPrototypeOf(NavigationView)).call(this,
props,context));

var layout={
initWidth:0,
initHeight:0,
isMeasured:false,
width:new Animated.Value(0),
height:new Animated.Value(0)};var


navigationState=_this.props.navigationState;

_this._position=new Animated.Value(navigationState.index);

_this.state={
layout:layout,
scenes:NavigationScenesReducer([],navigationState)};return _this;

}_createClass(NavigationView,[{key:'shouldComponentUpdate',value:function shouldComponentUpdate(

nextProps,nextState){
return ReactComponentWithPureRenderMixin.shouldComponentUpdate.call(
this,
nextProps,
nextState);

}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(

nextProps){var _this2=this;
if(nextProps.navigationState!==this.props.navigationState){var
_navigationState=nextProps.navigationState;
this.setState(
{
scenes:NavigationScenesReducer(
this.state.scenes,
_navigationState,
null)},


function(){
_this2._position.setValue(_navigationState.index);
});

}
}},{key:'componentWillMount',value:function componentWillMount()

{
this._onLayout=this._onLayout.bind(this);
}},{key:'render',value:function render()

{var _props=



this.props,navigationState=_props.navigationState,onNavigate=_props.onNavigate;var _state=




this.state,layout=_state.layout,scenes=_state.scenes;

var sceneProps={
layout:layout,
navigationState:navigationState,
onNavigate:onNavigate,
position:this._position,
scene:scenes[navigationState.index],
scenes:scenes};


return(
React.createElement(View,{
onLayout:this._onLayout,
style:this.props.style},
this._renderScene(sceneProps)));


}},{key:'_renderScene',value:function _renderScene(

props){

var child=this.props.renderScene(props);
if(child===null){
return null;
}
return React.createElement(View,{key:props.scene.key,style:styles.scene},child);
}},{key:'_onLayout',value:function _onLayout(

event){var _event$nativeEvent$la=
event.nativeEvent.layout,height=_event$nativeEvent$la.height,width=_event$nativeEvent$la.width;

var layout=_extends({},
this.state.layout,{
initHeight:height,
initWidth:width,
isMeasured:true});


layout.height.setValue(height);
layout.width.setValue(width);

this.setState({layout:layout});
}}]);return NavigationView;}(React.Component);NavigationView.propTypes={navigationState:PropTypes.object.isRequired,onNavigate:PropTypes.func.isRequired,renderScene:PropTypes.func.isRequired};


var styles=StyleSheet.create({
scene:{
bottom:0,
left:0,
position:'absolute',
right:0,
top:0}});



module.exports=NavigationContainer.create(NavigationView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdmlnYXRpb25WaWV3LmpzIl0sIm5hbWVzIjpbIkFuaW1hdGVkIiwicmVxdWlyZSIsIk5hdmlnYXRpb25Db250YWluZXIiLCJSZWFjdCIsIlN0eWxlU2hlZXQiLCJWaWV3IiwiTmF2aWdhdGlvblNjZW5lc1JlZHVjZXIiLCJSZWFjdENvbXBvbmVudFdpdGhQdXJlUmVuZGVyTWl4aW4iLCJQcm9wVHlwZXMiLCJOYXZpZ2F0aW9uVmlldyIsInByb3BzIiwiY29udGV4dCIsImxheW91dCIsImluaXRXaWR0aCIsImluaXRIZWlnaHQiLCJpc01lYXN1cmVkIiwid2lkdGgiLCJWYWx1ZSIsImhlaWdodCIsIm5hdmlnYXRpb25TdGF0ZSIsIl9wb3NpdGlvbiIsImluZGV4Iiwic3RhdGUiLCJzY2VuZXMiLCJuZXh0UHJvcHMiLCJuZXh0U3RhdGUiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJjYWxsIiwic2V0U3RhdGUiLCJzZXRWYWx1ZSIsIl9vbkxheW91dCIsImJpbmQiLCJvbk5hdmlnYXRlIiwic2NlbmVQcm9wcyIsInBvc2l0aW9uIiwic2NlbmUiLCJzdHlsZSIsIl9yZW5kZXJTY2VuZSIsImNoaWxkIiwicmVuZGVyU2NlbmUiLCJrZXkiLCJzdHlsZXMiLCJldmVudCIsIm5hdGl2ZUV2ZW50IiwiQ29tcG9uZW50IiwicHJvcFR5cGVzIiwib2JqZWN0IiwiaXNSZXF1aXJlZCIsImZ1bmMiLCJjcmVhdGUiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQVdBLGE7O0FBRUEsR0FBTUEsVUFBV0MsUUFBUSxjQUFSLEVBQXdCRCxRQUF6QztBQUNBLEdBQU1FLHFCQUFzQkQsUUFBUSx1QkFBUixDQUE1QjtBQUNBLEdBQU1FLE9BQVFGLFFBQVEsT0FBUixDQUFkO0FBQ0EsR0FBTUcsWUFBYUgsUUFBUSxjQUFSLEVBQXdCRyxVQUEzQztBQUNBLEdBQU1DLE1BQU9KLFFBQVEsY0FB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Q25CTSxNQURtQix1QkFDbkJBLE1BRG1CLENBQ1hGLEtBRFcsdUJBQ1hBLEtBRFc7O0FBRzFCLEdBQU1KO0FBQ0QsS0FBS1UsS0FBTCxDQUFXVixNQURWO0FBRUpFLFdBQVlJLE1BRlI7QUFHSkwsVUFBV0csS0FIUDtBQUlKRCxXQUFZLElBSlIsRUFBTjs7O0FBT0FILE9BQU9NLE1BQVAsQ0FBY1csUUFBZCxDQUF1QlgsTUFBdkI7QUFDQU4sT0FBT0ksS0FBUCxDQUFhYSxRQUFiLENBQXNCYixLQUF0Qjs7QUFFQSxLQUFLWSxRQUFMLENBQWMsQ0FBRWhCLGFBQUYsQ0FBZDtBQUNELEMsNEJBcEgwQlQsTUFBTXlDLFMsRUFBN0JuQyxjLENBT0dvQyxTLENBQVksQ0FDakIxQixnQkFBaUJYLFVBQVVzQyxNQUFWLENBQWlCQyxVQURqQixDQUVqQmYsV0FBWXhCLFVBQVV3QyxJQUFWLENBQWVELFVBRlYsQ0FHakJSLFlBQWEvQixVQUFVd0MsSUFBVixDQUFlRCxVQUhYLEM7OztBQWdIckIsR0FBTU4sUUFBU3JDLFdBQVc2QyxNQUFYLENBQWtCO0FBQy9CZCxNQUFPO0FBQ0xlLE9BQVEsQ0FESDtBQUVMQyxLQUFNLENBRkQ7QUFHTGpCLFNBQVUsVUFITDtBQUlMa0IsTUFBTyxDQUpGO0FBS0xDLElBQUssQ0FMQSxDQUR3QixDQUFsQixDQUFmOzs7O0FBVUFDLE9BQU9DLE9BQVAsQ0FBaUJyRCxvQkFBb0IrQyxNQUFwQixDQUEyQnhDLGNBQTNCLENBQWpCIiwiZmlsZSI6Ik5hdmlnYXRpb25WaWV3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBOYXZpZ2F0aW9uVmlld1xuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBBbmltYXRlZCA9IHJlcXVpcmUoJ3JlYWN0LW5hdGl2ZScpLkFuaW1hdGVkO1xuY29uc3QgTmF2aWdhdGlvbkNvbnRhaW5lciA9IHJlcXVpcmUoJy4vTmF2aWdhdGlvbkNvbnRhaW5lcicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJ3JlYWN0LW5hdGl2ZScpLlN0eWxlU2hlZXQ7XG5jb25zdCBWaWV3ID0gcmVxdWlyZSgncmVhY3QtbmF0aXZlJykuVmlldztcbmNvbnN0IE5hdmlnYXRpb25TY2VuZXNSZWR1Y2VyID0gcmVxdWlyZSgnLi9OYXZpZ2F0aW9uU2NlbmVzUmVkdWNlcicpO1xuY29uc3QgUmVhY3RDb21wb25lbnRXaXRoUHVyZVJlbmRlck1peGluID0gcmVxdWlyZSgncmVhY3QtYWRkb25zLXB1cmUtcmVuZGVyLW1peGluJyk7XG5cbmltcG9ydCB0eXBlIHtcbiAgTmF2aWdhdGlvbkFjdGlvbkNhbGxlcixcbiAgTmF2aWdhdGlvbkFuaW1hdGVkVmFsdWUsXG4gIE5hdmlnYXRpb25MYXlvdXQsXG4gIE5hdmlnYXRpb25QYXJlbnRTdGF0ZSxcbiAgTmF2aWdhdGlvblNjZW5lLFxuICBOYXZpZ2F0aW9uU2NlbmVSZW5kZXJlcixcbiAgTmF2aWdhdGlvblNjZW5lUmVuZGVyZXJQcm9wcyxcbn0gZnJvbSAnTmF2aWdhdGlvblR5cGVEZWZpbml0aW9uJztcblxudHlwZSBQcm9wcyA9IHtcbiAgbmF2aWdhdGlvblN0YXRlOiBOYXZpZ2F0aW9uUGFyZW50U3RhdGUsXG4gIG9uTmF2aWdhdGU6IE5hdmlnYXRpb25BY3Rpb25DYWxsZXIsXG4gIHJlbmRlclNjZW5lOiBOYXZpZ2F0aW9uU2NlbmVSZW5kZXJlcixcbiAgc3R5bGU6IGFueSxcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIGxheW91dDogTmF2aWdhdGlvbkxheW91dCxcbiAgc2NlbmVzOiBBcnJheTxOYXZpZ2F0aW9uU2NlbmU+LFxufTtcblxuY29uc3Qge1Byb3BUeXBlc30gPSBSZWFjdDtcblxuLyoqXG4gKiBBIHNpbXBsZSB2aWV3IHRoYXQgd2lsbCByZW5kZXIgYSBzY2VuZSBmb3IgdGhlIGN1cnJlbnRseSBmb2N1c2VkIHN1Yi1zdGF0ZS5cbiAqIFRoZSBtb3N0IGNvbW1vbiB1c2UtY2FzZSBpcyBmb3IgdGFicywgd2hlcmUgbm8gdHJhbnNpdGlvbiBpcyBuZWVkZWRcbiAqL1xuY2xhc3MgTmF2aWdhdGlvblZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBQcm9wcywgYW55PiB7XG4gIF9vbkxheW91dDogKGV2ZW50OiBhbnkpID0+IHZvaWQ7XG4gIF9wb3NpdGlvbjogTmF2aWdhdGlvbkFuaW1hdGVkVmFsdWU7XG5cbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogU3RhdGU7XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBuYXZpZ2F0aW9uU3RhdGU6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBvbk5hdmlnYXRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHJlbmRlclNjZW5lOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcywgY29udGV4dDogYW55KSB7XG4gICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuXG4gICAgY29uc3QgbGF5b3V0ID0ge1xuICAgICAgaW5pdFdpZHRoOiAwLFxuICAgICAgaW5pdEhlaWdodDogMCxcbiAgICAgIGlzTWVhc3VyZWQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IG5ldyBBbmltYXRlZC5WYWx1ZSgwKSxcbiAgICAgIGhlaWdodDogbmV3IEFuaW1hdGVkLlZhbHVlKDApLFxuICAgIH07XG5cbiAgICBjb25zdCB7bmF2aWdhdGlvblN0YXRlfSA9IHRoaXMucHJvcHM7XG5cbiAgICB0aGlzLl9wb3NpdGlvbiA9IG5ldyBBbmltYXRlZC5WYWx1ZShuYXZpZ2F0aW9uU3RhdGUuaW5kZXgpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGxheW91dCxcbiAgICAgIHNjZW5lczogTmF2aWdhdGlvblNjZW5lc1JlZHVjZXIoW10sIG5hdmlnYXRpb25TdGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IFByb3BzLCBuZXh0U3RhdGU6IFN0YXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFJlYWN0Q29tcG9uZW50V2l0aFB1cmVSZW5kZXJNaXhpbi5zaG91bGRDb21wb25lbnRVcGRhdGUuY2FsbChcbiAgICAgIHRoaXMsXG4gICAgICBuZXh0UHJvcHMsXG4gICAgICBuZXh0U3RhdGVcbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IFByb3BzKTogdm9pZCB7XG4gICAgaWYgKG5leHRQcm9wcy5uYXZpZ2F0aW9uU3RhdGUgIT09IHRoaXMucHJvcHMubmF2aWdhdGlvblN0YXRlKSB7XG4gICAgICBjb25zdCB7bmF2aWdhdGlvblN0YXRlfSA9IG5leHRQcm9wcztcbiAgICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICAgIHtcbiAgICAgICAgICBzY2VuZXM6IE5hdmlnYXRpb25TY2VuZXNSZWR1Y2VyKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zY2VuZXMsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uU3RhdGUsXG4gICAgICAgICAgICBudWxsLCAvLyBUaGVyZSB3aWxsIGJlIG5vIHRyYW5zdGlvbi5cbiAgICAgICAgICApLFxuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcG9zaXRpb24uc2V0VmFsdWUobmF2aWdhdGlvblN0YXRlLmluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbE1vdW50KCk6IHZvaWQge1xuICAgIHRoaXMuX29uTGF5b3V0ID0gdGhpcy5fb25MYXlvdXQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBSZWFjdEVsZW1lbnQge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hdmlnYXRpb25TdGF0ZSxcbiAgICAgIG9uTmF2aWdhdGVcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IHtcbiAgICAgIGxheW91dCxcbiAgICAgIHNjZW5lcyxcbiAgICB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvbnN0IHNjZW5lUHJvcHMgPSB7XG4gICAgICBsYXlvdXQsXG4gICAgICBuYXZpZ2F0aW9uU3RhdGU6IG5hdmlnYXRpb25TdGF0ZSxcbiAgICAgIG9uTmF2aWdhdGU6IG9uTmF2aWdhdGUsXG4gICAgICBwb3NpdGlvbjogdGhpcy5fcG9zaXRpb24sXG4gICAgICBzY2VuZTogc2NlbmVzW25hdmlnYXRpb25TdGF0ZS5pbmRleF0sXG4gICAgICBzY2VuZXMsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8Vmlld1xuICAgICAgICBvbkxheW91dD17dGhpcy5fb25MYXlvdXR9XG4gICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfT5cbiAgICAgICAge3RoaXMuX3JlbmRlclNjZW5lKHNjZW5lUHJvcHMpfVxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cblxuICBfcmVuZGVyU2NlbmUocHJvcHM6IE5hdmlnYXRpb25TY2VuZVJlbmRlcmVyUHJvcHMpOiA/UmVhY3RFbGVtZW50IHtcblxuICAgIGNvbnN0IGNoaWxkID0gdGhpcy5wcm9wcy5yZW5kZXJTY2VuZShwcm9wcyk7XG4gICAgaWYgKGNoaWxkID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIDxWaWV3IGtleT17cHJvcHMuc2NlbmUua2V5fSBzdHlsZT17c3R5bGVzLnNjZW5lfT57Y2hpbGR9PC9WaWV3PjtcbiAgfVxuXG4gIF9vbkxheW91dChldmVudDogYW55KTogdm9pZCB7XG4gICAgY29uc3Qge2hlaWdodCwgd2lkdGh9ID0gZXZlbnQubmF0aXZlRXZlbnQubGF5b3V0O1xuXG4gICAgY29uc3QgbGF5b3V0ID0ge1xuICAgICAgLi4udGhpcy5zdGF0ZS5sYXlvdXQsXG4gICAgICBpbml0SGVpZ2h0OiBoZWlnaHQsXG4gICAgICBpbml0V2lkdGg6IHdpZHRoLFxuICAgICAgaXNNZWFzdXJlZDogdHJ1ZSxcbiAgICB9O1xuXG4gICAgbGF5b3V0LmhlaWdodC5zZXRWYWx1ZShoZWlnaHQpO1xuICAgIGxheW91dC53aWR0aC5zZXRWYWx1ZSh3aWR0aCk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgbGF5b3V0IH0pO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgc2NlbmU6IHtcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMCxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICByaWdodDogMCxcbiAgICB0b3A6IDAsXG4gIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBOYXZpZ2F0aW9uQ29udGFpbmVyLmNyZWF0ZShOYXZpZ2F0aW9uVmlldyk7XG4iXX0=