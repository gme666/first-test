14dbaedb6c380a9413529463da281d64
Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

















var _react=require('react');var _react2=_interopRequireDefault(_react);
var _reactNative=require('react-native');
var _reactNativeSvg=require('react-native-svg');var _reactNativeSvg2=_interopRequireDefault(_reactNativeSvg);
var _util=require('./util');
var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);
var _Axis=require('./Axis');var _Axis2=_interopRequireDefault(_Axis);

require('babel-polyfill');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Bar=require('paths-js/bar');var

BarChart=function(_Component){_inherits(BarChart,_Component);function BarChart(){_classCallCheck(this,BarChart);return _possibleConstructorReturn(this,(BarChart.__proto__||Object.getPrototypeOf(BarChart)).apply(this,arguments));}_createClass(BarChart,[{key:'color',value:function color(
















































i){
var color=this.props.options.color;
if(!_lodash2.default.isString(this.props.options.color))color=color.color;
var pallete=this.props.pallete||_util.Colors.mix(color||'#9ac7f7');
return _util.Colors.string((0,_util.cyclic)(pallete,i));
}},{key:'getMaxAndMin',value:function getMaxAndMin(

values,scale){
var axisY=this.props.options.axisY;
var maxValue=axisY.max||0;
var minValue=axisY.min||0;

var max=_lodash2.default.max(values);
if(max>maxValue)maxValue=max;
var min=_lodash2.default.min(values);
if(min<minValue)minValue=min;

return{
minValue:minValue,
maxValue:maxValue,
min:scale(minValue),
max:scale(maxValue)};

}},{key:'render',value:function render()

{
var noDataMsg=this.props.noDataMessage||'No data available';
if(this.props.data===undefined)return _react2.default.createElement(_reactNative.Text,null,noDataMsg);

var options=new _util.Options(this.props);
var accessor=this.props.accessor||(0,_util.identity)(this.props.accessorKey);

var chart=Bar({
data:this.props.data,
gutter:this.props.options.gutter||10,
width:options.chartWidth,
height:options.chartHeight,
accessor:accessor,
min:this.props.options.axisY.min||undefined,
max:this.props.options.axisY.max||undefined});


var values=chart.curves.map(function(curve){return accessor(curve.item);});
var chartArea={x:{minValue:0,maxValue:200,min:0,max:options.chartWidth},
y:this.getMaxAndMin(values,chart.scale),
margin:options.margin};

var textStyle=(0,_util.fontAdapt)(options.axisX.label);
var labelOffset=this.props.options.axisX.label.offset||20;

var lines=chart.curves.map(function(c,i){
var numDataGroups=this.props.data.length||0;
var colorVariationVal=numDataGroups>1?numDataGroups:3;
var color=this.color(i%colorVariationVal);
var stroke=_util.Colors.darkenColor(color);
return(
_react2.default.createElement(_reactNativeSvg.G,{key:'lines'+i},
_react2.default.createElement(_reactNativeSvg.Path,{d:c.line.path.print(),stroke:stroke,fill:color}),
options.axisX.showLabels?
_react2.default.createElement(_reactNativeSvg.Text,{fontFamily:textStyle.fontFamily,
fontSize:textStyle.fontSize,fontWeight:textStyle.fontWeight,fontStyle:textStyle.fontStyle,
fill:textStyle.fill,x:c.line.centroid[0],y:labelOffset+chartArea.y.min,
originX:c.line.centroid[0],originY:labelOffset+chartArea.y.min,rotate:textStyle.rotate,
textAnchor:'middle'},
c.item.name):

null));


},this);

return _react2.default.createElement(_reactNativeSvg2.default,{width:options.width,height:options.height},
_react2.default.createElement(_reactNativeSvg.G,{x:options.margin.left,y:options.margin.top},
_react2.default.createElement(_Axis2.default,{scale:chart.scale,options:options.axisY,chartArea:chartArea}),
lines));


}}]);return BarChart;}(_react.Component);BarChart.defaultProps={accessorKey:'',options:{width:600,height:600,margin:{top:20,left:20,bottom:50,right:20},color:'#2980B9',gutter:20,animate:{type:'oneByOne',duration:200,fillTransition:3},axisX:{showAxis:true,showLines:true,showLabels:true,showTicks:true,zeroAxis:false,orient:'bottom',label:{fontFamily:'Arial',fontSize:14,bold:true,color:'#34495E',rotate:45}},axisY:{min:false,max:false,showAxis:true,showLines:true,showLabels:true,showTicks:true,zeroAxis:false,orient:'left',label:{fontFamily:'Arial',fontSize:14,bold:true,color:'#34495E'}}}};exports.default=BarChart;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJhci5qcyJdLCJuYW1lcyI6WyJCYXIiLCJyZXF1aXJlIiwiQmFyQ2hhcnQiLCJpIiwiY29sb3IiLCJwcm9wcyIsIm9wdGlvbnMiLCJpc1N0cmluZyIsInBhbGxldGUiLCJtaXgiLCJzdHJpbmciLCJ2YWx1ZXMiLCJzY2FsZSIsImF4aXNZIiwibWF4VmFsdWUiLCJtYXgiLCJtaW5WYWx1ZSIsIm1pbiIsIm5vRGF0YU1zZyIsIm5vRGF0YU1lc3NhZ2UiLCJkYXRhIiwidW5kZWZpbmVkIiwiYWNjZXNzb3IiLCJhY2Nlc3NvcktleSIsImNoYXJ0IiwiZ3V0dGVyIiwid2lkdGgiLCJjaGFydFdpZHRoIiwiaGVpZ2h0IiwiY2hhcnRIZWlnaHQiLCJjdXJ2ZXMiLCJtYXAiLCJjdXJ2ZSIsIml0ZW0iLCJjaGFydEFyZWEiLCJ4IiwieSIsImdldE1heEFuZE1pbiIsIm1hcmdpbiIsInRleHRTdHlsZSIsImF4aXNYIiwibGFiZWwiLCJsYWJlbE9mZnNldCIsIm9mZnNldCIsImxpbmVzIiwiYyIsIm51bURhdGFHcm91cHMiLCJsZW5ndGgiLCJjb2xvclZhcmlhdGlvblZhbCIsInN0cm9rZSIsImRhcmtlbkNvbG9yIiwibGluZSIsInBhdGgiLCJwcmludCIsInNob3dMYWJlbHMiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwiZmlsbCIsImNlbnRyb2lkIiwicm90YXRlIiwibmFtZSIsImxlZnQiLCJ0b3AiLCJkZWZhdWx0UHJvcHMiLCJib3R0b20iLCJyaWdodCIsImFuaW1hdGUiLCJ0eXBlIiwiZHVyYXRpb24iLCJmaWxsVHJhbnNpdGlvbiIsInNob3dBeGlzIiwic2hvd0xpbmVzIiwic2hvd1RpY2tzIiwiemVyb0F4aXMiLCJvcmllbnQiLCJib2xkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEsNEI7QUFDQTtBQUNBLGdEO0FBQ0E7QUFDQSw4QjtBQUNBLDRCOztBQUVBLDBCLGk0QkFEQSxHQUFNQSxL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LElBTFAsQ0FNTG9CLFVBQVcsSUFOTixDQU9MQyxTQUFVLEtBUEwsQ0FRTEMsT0FBUSxNQVJILENBU0xuQyxNQUFPLENBQ0xjLFdBQVksT0FEUCxDQUVMQyxTQUFVLEVBRkwsQ0FHTHFCLEtBQU0sSUFIRCxDQUlMekUsTUFBTyxTQUpGLENBVEYsQ0ExQkEsQ0FGVyxDLGlCQUZIRixRIiwiZmlsZSI6IkJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxNiBDYXBpdGFsIE9uZSBTZXJ2aWNlcywgTExDXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cblNQRFgtQ29weXJpZ2h0OiBDb3B5cmlnaHQgKGMpIENhcGl0YWwgT25lIFNlcnZpY2VzLCBMTENcblNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xuXG5pbXBvcnQgUmVhY3Qse0NvbXBvbmVudH0gZnJvbSAncmVhY3QnXG5pbXBvcnQge1RleHQgYXMgUmVhY3RUZXh0fSAgZnJvbSAncmVhY3QtbmF0aXZlJ1xuaW1wb3J0IFN2Zyx7IEcsIFBhdGgsIFRleHQgfSBmcm9tICdyZWFjdC1uYXRpdmUtc3ZnJ1xuaW1wb3J0IHsgQ29sb3JzLCBPcHRpb25zLCBmb250QWRhcHQsIGN5Y2xpYywgY29sb3IsIGlkZW50aXR5IH0gZnJvbSAnLi91dGlsJ1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IEF4aXMgZnJvbSAnLi9BeGlzJ1xuY29uc3QgQmFyID0gcmVxdWlyZSgncGF0aHMtanMvYmFyJylcbmltcG9ydCAnYmFiZWwtcG9seWZpbGwnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhckNoYXJ0IGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGFjY2Vzc29yS2V5OicnLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIHdpZHRoOiA2MDAsXG4gICAgICBoZWlnaHQ6IDYwMCxcbiAgICAgIG1hcmdpbjoge3RvcDogMjAsIGxlZnQ6IDIwLCBib3R0b206IDUwLCByaWdodDogMjB9LFxuICAgICAgY29sb3I6ICcjMjk4MEI5JyxcbiAgICAgIGd1dHRlcjogMjAsXG4gICAgICBhbmltYXRlOiB7XG4gICAgICAgIHR5cGU6ICdvbmVCeU9uZScsXG4gICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgIGZpbGxUcmFuc2l0aW9uOiAzXG4gICAgICB9LFxuICAgICAgYXhpc1g6IHtcbiAgICAgICAgc2hvd0F4aXM6IHRydWUsXG4gICAgICAgIHNob3dMaW5lczogdHJ1ZSxcbiAgICAgICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICAgICAgc2hvd1RpY2tzOiB0cnVlLFxuICAgICAgICB6ZXJvQXhpczogZmFsc2UsXG4gICAgICAgIG9yaWVudDogJ2JvdHRvbScsXG4gICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICBmb250U2l6ZTogMTQsXG4gICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICBjb2xvcjogJyMzNDQ5NUUnLFxuICAgICAgICAgIHJvdGF0ZTogNDUsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBheGlzWToge1xuICAgICAgICBtaW46IGZhbHNlLFxuICAgICAgICBtYXg6IGZhbHNlLFxuICAgICAgICBzaG93QXhpczogdHJ1ZSxcbiAgICAgICAgc2hvd0xpbmVzOiB0cnVlLFxuICAgICAgICBzaG93TGFiZWxzOiB0cnVlLFxuICAgICAgICBzaG93VGlja3M6IHRydWUsXG4gICAgICAgIHplcm9BeGlzOiBmYWxzZSxcbiAgICAgICAgb3JpZW50OiAnbGVmdCcsXG4gICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICBmb250U2l6ZTogMTQsXG4gICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICBjb2xvcjogJyMzNDQ5NUUnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb2xvcihpKSB7XG4gICAgbGV0IGNvbG9yID0gdGhpcy5wcm9wcy5vcHRpb25zLmNvbG9yXG4gICAgaWYgKCFfLmlzU3RyaW5nKHRoaXMucHJvcHMub3B0aW9ucy5jb2xvcikpIGNvbG9yID0gY29sb3IuY29sb3JcbiAgICBjb25zdCBwYWxsZXRlID0gdGhpcy5wcm9wcy5wYWxsZXRlIHx8IENvbG9ycy5taXgoY29sb3IgfHwgJyM5YWM3ZjcnKVxuICAgIHJldHVybiBDb2xvcnMuc3RyaW5nKGN5Y2xpYyhwYWxsZXRlLCBpKSlcbiAgfVxuXG4gIGdldE1heEFuZE1pbih2YWx1ZXMsIHNjYWxlKSB7XG4gICAgY29uc3QgYXhpc1kgPSB0aGlzLnByb3BzLm9wdGlvbnMuYXhpc1lcblx0XHRsZXQgbWF4VmFsdWUgPSBheGlzWS5tYXggfHwgMFxuXHRcdGxldCBtaW5WYWx1ZSA9IGF4aXNZLm1pbiB8fCAwXG5cbiAgICBsZXQgbWF4ID0gXy5tYXgodmFsdWVzKVxuICAgIGlmIChtYXggPiBtYXhWYWx1ZSkgbWF4VmFsdWUgPSBtYXhcbiAgICBsZXQgbWluID0gXy5taW4odmFsdWVzKVxuICAgIGlmIChtaW4gPCBtaW5WYWx1ZSkgbWluVmFsdWUgPSBtaW5cblxuICAgIHJldHVybiB7XG4gICAgICBtaW5WYWx1ZTogbWluVmFsdWUsXG4gICAgICBtYXhWYWx1ZTogbWF4VmFsdWUsXG4gICAgICBtaW46IHNjYWxlKG1pblZhbHVlKSxcbiAgICAgIG1heDogc2NhbGUobWF4VmFsdWUpXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG5vRGF0YU1zZyA9IHRoaXMucHJvcHMubm9EYXRhTWVzc2FnZSB8fCAnTm8gZGF0YSBhdmFpbGFibGUnXG4gICAgaWYgKHRoaXMucHJvcHMuZGF0YSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gKDxSZWFjdFRleHQ+e25vRGF0YU1zZ308L1JlYWN0VGV4dD4pXG5cbiAgICBsZXQgb3B0aW9ucyA9IG5ldyBPcHRpb25zKHRoaXMucHJvcHMpXG4gICAgbGV0IGFjY2Vzc29yID0gdGhpcy5wcm9wcy5hY2Nlc3NvciB8fCBpZGVudGl0eSh0aGlzLnByb3BzLmFjY2Vzc29yS2V5KVxuXG4gICAgbGV0IGNoYXJ0ID0gQmFyKHtcbiAgICAgIGRhdGE6IHRoaXMucHJvcHMuZGF0YSxcbiAgICAgIGd1dHRlcjogdGhpcy5wcm9wcy5vcHRpb25zLmd1dHRlciB8fCAxMCxcbiAgICAgIHdpZHRoOiBvcHRpb25zLmNoYXJ0V2lkdGgsXG4gICAgICBoZWlnaHQ6IG9wdGlvbnMuY2hhcnRIZWlnaHQsXG4gICAgICBhY2Nlc3NvcjogYWNjZXNzb3IsXG4gICAgICBtaW46IHRoaXMucHJvcHMub3B0aW9ucy5heGlzWS5taW4gfHwgdW5kZWZpbmVkLFxuICAgICAgbWF4OiB0aGlzLnByb3BzLm9wdGlvbnMuYXhpc1kubWF4IHx8IHVuZGVmaW5lZCxcbiAgICB9KVxuXG4gICAgbGV0IHZhbHVlcyA9IGNoYXJ0LmN1cnZlcy5tYXAoKGN1cnZlKSA9PiBhY2Nlc3NvcihjdXJ2ZS5pdGVtKSlcbiAgICBsZXQgY2hhcnRBcmVhID0ge3g6IHttaW5WYWx1ZTogMCwgbWF4VmFsdWU6IDIwMCwgbWluOiAwLCBtYXg6IG9wdGlvbnMuY2hhcnRXaWR0aH0sXG4gICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLmdldE1heEFuZE1pbih2YWx1ZXMsIGNoYXJ0LnNjYWxlKSxcbiAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjpvcHRpb25zLm1hcmdpbn1cblxuICAgIGxldCB0ZXh0U3R5bGUgPSBmb250QWRhcHQob3B0aW9ucy5heGlzWC5sYWJlbClcbiAgICBsZXQgbGFiZWxPZmZzZXQgPSB0aGlzLnByb3BzLm9wdGlvbnMuYXhpc1gubGFiZWwub2Zmc2V0IHx8IDIwXG5cbiAgICBsZXQgbGluZXMgPSBjaGFydC5jdXJ2ZXMubWFwKGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICBsZXQgbnVtRGF0YUdyb3VwcyA9IHRoaXMucHJvcHMuZGF0YS5sZW5ndGggfHwgMFxuICAgICAgbGV0IGNvbG9yVmFyaWF0aW9uVmFsID0gbnVtRGF0YUdyb3VwcyA+IDEgPyBudW1EYXRhR3JvdXBzIDogM1xuICAgICAgbGV0IGNvbG9yID0gdGhpcy5jb2xvcihpICUgY29sb3JWYXJpYXRpb25WYWwpXG4gICAgICBsZXQgc3Ryb2tlID0gQ29sb3JzLmRhcmtlbkNvbG9yKGNvbG9yKVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8RyBrZXk9eydsaW5lcycgKyBpfT5cbiAgICAgICAgICAgICAgICAgICAgPFBhdGggIGQ9eyBjLmxpbmUucGF0aC5wcmludCgpIH0gc3Ryb2tlPXtzdHJva2V9IGZpbGw9e2NvbG9yfS8+XG4gICAgICAgICAgICAgICAgICAgIHtvcHRpb25zLmF4aXNYLnNob3dMYWJlbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQgZm9udEZhbWlseT17dGV4dFN0eWxlLmZvbnRGYW1pbHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXt0ZXh0U3R5bGUuZm9udFNpemV9IGZvbnRXZWlnaHQ9e3RleHRTdHlsZS5mb250V2VpZ2h0fSBmb250U3R5bGU9e3RleHRTdHlsZS5mb250U3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9e3RleHRTdHlsZS5maWxsfSB4PXtjLmxpbmUuY2VudHJvaWRbMF19IHk9e2xhYmVsT2Zmc2V0ICsgY2hhcnRBcmVhLnkubWlufVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5YPXtjLmxpbmUuY2VudHJvaWRbMF19IG9yaWdpblk9e2xhYmVsT2Zmc2V0ICsgY2hhcnRBcmVhLnkubWlufSByb3RhdGU9e3RleHRTdHlsZS5yb3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbmNob3I9XCJtaWRkbGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2MuaXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICA6IG51bGx9XG4gICAgICAgICAgICAgICAgPC9HPlxuICAgICAgICAgICAgKVxuICAgIH0sIHRoaXMpXG5cbiAgICByZXR1cm4gKDxTdmcgd2lkdGg9e29wdGlvbnMud2lkdGh9IGhlaWdodD17b3B0aW9ucy5oZWlnaHR9PlxuICAgICAgICAgICAgICA8RyB4PXtvcHRpb25zLm1hcmdpbi5sZWZ0fSB5PXtvcHRpb25zLm1hcmdpbi50b3B9PlxuICAgICAgICAgICAgICAgIDxBeGlzIHNjYWxlPXtjaGFydC5zY2FsZX0gb3B0aW9ucz17b3B0aW9ucy5heGlzWX0gY2hhcnRBcmVhPXtjaGFydEFyZWF9IC8+XG4gICAgICAgICAgICAgICAge2xpbmVzfVxuICAgICAgICAgICAgICA8L0c+XG4gICAgICAgICAgICA8L1N2Zz4pXG4gIH1cbn1cbiJdfQ==